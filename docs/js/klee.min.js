!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Klee=t():e.Klee=t()}(self,function(){return(()=>{"use strict";var r,o,i={741:(e,t,i)=>{i.r(t),i.d(t,{Klee:()=>Ze,get:()=>function(e){return Ze.getInstance(e)},init:()=>function(e){return new Ze(e)}});class s{constructor(e){this._element=e,this._context=this._element.getContext("2d",{alpha:!1}),this._PI_TIMES_TWO=2*Math.PI}getBoundingClientRect(){return this._element.getBoundingClientRect()}fillStyle(e){return this._context.fillStyle=e,this}strokeStyle(e){return this._context.strokeStyle=e,this}beginPath(){return this._context.beginPath(),this}closePath(){return this._context.closePath(),this}drawImage(e,t,i,s,n){return this._context.drawImage(e,t,i,s,n),this}roundedRectangle(e,t,i,s,n){let r,o,l,a;return a=n instanceof Object?(r=n.radiusTopLeft,o=n.radiusTopRight,l=n.radiusBottomLeft,n.radiusBottomRight):(r=n,o=n,l=n),this._context.beginPath(),this._context.moveTo(e+r,t),this._context.lineTo(e+i-o,t),this._context.quadraticCurveTo(e+i,t,e+i,t+o),this._context.lineTo(e+i,t+s-a),this._context.quadraticCurveTo(e+i,t+s,e+i-a,t+s),this._context.lineTo(e+l,t+s),this._context.quadraticCurveTo(e,t+s,e,t+s-l),this._context.lineTo(e,t+r),this._context.quadraticCurveTo(e,t,e+r,t),this._context.closePath(),this}lineTo(e,t){return this._context.lineTo(e,t),this}quadraticCurveTo(e,t,i,s){return this._context.quadraticCurveTo(e,t,i,s),this}fill(e,t){return e instanceof Path2D?this._context.fill(e,t):void 0!==e?this._context.fill(e):this._context.fill(),this}stroke(e){return null!=e?this._context.stroke(e):this._context.stroke(),this}clear(){return this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._element.width,this._element.height),this}translate(e,t){return this._context.translate(e,t),this}fillRect(e,t,i,s){return this._context.fillRect(e,t,i,s),this}strokeRect(e,t,i,s){return this._context.strokeRect(e,t,i,s),this}setLineDash(e){return this._context.setLineDash(e),this}fillCircle(e,t,i){return this._context.beginPath(),this._context.arc(e,t,i,0,this._PI_TIMES_TWO),this._context.fill(),this}strokeCircle(e,t,i){return this._context.beginPath(),this._context.arc(e,t,i,0,this._PI_TIMES_TWO),this._context.stroke(),this}fillText(e,t,i,s){return this._context.fillText(e,t,i,s),this}strokeText(e,t,i,s){return this._context.strokeText(e,t,i,s),this}shadow(e,t,i){return this._context.shadowOffsetX=e.x,this._context.shadowOffsetY=e.y,this._context.shadowBlur=t,this._context.shadowColor=i,this}lineWidth(e){return this._context.lineWidth=e,this}moveTo(e,t){return this._context.moveTo(e,t),this}bezierCurveTo(e,t,i,s,n,r){return this._context.bezierCurveTo(e,t,i,s,n,r),this}save(){return this._context.save(),this}restore(){return this._context.restore(),this}font(e){return this._context.font=e,this}textAlign(e){return this._context.textAlign=e,this}getContext(){return this._context}get width(){return this._element.width}get height(){return this._element.height}}class n{static checkIntersection(e,t,i,s){return this.absRect(e,t),this.absRect(i,s),e.x<i.x+s.x&&e.x+t.x>i.x&&e.y<i.y+s.y&&e.y+t.y>i.y}static absRect(e,t){t.x<0&&(e.x+=t.x,t.x=Math.abs(t.x)),t.y<0&&(e.y+=t.y,t.y=Math.abs(t.y))}}class c{constructor(e,t){this.x=e,this.y=t}add(e){return new c(this.x+e.x,this.y+e.y)}subtract(e){return new c(this.x-e.x,this.y-e.y)}divide(e){return new c(this.x/e.x,this.y/e.y)}multiply(e){return e instanceof c?new c(this.x*e.x,this.y*e.y):new c(this.x*e,this.y*e)}toString(){return`Vector2(x: ${this.x}, y: ${this.y})`}copy(){return new c(this.x,this.y)}}function h(e){return void 0!==e.onMouseDown&&void 0!==e.onMouseUp&&void 0!==e.onMouseEnter&&void 0!==e.onMouseLeave&&void 0!==e.onMouseMove}var d,l;(t=d=d||{})[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right";class r{constructor(e,t){this._actions=[],this.hoveredControls=[],this.app=t,this._element=e,He.isFirefox&&(this._element.setAttribute("contenteditable",""),this._element.style.cursor="default",this._element.style.color="transparent"),e.tabIndex=0,e.onmousedown=e=>this.onMouseDown(e),e.onmouseup=e=>this.onMouseUp(e),e.onmousemove=e=>this.onMouseMove(e),e.onmouseenter=e=>this.onMouseEnter(e),e.onmouseleave=e=>this.onMouseLeave(e),e.onkeydown=e=>this.onKeydown(e),e.oncontextmenu=e=>this.onContextMenu(e),this.registerAction({ctrl:!0,keycode:"KeyA",callback:this.selectAllNodes.bind(this)})}registerAction(e){this._actions.push(e)}onKeydown(t){for(const e of this._actions.filter(e=>e.keycode===t.code))e.ctrl===t.ctrlKey&&e.callback(t)&&t.preventDefault()}onMouseDown(e){this._mouseDownData={buttonType:e.button,position:this.getMousePosition(e)},this._mousePositionOfPreviousMove=this._mouseDownData.position;var t,i,s=this.getAbsoluteMousePosition(e);let n=this.getIntersectingControls(s,new c(0,0));n=n.sort((e,t)=>e.ZIndex-t.ZIndex);for(t of n)if(t.onMouseDown(e))break;for(i of this.hoveredControls)n.indexOf(i)<0&&(this.hoveredControls.splice(this.hoveredControls.indexOf(i),1),h(i)&&i.onMouseLeave(e))}onMouseUp(e){const t=this.getMousePosition(e);var i,s,n,r=this.getAbsoluteMousePosition(e);let o=!1,l=this.getIntersectingControls(r,new c(0,0));l=l.sort((e,t)=>e.ZIndex-t.ZIndex);for(i of l)if(h(i)&&(o=i.onMouseUp(e)))break;for(s of this.hoveredControls)l.indexOf(s)<0&&(this.hoveredControls.splice(this.hoveredControls.indexOf(s),1),h(s)&&s.onMouseLeave(e));!this._mouseDownData||o||0==(n=t.subtract(this._mouseDownData.position)).x&&0==n.y&&(this.app.scene.nodes.forEach(e=>e.selected=!1),this.selectIntersectingControls(r,new c(0,0))),this._mouseDownData=null,this.app.scene.refresh()}onMouseMove(e){const t=this.getMousePosition(e);var i,s,n,r=this.getAbsoluteMousePosition(e);if(this._mouseDownData){if(this._mouseDownData.buttonType===d.Right){var o=t.subtract(this._mousePositionOfPreviousMove);return this._mousePositionOfPreviousMove=t,this.app.scene.camera.moveRelative(o),this.app.scene.refresh(),!1}if(this._mouseDownData.buttonType===d.Left){var l=t.subtract(this._mouseDownData.position);this.app.scene.refresh();o=this.getAbsoluteMouseDownPosition(e);return this.drawMouseSelection(o.x,o.y,l.x,l.y),this.selectIntersectingControls(o,l),!1}}let a=this.getIntersectingControls(r,new c(0,0));for(i of a)this.hoveredControls.indexOf(i)<0&&(this.hoveredControls.push(i),h(i)&&i.onMouseEnter(e));a=a.sort((e,t)=>e.ZIndex-t.ZIndex);for(s of a)if(h(s)&&s.onMouseMove(e))break;for(n of this.hoveredControls)a.indexOf(n)<0&&(this.hoveredControls.splice(this.hoveredControls.indexOf(n),1),h(n)&&n.onMouseLeave(e));return!1}onMouseEnter(e){0==e.buttons&&(this._mouseDownData=null)}onMouseLeave(e){if(this._mouseDownData&&this._mouseDownData.buttonType===d.Left)return this.app.scene.nodes.forEach(e=>e.selected=!1),this.app.scene.refresh(),!1}onContextMenu(e){return e.preventDefault(),e.stopPropagation(),!1}drawMouseSelection(e,t,i,s){this.app.canvas.save().setLineDash([6]).strokeStyle("#fff").lineWidth(2).strokeRect(e,t,i,s).restore()}selectIntersectingControls(e,t){this.app.scene.nodes.forEach(e=>e.selected=!1);const i=this.getIntersectingNodeControls(e,t);i.forEach(e=>e.selected=!0)}getIntersectingNodeControls(t,i){return this.app.scene.nodes.filter(e=>n.checkIntersection(t,i,e.position,e.size))||[]}getIntersectingControls(t,i){return this.app.scene.interactables.filter(e=>n.checkIntersection(t,i,e.getAbsolutPosition(),e.size))||[]}getAbsoluteMousePosition(e){var t=this.app.scene.camera.position,e=this.getMousePosition(e);return new c(e.x-t.x,e.y-t.y)}getAbsoluteMouseDownPosition(e){var t=this.app.scene.camera.position;return new c(this._mouseDownData.position.x-t.x,this._mouseDownData.position.y-t.y)}selectAllNodes(){return this.app.scene.nodes.forEach(e=>e.selected=!0),this.app.scene.refresh(),!0}getMousePosition(e){var t=this._element.getBoundingClientRect();return new c(e.clientX-t.left,e.clientY-t.top)}}(t=l=l||{})[t.EGPD_Input=0]="EGPD_Input",t[t.EGPD_Output=1]="EGPD_Output";class o extends class{}{constructor(e){super(),this.nodeName=e,this.direction=l.EGPD_Input}get isLinked(){return this.linkedTo&&0<this.linkedTo.length}get formattedName(){return this.hideName?"":this.friendlyName||this.name}get shouldDrawDefaultValueBox(){return!this.isLinked&&this.direction!==l.EGPD_Output&&null!=this.defaultValue}getUniqueName(){return this.nodeName+" "+this.id}}const a={K2_SetTimerDelegate:"Set Timer by Event",K2_SetTimer:"Set Timer by Function Name",K2_PauseTimer:"Pause Timer by Function Name",K2_ClearAndInvalidateTimerHandle:"Clear and Invalidate Timer by Handle",K2_ClearTimer:"Clear Timer by Function Name",K2_TimerExists:"Does Timer Exist by Function Name",K2_TimerExistsHandle:"Does Timer Exist by Handle",K2_GetTimerElapsedTime:"Get Timer Elapsed Time by Function Name",K2_GetTimerElapsedTimeHandle:"Get Timer Elapsed Time by Handle",K2_InvalidateTimerHandle:"Invalidate",K2_IsTimerActiveHandle:"Is Timer Active by Handle",K2_DestroyActor:"Destroy Actor"};function p(e){return(e=e||"").replace(/((?<=[a-z])[A-Z]+)/g," $1")}function u(e){return a[e]||e}function _(e){return(e=(e=p(e.replace(/^b(?=[A-Z])/g,"").replace(/[_]/g," "))).trim()).charAt(0).toUpperCase()+e.slice(1)}function T(e){let t=Number(e);return isNaN(t)?e:Number.isInteger(t)?t+".0":t.toString()}var m,g,f,E,N,C,y,P,t=JSON.parse('{"/Script/Engine.ESpawnActorCollisionHandlingMethod":{"Undefined":"Default","AlwaysSpawn":"Always Spawn, Ignore Collisions","AdjustIfPossibleButAlwaysSpawn":"Try to Adjust Location, But Always Spawn","AdjustIfPossibleButDontSpawnIfColliding":"Try to Adjust Location, Don\'t Spawn If Still Colliding","DontSpawnIfColliding":"Do Not Spawn"},"/Script/Engine.ETraceTypeQuery":{"TraceTypeQuery1":"Visibility","TraceTypeQuery2":"Camera"},"/Script/Engine.ECanBeCharacterBase":{"ECB_Yes":"Yes","ECB_No":"No","ECB_Owner":"(Owner)"},"/Script/Engine.ECollisionChannel":{"ECC_WorldStatic":"WorldStatic","ECC_WorldDynamic":"WorldDynamic","ECC_Pawn":"Pawn","ECC_Visibility":"Visibility","ECC_Camera":"Camera","ECC_PhysicsBody":"PhysicsBody","ECC_Vehicle":"Vehicle","ECC_Destructible":"Destructible"},"/Script/UMG.ESlateVisibility":{"Visible":"Visible","Collapsed":"Collapsed","Hidden":"Hidden","HitTestInvisible":"Not Hit-Testable (Self & All Children)","SelfHitTestInvisible":"Not Hit-Testable (Self Only)"}}'),O=i.t(t,2);class A{static parseString(e){return e.replace(/(?<!\\)["']/g,"")}static stripLine(e){return e.replace("\t","").trim()}static parseColor(e){var t;let i=[];for(t of(e=e.replace(/[()]/g,"")).split(",")){var s=t.split("="),s="A"!=s[0]?Math.floor(255*Number.parseFloat(s[1])):Number.parseFloat(s[1]);i.push(s)}return"rgba("+i.join(",")+")"}static getClassFriendlyName(e){var t=A.parseString(e),t=/(?<=\.)((?!_C$)\w)*/g.exec(t);return t?t[0]:e}static hidePinNames(e){e.forEach(e=>e instanceof o!=!1&&void(e.hideName=!0))}static getFirstClassNameFromPinProperties(e){for(const t of e)if(t instanceof o&&"Class"===t.name&&!t.isLinked)return t.defaultValue||"NONE"}static parseEnumValue(e,t){t=t.replace(/["']/g,"");e=O[e];return e&&e[t]||_(t)}}(t=m=m||{}).KNOT="/Script/BlueprintGraph.K2Node_Knot",t.CALL_FUNCTION="/Script/BlueprintGraph.K2Node_CallFunction",t.IF_THEN_ELSE="/Script/BlueprintGraph.K2Node_IfThenElse",t.EXECUTION_SEQUENCE="/Script/BlueprintGraph.K2Node_ExecutionSequence",t.MULTI_GATE="/Script/BlueprintGraph.K2Node_MultiGate",t.VARIABLE_GET="/Script/BlueprintGraph.K2Node_VariableGet",t.VARIABLE_SET="/Script/BlueprintGraph.K2Node_VariableSet",t.EVENT="/Script/BlueprintGraph.K2Node_Event",t.CUSTOM_EVENT="/Script/BlueprintGraph.K2Node_CustomEvent",t.INPUT_AXIS_EVENT="/Script/BlueprintGraph.K2Node_InputAxisEvent",t.COMMENT="/Script/UnrealEd.EdGraphNode_Comment",t.INPUT_KEY="/Script/BlueprintGraph.K2Node_InputKey",t.CommutativeAssociativeBinaryOperator="/Script/BlueprintGraph.K2Node_CommutativeAssociativeBinaryOperator",t.DYNAMIC_CAST="/Script/BlueprintGraph.K2Node_DynamicCast",t.SWITCH_ENUM="/Script/BlueprintGraph.K2Node_SwitchEnum",t.MACRO_INSTANCE="/Script/BlueprintGraph.K2Node_MacroInstance",t.FUNCTION_ENTRY="/Script/BlueprintGraph.K2Node_FunctionEntry",t.FUNCTION_RESULT="/Script/BlueprintGraph.K2Node_FunctionResult",t.CALL_ARRAY_FUNCTION="/Script/BlueprintGraph.K2Node_CallArrayFunction",t.SELF="/Script/BlueprintGraph.K2Node_Self",t.GET_ARRAY_ITEM="/Script/BlueprintGraph.K2Node_GetArrayItem",t.MAKE_ARRAY="/Script/BlueprintGraph.K2Node_MakeArray",t.INPUT_TOUCH="/Script/BlueprintGraph.K2Node_InputTouch",t.GET_INPUT_AXIS_KEY_VALUE="/Script/BlueprintGraph.K2Node_GetInputAxisKeyValue",t.SET_FIELDS_IN_STRUCT="/Script/BlueprintGraph.K2Node_SetFieldsInStruct",t.BREAK_STRUCT="/Script/BlueprintGraph.K2Node_BreakStruct",t.MAKE_STRUCT="/Script/BlueprintGraph.K2Node_MakeStruct",t.SELECT="/Script/BlueprintGraph.K2Node_Select",t.TIMELINE="/Script/BlueprintGraph.K2Node_Timeline",t.SPAWN_ACTOR_FROM_CLASS="/Script/BlueprintGraph.K2Node_SpawnActorFromClass",t.TUNNEL="/Script/BlueprintGraph.K2Node_Tunnel",t.CREATE_WIDGET="/Script/UMGEditor.K2Node_CreateWidget",t.CREATE_OBJECT="/Script/BlueprintGraph.K2Node_GenericCreateObject";class x{}x.NODE_FONT="12px sans-serif",x.NODE_HEADER_FONT="bold 12px sans-serif",x.NODE_BACKGROUND_COLOR="rgba(15,15,15,0.6)",x.NODE_TEXT_COLOR="rgb(240,240,240)",x.NODE_SUBTITLE_COLOR="rgb(170,170,170)",x.NODE_MATHFUNC_TITLE_FONT="bold 24px sans-serif",x.NODE_MATHFUNC_SUBTITLE_FONT="bold 12px sans-serif",x.NODE_MATHFUNC_TITLE_COLOR="rgb(142,142,142)",x.DEFAULT_VALUE_BOX_TEXT_PADDING=4,x.DEFAULT_VALUE_BOX_MARGIN_LEFT=8,x.DEFAULT_FUNC_BACKGROUND_COLOR="78, 117, 142",x.DEFAULT_FUNC_PURE_BACKGROUND_COLOR="92, 154, 87",x.DEFAULT_FUNC_ENTRY_BACKGROUND_COLOR="109, 19, 132",x.DEFAULT_BOX_HEIGHT=16,x.DEFAULT_BOX_RADIUS=2;class S{constructor(e,...t){"string"==typeof e?this.initializeFromString(e):"number"==typeof e&&2<=t.length&&(t.unshift(e),this.initializeFromComponentValues(t))}initializeFromString(e){var t;e.startsWith("#")?(this.R=Number.parseInt(e.substr(1,2),16),this.G=Number.parseInt(e.substr(3,2),16),this.B=Number.parseInt(e.substr(5,2),16),this.A=1,9<=e.length&&(this.A=Number.parseInt(e.substr(7,2),16))):e.startsWith("rgb")&&(t=e.startsWith("rgba"),e=(e=e.replace(/[rgba()]/g,"")).split(","),this.R=Number.parseInt(e[0]),this.G=Number.parseInt(e[1]),this.B=Number.parseInt(e[2]),this.A=1,t&&(this.A=Number.parseFloat(e[3])))}initializeFromComponentValues(e){this.R=e[0],this.G=e[1],this.B=e[2],this.A=1,3<e.length&&(this.A=e[3])}applyGamma(){this.R=Math.floor(255*Math.min(1,Math.max(0,Math.pow(this.R/255,1/2.2)))),this.G=Math.floor(255*Math.min(1,Math.max(0,Math.pow(this.G/255,1/2.2)))),this.B=Math.floor(255*Math.min(1,Math.max(0,Math.pow(this.B/255,1/2.2))))}darken(e){this.R=this.R*(e=1-e),this.G=this.G*e,this.B=this.B*e}toRGBString(){let e=[this.R,this.G,this.B];return"rgb("+e.join(",")+")"}toRGBAString(){let e=[this.R,this.G,this.B,this.A];return"rgba("+e.join(",")+")"}toHexString(){return("0"+this.R.toString(16)).slice(-2)+("0"+this.G.toString(16)).slice(-2)+("0"+this.B.toString(16)).slice(-2)}toHexWithAlphaString(){return("0"+this.R.toString(16)).slice(-2)+("0"+this.G.toString(16)).slice(-2)+("0"+this.B.toString(16)).slice(-2)+("0"+this.A.toString(16)).slice(-2)}}(t=g=g||{}).delegate="delegate",t.exec="exec",t.object="object",t.int="int",t.int64="int64",t.string="string",t.text="text",t.float="float",t.struct="struct",t.class="class",t.bool="bool",t.name="name",t.wildcard="wildcard",t.byte="byte",(t=f=f||{}).None="None",t.Array="Array",t.Set="Set",t.Map="Map";class w{constructor(e,t,i){this.position=new c(e||0,t||0),this.zIndex=i||0}get position(){return this._position}set position(e){this._position=e}initControl(e){this.app=e,this.initialize()}initialize(){}get size(){return new c(this.width,this.height)}get ZIndex(){return this.zIndex}set ZIndex(e){this.zIndex=e}}class b extends w{constructor(e,t,i){super(e,t,i),this.padding={top:0,right:0,bottom:0,left:0},this.controlSize=new c(0,0),this.visible=!0}get parent(){return this.controlParent}set parent(e){this.controlParent=e}draw(e){this.visible&&(e.save(),e.translate(Math.round(this.position.x),Math.round(this.position.y)),this.onDraw(e),e.restore())}refreshLayout(){this.controlSize=this.getCalculatedSize(),this.setDirty(!0),this.controlParent&&this.controlParent.refreshLayout()}getCalculatedSize(){let e=this.size;return e.x+=this.padding.left+this.padding.right,e.y+=this.padding.top+this.padding.bottom,e}get size(){let e=this.controlSize.copy();return e.x=Math.max(e.x,this.desiredWidth||0),e.y=Math.max(e.y,this.desiredHeight||0),e.x=Math.max(e.x,this.minWidth||0),e.y=Math.max(e.y,this.minHeight||0),e.x=this.width||e.x,e.y=this.height||e.y,e}setDirty(e){this.dirty=e}isDirty(){return this.dirty}getAbsolutPosition(){let e=new c(0,0);return void 0!==this.controlParent&&(e=this.controlParent.getAbsolutPosition(),e.y+=this.controlParent.padding.top,e.x+=this.controlParent.padding.left),e.x+=this.position.x,e.y+=this.position.y,e}findParent(e){if(void 0!==this.controlParent)return this.controlParent instanceof e?this.controlParent:this.controlParent.findParent(e)}}(t=E=E||{}).VECTOR="/Script/CoreUObject.Vector",t.ROTATOR="/Script/CoreUObject.Rotator",t.LatentActionInfo="/Script/Engine.LatentActionInfo",t.LINEAR_COLOR="/Script/CoreUObject.LinearColor",t.VECTOR2D="/Script/CoreUObject.Vector2D",t.TRANSFORM="/Script/CoreUObject.Transform";class I{static getPinColor(e){return this.getPinColorByCategory(e.category,e.subCategoryObject.class)}static getPinColorByCategory(e,t){switch(e){case g.delegate:return"rgb(255, 56, 56)";case g.bool:return"rgb(146, 1, 1)";case g.float:return"rgb(158, 250, 68)";case g.int:return"rgb(30, 226, 174)";case g.int64:return"rgb(171, 226, 174)";case g.byte:return"rgb(0, 101, 92)";case g.struct:return{[E.VECTOR]:"rgb(253, 200, 35)",[E.ROTATOR]:"rgb(159, 178, 253)",[E.TRANSFORM]:"rgb(230, 105, 2)"}[t]||"rgb(0, 88, 200)";case g.name:return"rgb(150, 97, 185)";case g.string:return"rgb(254, 0, 212)";case g.object:return"rgb(0, 133, 191)";case g.class:return"rgb(88, 0, 187)";case g.wildcard:return"rgb(128, 121, 121)";case g.text:return"rgb(230, 123, 169)";case g.byte:return"rgb(0, 110, 100)";default:return"rgb(230, 230, 230)"}}}class D{}D.PIN_ARRAY_CONNECTED="M9.482,10.473l-2.964,-0l0,3.024l2.964,0l-0,-3.024Zm-3.969,-0l-2.963,-0l-0,3.024l2.963,0l0,-3.024Zm7.937,-0l-2.963,-0l-0,3.024l2.963,0l0,-3.024Zm-3.968,-4.027l-2.964,0l0,3.025l2.964,-0l-0,-3.025Zm-3.969,0l-2.963,0l-0,3.025l2.963,-0l0,-3.025Zm7.937,0l-2.963,0l-0,3.025l2.963,-0l0,-3.025Zm-7.937,-4.026l-2.963,-0l-0,3.024l2.963,0l0,-3.024Zm3.969,-0l-2.964,-0l0,3.024l2.964,0l-0,-3.024Zm3.968,-0l-2.963,-0l-0,3.024l2.963,0l0,-3.024Z",D.PIN_ARRAY_DISCONNECTED="M9.482,10.473l-2.964,-0l0,3.024l2.964,0l-0,-3.024Zm-3.969,-0l-2.963,-0l-0,3.024l2.963,0l0,-3.024Zm7.937,-0l-2.963,-0l-0,3.024l2.963,0l0,-3.024Zm-7.937,-4.027l-2.963,0l-0,3.025l2.963,-0l0,-3.025Zm7.937,0l-2.963,0l-0,3.025l2.963,-0l0,-3.025Zm-7.937,-4.026l-2.963,-0l-0,3.024l2.963,0l0,-3.024Zm3.969,-0l-2.964,-0l0,3.024l2.964,0l-0,-3.024Zm3.968,-0l-2.963,-0l-0,3.024l2.963,0l0,-3.024Z",D.PIN_SET="M6.966,1.985l-0,2.034l-1.053,-0c-0.494,-0 -0.894,0.4 -0.894,0.894l-0,0.07l-0.013,-0c-0,1.187 -0.516,2.255 -1.336,2.992c0.82,0.736 1.336,1.804 1.336,2.992l-0.002,0.05l0.015,0l-0,0.07c-0,0.494 0.4,0.894 0.894,0.894l1.053,0l-0,1.999l-1.469,-0c-1.382,-0 -2.504,-1.122 -2.504,-2.503l0,-0.46c0,-1.11 -0.901,-2.011 -2.011,-2.011l0,-2.012c1.11,-0 2.011,-0.901 2.011,-2.011l0,-0.495c0,-1.381 1.122,-2.503 2.504,-2.503l1.469,0Zm2.002,0l1.535,0c1.382,0 2.504,1.122 2.504,2.503l-0,0.495c-0,1.11 0.901,2.011 2.011,2.011l-0,2.012c-1.11,0 -2.011,0.901 -2.011,2.011l-0,0.46c-0,1.381 -1.122,2.503 -2.504,2.503l-1.535,-0l0,-1.999l1.119,0c0.494,0 0.894,-0.4 0.894,-0.894l0,-0.07l0.013,0c0,-1.194 0.522,-2.268 1.351,-3.005c-0.829,-0.737 -1.351,-1.811 -1.351,-3.006l0.001,-0.023l-0.014,-0l0,-0.07c0,-0.494 -0.4,-0.894 -0.894,-0.894l-1.119,-0l0,-2.034Z",D.PIN_MAP_KEY="M5.513,10.473l-2.963,-0l-0,3.024l2.963,0l0,-3.024Zm0,-4.027l-2.963,0l-0,3.025l2.963,-0l0,-3.025Zm0,-4.026l-2.963,-0l-0,3.024l2.963,0l0,-3.024Z",D.PIN_MAP_VALUE="M13.45,10.473l-6.932,-0l0,3.024l6.932,0l0,-3.024Zm0,-4.027l-6.932,0l0,3.025l6.932,-0l0,-3.025Zm0,-4.026l-6.932,-0l0,3.024l6.932,0l0,-3.024Z",D.PIN_REFERENCE_CONNECTED="M13.45,8.001l-5.45,-5.451l-5.45,5.451l5.45,5.45l5.45,-5.45Z",D.PIN_REFERENCE_DISCONNECTED="M13.45,8.001l-5.45,-5.451l-5.45,5.451l5.45,5.45l5.45,-5.45Zm-2.596,-0l-2.854,-2.855l-2.854,2.855l2.854,2.854l2.854,-2.854Z",D.DEFAULT_VALUE_BOOL_TRUE="M6.42,8.655l-1.177,-1.177c-0.382,-0.382 -1.002,-0.382 -1.383,-0c-0.382,0.381 -0.382,1.001 -0,1.383l1.853,1.853c0.195,0.194 0.451,0.29 0.707,0.285c0.256,0.005 0.513,-0.091 0.707,-0.285l5.013,-5.013c0.382,-0.382 0.382,-1.002 0,-1.383c-0.381,-0.382 -1.001,-0.382 -1.383,-0l-4.337,4.337Z",D.FUNCTION="M12.962,3.932c0.88,-1.811 -0.139,-2.954 -1.879,-2.949c-3.498,0.01 -3.564,2.488 -4.093,5.112l-1.868,-0.077l-0.287,1.435l1.907,0.114l-0.837,5.243c0,-0 -0.292,1.924 -1.164,1.805c-0.978,-0.133 -0.602,-1.396 -0.602,-1.396l-1.174,-0.429c-0.553,1.226 -0.293,3.209 1.87,3.21c3.352,0.001 3.163,-1.918 4.352,-8.227l1.697,0.093l0.435,-1.485l-1.849,-0.089c0.501,-2.285 0.48,-4.128 1.849,-3.868c0.618,0.118 0.249,1.508 0.249,1.508l1.394,-0Z",D.MAKE_STRUCT="M1.121,16l-1.121,-1.121l2.332,-2.332l-1.778,-0l-0,-1.586l4.485,-0l0,4.485l-1.586,0l0,-1.778l-2.332,2.332Zm12.316,-9.213c0,-0.606 -0.492,-1.098 -1.097,-1.098l-7.824,0c-0.606,0 -1.098,0.492 -1.098,1.098l-0,2.196c-0,0.606 0.492,1.098 1.098,1.098l7.824,-0c0.605,-0 1.097,-0.492 1.097,-1.098l0,-2.196Zm-13.437,-5.666l1.121,-1.121l2.332,2.332l0,-1.778l1.586,-0l0,4.485l-4.485,0l-0,-1.586l1.778,0l-2.332,-2.332Z",D.BREAK_STRUCT="M11.011,12.082l1.122,-1.121l2.332,2.332l-0,-1.778l1.585,-0l0,4.485l-4.485,-0l0,-1.586l1.778,0l-2.332,-2.332Zm2.426,-5.237c0,-0.606 -0.492,-1.098 -1.097,-1.098l-7.824,-0c-0.606,-0 -1.098,0.492 -1.098,1.098l-0,2.195c-0,0.606 0.492,1.098 1.098,1.098l7.824,0c0.605,0 1.097,-0.492 1.097,-1.098l0,-2.195Zm-1.358,-1.803l-1.121,-1.121l2.332,-2.332l-1.779,0l0,-1.586l4.486,0l-0,4.486l-1.586,-0l-0,-1.779l-2.332,2.332Z",D.EVENT="M15.475,9.212c0.669,-0.669 0.669,-1.755 -0,-2.424l-6.263,-6.263c-0.669,-0.669 -1.755,-0.669 -2.424,0l-6.263,6.263c-0.669,0.669 -0.669,1.755 0,2.424l6.263,6.263c0.669,0.669 1.755,0.669 2.424,-0l6.263,-6.263Zm-11.195,1.194c-0.116,-0 -0.227,-0.046 -0.309,-0.128c-0.082,-0.082 -0.128,-0.193 -0.128,-0.309c0,-0.923 0,-3.057 0,-3.947c0,-0.106 0.042,-0.207 0.117,-0.282c0.075,-0.075 0.177,-0.118 0.283,-0.118c0.95,0 3.261,0 3.261,0l0,-3.552c0,-0.151 0.09,-0.287 0.228,-0.348c0.138,-0.06 0.298,-0.033 0.409,0.069c1.527,1.411 5.35,4.945 6.44,5.951c0.076,0.071 0.119,0.169 0.119,0.272c-0,0.103 -0.043,0.202 -0.119,0.272c-1.081,0.999 -4.856,4.487 -6.405,5.919c-0.117,0.108 -0.286,0.136 -0.432,0.073c-0.146,-0.064 -0.24,-0.208 -0.24,-0.367c0,-1.294 0,-3.505 0,-3.505l-3.224,-0Z",D.CUSTOM_EVENT="M15.475,9.212c0.669,-0.669 0.669,-1.755 -0,-2.424l-6.263,-6.263c-0.669,-0.669 -1.755,-0.669 -2.424,0l-6.263,6.263c-0.669,0.669 -0.669,1.755 0,2.424l6.263,6.263c0.669,0.669 1.755,0.669 2.424,-0l6.263,-6.263Zm-11.195,1.194c-0.116,-0 -0.227,-0.046 -0.309,-0.128c-0.082,-0.082 -0.128,-0.193 -0.128,-0.309c0,-0.923 0,-3.057 0,-3.947c0,-0.106 0.042,-0.207 0.117,-0.282c0.075,-0.075 0.177,-0.118 0.283,-0.118c0.95,0 3.261,0 3.261,0l0,-3.552c0,-0.151 0.09,-0.287 0.228,-0.348c0.138,-0.06 0.298,-0.033 0.409,0.069c1.527,1.411 5.35,4.945 6.44,5.951c0.076,0.071 0.119,0.169 0.119,0.272c-0,0.103 -0.043,0.202 -0.119,0.272c-1.081,0.999 -4.856,4.487 -6.405,5.919c-0.117,0.108 -0.286,0.136 -0.432,0.073c-0.146,-0.064 -0.24,-0.208 -0.24,-0.367c0,-1.294 0,-3.505 0,-3.505l-3.224,-0Zm6.96,-4.087c-0.446,-0.446 -1.051,-0.697 -1.682,-0.697c-1.313,0 -2.378,1.066 -2.378,2.379c-0,1.313 1.065,2.378 2.378,2.378c0.631,0 1.236,-0.25 1.682,-0.696l-0.841,-0.841c-0.223,0.223 -0.526,0.348 -0.841,0.348c-0.656,0 -1.189,-0.533 -1.189,-1.189c-0,-0.656 0.533,-1.189 1.189,-1.189c0.315,-0 0.618,0.125 0.841,0.348l0.841,-0.841Z",D.BRANCH="M10.996,1.917l0,-1.917l3.956,2.482l-3.956,2.482l0,-1.818l-1.257,0l-0.125,0.002c-2.623,0.066 -4.729,2.213 -4.729,4.852c0,2.681 2.173,4.854 4.854,4.854l1.257,-0l0,-1.818l3.956,2.482l-3.956,2.482l0,-1.917l-1.257,0c-3.022,0 -5.529,-2.202 -6.002,-5.089l-2.755,-0l0,-1.988l2.755,0c0.473,-2.887 2.98,-5.089 6.002,-5.089l1.257,-0Z",D.SEQUENCE="M4.975,11.974l-0,-3.015l3.025,-0l0,-1.988l-3.025,-0l-0,-3.015l3.025,-0l0,-1.989l-5.014,0l0,5.039l-3.025,-0l0,1.988l3.025,0l0,4.968l5.014,0l-0,-1.988l-3.025,-0Zm4.36,-0l-0,1.988l2.018,0l-0,-1.988l-2.018,-0Zm-0,-5.003l-0,1.988l4.036,-0l-0,-1.988l-4.036,-0Zm-0,-5.004l-0,1.989l5.617,-0l-0,-1.989l-5.617,0Z",D.LOOP="M5.952,2.997l0,-2.041l4.857,3.472l-4.857,3.473l0,-2.428c-1.902,0.046 -3.433,1.606 -3.433,3.52c0,1.944 1.579,3.522 3.522,3.522l3.918,-0c1.943,-0 3.522,-1.578 3.522,-3.522c-0,-1.651 -1.138,-3.037 -2.672,-3.418l0,-2.524c2.929,0.393 5.191,2.905 5.191,5.942c0,3.31 -2.687,5.997 -5.997,5.997l-4.006,0c-3.31,0 -5.997,-2.687 -5.997,-5.997c0,-3.295 2.663,-5.973 5.952,-5.996Z",D.GATE="M0.982,2.984l0,10.004l13.97,-0l-0,-10.004l-13.97,0Zm11.496,8.493l-4.538,-2.756l-5.424,-0l-0,2.756l9.962,-0Zm-2.065,-2.756l3.005,1.824l0,-1.824l-3.005,-0Zm-7.897,-1.502l2.951,-0l-2.951,-1.792l-0,1.792Zm0.939,-2.724l4.485,2.724l5.478,-0l0,-2.724l-9.963,0Z",D.FLIPFLOP="M10.251,14.01l4.701,-10.034l-0,-2.993l-4.701,10.034l-3.977,-10.034l-5.292,10.034l0,2.993l5.292,-10.034l3.977,10.034Z",D.DO_N="M0.982,10.143l0,-2.242l10.492,0l-0.903,-0.902l1.179,-1.179l3.202,3.202l-3.202,3.202l-1.179,-1.178l0.903,-0.903l-10.492,-0Zm6.017,-7.805l1.981,2.627l1.023,-0l-0,-3.982l-1.023,-0l0,2.627l-1.981,-2.627l-1.022,-0l-0,3.982l1.022,-0l-0,-2.627Z",D.DO_ONCE="M0.982,10.143l0,-2.242l10.492,0l-0.903,-0.902l1.179,-1.179l3.202,3.202l-3.202,3.202l-1.179,-1.178l0.903,-0.903l-10.492,-0Zm6.045,-9.16l0.973,-0l0,4.005l0.988,0l0,1.002l-2.983,-0l0,-1.002l1.002,0l-0,-2.002l-1.002,-0l0,-0.981c0.564,-0 1.022,-0.458 1.022,-1.022Z",D.SWITCH="M4.975,11.974l-0,-3.015l3.025,-0l0,-1.988l-3.025,-0l-0,-3.015l3.025,-0l0,-1.989l-5.014,0l0,5.039l-3.025,-0l0,1.988l3.025,0l0,4.968l5.014,0l-0,-1.988l-3.025,-0Zm4.983,-7.935l0,-2.094l2.817,-0l-0.875,-0.875l1.069,-1.07l2.992,2.992l-2.992,2.991l-1.069,-1.069l0.875,-0.875l-2.817,-0Z",D.CAST="M5.22,9.035l-3.249,2.233l0,-5.509l3.261,2.241l4.768,0l-0,-3.001l4.952,3.515l-4.952,3.515l-0,-2.994l-4.78,0Z",D.SELECT="M8,6.971l0,-5.004l-6.005,0l0,1.989l4.017,-0l-0,3.015l-4.017,-0l0,1.988l4.017,-0l-0,3.015l-4.017,-0l0,1.988l4.017,0l-0,0.035l1.988,0l0,-5.038l1.017,-0l-0,-1.988l-1.017,-0Zm3.966,2.074l-1.956,-0l0,-2.09l1.956,0l0,-1.941l1.048,0l2.986,2.986l-2.986,2.986l-1.048,-0l0,-1.941Z",D.INPUT_KEY="M9.263,12.728c-0,-0.247 -0.201,-0.447 -0.447,-0.447l-2.566,-0c-0.247,-0 -0.447,0.2 -0.447,0.447l0,2.619c0,0.247 0.2,0.447 0.447,0.447l2.566,0c0.246,0 0.447,-0.2 0.447,-0.447l-0,-2.619Zm3.923,-0c-0,-0.247 -0.2,-0.447 -0.447,-0.447l-2.566,-0c-0.246,-0 -0.447,0.2 -0.447,0.447l0,2.619c0,0.247 0.201,0.447 0.447,0.447l2.566,0c0.247,0 0.447,-0.2 0.447,-0.447l-0,-2.619Zm-5.429,-4.005c-0,-0.247 -0.201,-0.447 -0.447,-0.447l-2.566,-0c-0.246,-0 -0.447,0.2 -0.447,0.447l0,2.619c0,0.247 0.201,0.447 0.447,0.447l2.566,-0c0.246,-0 0.447,-0.2 0.447,-0.447l-0,-2.619Zm7.892,-0c-0,-0.247 -0.201,-0.447 -0.448,-0.447l-2.565,-0c-0.247,-0 -0.447,0.2 -0.447,0.447l0,2.619c0,0.247 0.2,0.447 0.447,0.447l2.565,-0c0.247,-0 0.448,-0.2 0.448,-0.447l-0,-2.619Zm-11.838,-0c-0,-0.247 -0.2,-0.447 -0.447,-0.447l-2.565,-0c-0.247,-0 -0.448,0.2 -0.448,0.447l0,2.619c0,0.247 0.201,0.447 0.448,0.447l2.565,-0c0.247,-0 0.447,-0.2 0.447,-0.447l-0,-2.619Zm7.892,-0c-0,-0.247 -0.201,-0.447 -0.447,-0.447l-2.566,-0c-0.246,-0 -0.447,0.2 -0.447,0.447l0,2.619c0,0.247 0.201,0.447 0.447,0.447l2.566,-0c0.246,-0 0.447,-0.2 0.447,-0.447l-0,-2.619Zm-4.918,-4.005c0,-0.247 -0.2,-0.448 -0.447,-0.448l-2.565,0c-0.247,0 -0.447,0.201 -0.447,0.448l-0,2.619c-0,0.246 0.2,0.447 0.447,0.447l2.565,-0c0.247,-0 0.447,-0.201 0.447,-0.447l0,-2.619Zm3.938,-0c0,-0.247 -0.2,-0.448 -0.447,-0.448l-2.565,0c-0.247,0 -0.447,0.201 -0.447,0.448l-0,2.619c-0,0.246 0.2,0.447 0.447,0.447l2.565,-0c0.247,-0 0.447,-0.201 0.447,-0.447l0,-2.619Zm-2.966,-4.065c-0,-0.247 -0.201,-0.447 -0.447,-0.447l-2.566,-0c-0.246,-0 -0.447,0.2 -0.447,0.447l0,2.619c0,0.247 0.201,0.447 0.447,0.447l2.566,0c0.246,0 0.447,-0.2 0.447,-0.447l-0,-2.619Zm-3.946,0c-0,-0.247 -0.2,-0.447 -0.447,-0.447l-2.565,-0c-0.247,-0 -0.448,0.2 -0.448,0.447l0,2.619c0,0.247 0.201,0.447 0.448,0.447l2.565,0c0.247,0 0.447,-0.2 0.447,-0.447l-0,-2.619Zm7.892,0c-0,-0.247 -0.201,-0.447 -0.447,-0.447l-2.566,-0c-0.246,-0 -0.447,0.2 -0.447,0.447l0,2.619c0,0.247 0.201,0.447 0.447,0.447l2.566,0c0.246,0 0.447,-0.2 0.447,-0.447l-0,-2.619Z",D.INPUT_GAMEPAD="M10.506,5.016l0,-0.246c0,-0.135 0.111,-0.245 0.246,-0.245l1.507,-0c0.136,-0 0.246,0.11 0.246,0.245l-0,0.701c0.632,0.356 1.144,0.99 1.498,1.729c0.619,1.289 1.706,5.78 -0.433,5.81c-1.305,0.018 -1.934,-1.533 -3.13,-3.351l-4.88,-0c-1.196,1.818 -1.825,3.369 -3.13,3.351c-2.139,-0.03 -1.052,-4.521 -0.433,-5.81c0.354,-0.739 0.866,-1.373 1.498,-1.729l0,-0.701c0,-0.135 0.11,-0.245 0.246,-0.245l1.507,-0c0.135,-0 0.246,0.11 0.246,0.245l-0,0.246l5.012,-0Zm0.788,2.477c-0.251,0 -0.439,0.198 -0.42,0.442c0.019,0.244 0.238,0.442 0.489,0.442c0.251,0 0.439,-0.198 0.42,-0.442c-0.019,-0.244 -0.238,-0.442 -0.489,-0.442Zm-6.834,0c0.251,0 0.439,0.198 0.42,0.442c-0.019,0.244 -0.238,0.442 -0.489,0.442c-0.251,0 -0.439,-0.198 -0.42,-0.442c0.019,-0.244 0.238,-0.442 0.489,-0.442Zm7.555,-0.735c-0.251,0 -0.44,0.198 -0.421,0.442c0.019,0.244 0.238,0.442 0.489,0.442c0.251,0 0.44,-0.198 0.421,-0.442c-0.019,-0.244 -0.238,-0.442 -0.489,-0.442Zm-1.633,0c-0.251,0 -0.439,0.198 -0.42,0.442c0.019,0.244 0.238,0.442 0.489,0.442c0.251,0 0.439,-0.198 0.42,-0.442c-0.019,-0.244 -0.238,-0.442 -0.489,-0.442Zm-6.643,0c0.251,0 0.439,0.198 0.42,0.442c-0.019,0.244 -0.238,0.442 -0.489,0.442c-0.251,0 -0.439,-0.198 -0.42,-0.442c0.019,-0.244 0.238,-0.442 0.489,-0.442Zm1.633,0c0.25,0 0.439,0.198 0.42,0.442c-0.019,0.244 -0.238,0.442 -0.489,0.442c-0.251,0 -0.439,-0.198 -0.42,-0.442c0.019,-0.244 0.238,-0.442 0.489,-0.442Zm5.731,-0.71c-0.251,0 -0.439,0.198 -0.42,0.442c0.019,0.244 0.238,0.442 0.489,0.442c0.25,0 0.439,-0.198 0.42,-0.442c-0.019,-0.244 -0.238,-0.442 -0.489,-0.442Zm-6.452,0c0.251,0 0.439,0.198 0.42,0.442c-0.019,0.244 -0.238,0.442 -0.489,0.442c-0.251,0 -0.439,-0.198 -0.42,-0.442c0.019,-0.244 0.238,-0.442 0.489,-0.442Z",D.INPUT_TOUCH="M7.717,11.585c-0,-0.332 -0.27,-0.601 -0.601,-0.601l-5.533,-0c-0.332,-0 -0.601,0.269 -0.601,0.601l0,2.804c0,0.332 0.269,0.601 0.601,0.601l5.533,0c0.331,0 0.601,-0.269 0.601,-0.601l-0,-2.804Zm7.301,-0c-0,-0.332 -0.269,-0.601 -0.601,-0.601l-5.533,-0c-0.331,-0 -0.601,0.269 -0.601,0.601l0,2.804c0,0.332 0.27,0.601 0.601,0.601l5.533,0c0.332,0 0.601,-0.269 0.601,-0.601l-0,-2.804Zm-0,-10.128c-0,-0.262 -0.212,-0.474 -0.474,-0.474l-13.088,-0c-0.262,-0 -0.474,0.212 -0.474,0.474l0,8.531c0,0.262 0.212,0.474 0.474,0.474l13.088,0c0.262,0 0.474,-0.212 0.474,-0.474l-0,-8.531Zm-7.018,0.527c2.063,0 3.738,1.675 3.738,3.738c0,2.064 -1.675,3.739 -3.738,3.739c-2.063,-0 -3.738,-1.675 -3.738,-3.739c-0,-2.063 1.675,-3.738 3.738,-3.738Zm0,0.603c1.73,-0 3.135,1.405 3.135,3.135c0,1.731 -1.405,3.136 -3.135,3.136c-1.73,-0 -3.135,-1.405 -3.135,-3.136c-0,-1.73 1.405,-3.135 3.135,-3.135Z",D.MOUSE="M2.706,6.758c1.309,-0.436 3.204,-0.718 5.294,-0.718c1.872,-0 3.587,0.227 4.865,0.587c0.006,0.446 0.006,0.905 0.006,1.373c-0,4.415 -2.719,8 -4.881,8c-2.162,0 -5.299,-3.585 -5.299,-8c0,-0.423 0.004,-0.838 0.015,-1.242Zm5.02,-6.755l0,1.879c-0.49,0.309 -0.854,1.062 -0.854,1.93c-0,0.669 0.216,1.268 0.538,1.65c-1.863,0.052 -3.52,0.347 -4.685,0.791c0.16,-3.503 1.016,-6.148 5.001,-6.25Zm0.527,0.001c3.916,0.117 4.511,2.677 4.602,6.102c-1.133,-0.363 -2.629,-0.6 -4.285,-0.645c0.322,-0.381 0.537,-0.981 0.537,-1.649c0,-0.868 -0.364,-1.621 -0.854,-1.93l-0,-1.878Zm-0.511,2.184l0.495,0c0.195,0.43 0.33,1.005 0.33,1.624c0,0.628 -0.139,1.212 -0.339,1.643c-0.076,-0.001 -0.152,-0.001 -0.228,-0.001c-0.083,-0 -0.166,0 -0.249,0.001c-0.2,-0.431 -0.339,-1.015 -0.339,-1.643c-0,-0.619 0.135,-1.194 0.33,-1.624Z",D.PILL="M15.018,8.973c-0,-1.637 -1.329,-2.966 -2.966,-2.966l-8.104,-0c-1.637,-0 -2.966,1.329 -2.966,2.966c0,1.637 1.329,2.966 2.966,2.966l8.104,0c1.637,0 2.966,-1.329 2.966,-2.966Z",D.CONSTRUCT="M14.496,5.478c-0.086,0.02 -0.176,0.03 -0.268,0.03l-12.456,-0c-0.092,-0 -0.182,-0.01 -0.268,-0.03l-0,7.663c-0,0.463 0.376,0.839 0.839,0.839l11.314,-0c0.463,-0 0.839,-0.376 0.839,-0.839l0,-7.663Zm0.522,-3.484c-0,-0.558 -0.453,-1.011 -1.012,-1.011l-12.012,-0c-0.559,-0 -1.012,0.453 -1.012,1.011l0,2.024c0,0.558 0.453,1.011 1.012,1.011l12.012,0c0.559,0 1.012,-0.453 1.012,-1.011l-0,-2.024Z",D.TIMER="M8,0.983c3.873,-0 7.018,3.138 7.018,7.004c-0,3.865 -3.145,7.003 -7.018,7.003c-3.873,0 -7.018,-3.138 -7.018,-7.003c0,-3.866 3.145,-7.004 7.018,-7.004Zm0,1.532c3.026,0 5.483,2.452 5.483,5.472c-0,3.019 -2.457,5.471 -5.483,5.471c-3.026,0 -5.483,-2.452 -5.483,-5.471c0,-3.02 2.457,-5.472 5.483,-5.472Zm-0.768,5.099l-0.001,0.012l0,0.748c0,0.206 0.168,0.374 0.374,0.374l4.464,0c0.206,0 0.374,-0.168 0.374,-0.374l-0,-0.748c-0,-0.206 -0.168,-0.374 -0.374,-0.374l-3.3,-0l-0,-2.693c-0,-0.212 -0.173,-0.384 -0.385,-0.384l-0.768,-0c-0.212,-0 -0.385,0.172 -0.385,0.384l0,3.043l0.001,0.012Z",D.MAKE_ARRAY="M0.893,16l-0.893,-0.893l1.857,-1.856l-1.416,-0l-0,-1.263l3.571,0l-0,3.571l-1.263,0l0,-1.416l-1.856,1.857Zm11.086,-5.497l-3.003,0l-0,3.012l3.003,-0l-0,-3.012Zm-4.022,0l-3.003,0l0,3.012l3.003,-0l0,-3.012Zm8.043,0l-3.003,0l-0,3.012l3.003,-0l0,-3.012Zm-4.021,-4.009l-3.003,0l-0,3.012l3.003,-0l-0,-3.012Zm-4.022,0l-3.003,0l0,3.012l3.003,-0l0,-3.012Zm8.043,0l-3.003,0l-0,3.012l3.003,-0l-0,-3.012Zm-8.043,-4.009l-3.003,0l0,3.012l3.003,-0l0,-3.012Zm4.022,0l-3.003,0l-0,3.012l3.003,-0l-0,-3.012Zm4.021,0l-3.003,0l-0,3.012l3.003,-0l-0,-3.012Zm-16,-1.599l0.886,-0.886l1.843,1.843l0,-1.405l1.254,-0l-0,3.545l-3.545,-0l-0,-1.254l1.405,0l-1.843,-1.843Z",D.SPAWN_ACTOR="M7.612,0.994c-0.329,0.393 -0.306,0.98 0.064,1.35l1.26,1.259l-1.686,0c-0.561,0 -1.016,0.456 -1.016,1.017c-0,0.561 0.455,1.017 1.016,1.017l1.684,-0l-1.258,1.258c-0.395,0.395 -0.395,1.035 -0,1.43c0.394,0.394 1.035,0.394 1.429,-0l1.259,-1.259l-0,1.777c-0,0.561 0.455,1.016 1.017,1.016c0.561,0 1.016,-0.455 1.016,-1.016l0,-1.778l1.26,1.26c0.37,0.369 0.955,0.392 1.349,0.065c-0.209,3.678 -3.268,6.6 -7.006,6.6c-3.873,0 -7.018,-3.138 -7.018,-7.003c0,-3.736 2.937,-6.793 6.63,-6.993Zm3.292,7.771c0,0.263 0.214,0.476 0.477,0.476c0.262,0 0.476,-0.213 0.476,-0.476l-0,-2.034c-0,-0.262 -0.214,-0.476 -0.476,-0.476c-0.263,0 -0.477,0.214 -0.477,0.476l0,2.034Zm3.071,-0.877c0.185,0.185 0.487,0.185 0.673,-0c0.186,-0.186 0.186,-0.488 -0,-0.674l-1.438,-1.438c-0.186,-0.186 -0.488,-0.186 -0.673,0c-0.186,0.186 -0.186,0.488 -0,0.674l1.438,1.438Zm-3.751,-1.438c0.186,-0.186 0.186,-0.488 0,-0.674c-0.185,-0.186 -0.487,-0.186 -0.673,0l-1.438,1.438c-0.186,0.186 -0.186,0.488 0,0.674c0.186,0.185 0.488,0.185 0.674,-0l1.437,-1.438Zm4.387,-0.813c0.125,0.346 0.222,0.705 0.289,1.074l-1.075,-1.074l0.786,-0Zm-3.23,-2.034c0.561,0 1.016,0.456 1.016,1.017c0,0.561 -0.455,1.017 -1.016,1.017c-0.562,-0 -1.017,-0.456 -1.017,-1.017c-0,-0.561 0.455,-1.017 1.017,-1.017Zm4.144,1.493c0.263,0 0.476,-0.213 0.476,-0.476c0,-0.263 -0.213,-0.476 -0.476,-0.476l-2.033,0c-0.263,0 -0.476,0.213 -0.476,0.476c-0,0.263 0.213,0.476 0.476,0.476l2.033,0Zm-6.256,0c0.263,0 0.477,-0.213 0.477,-0.476c-0,-0.263 -0.214,-0.476 -0.477,-0.476l-2.033,0c-0.263,0 -0.476,0.213 -0.476,0.476c-0,0.263 0.213,0.476 0.476,0.476l2.033,0Zm0.282,-1.632c0.186,0.186 0.488,0.186 0.673,0c0.186,-0.186 0.186,-0.488 0,-0.673l-1.437,-1.438c-0.186,-0.186 -0.488,-0.186 -0.674,-0c-0.186,0.186 -0.186,0.487 0,0.673l1.438,1.438Zm5.097,-1.438c0.186,-0.186 0.186,-0.487 -0,-0.673c-0.186,-0.186 -0.488,-0.186 -0.673,-0l-1.438,1.438c-0.186,0.185 -0.186,0.487 -0,0.673c0.185,0.186 0.487,0.186 0.673,0l1.438,-1.438Zm-3.744,0.483c0,0.263 0.214,0.476 0.477,0.476c0.262,0 0.476,-0.213 0.476,-0.476l-0,-2.033c-0,-0.263 -0.214,-0.477 -0.476,-0.477c-0.263,0 -0.477,0.214 -0.477,0.477l0,2.033Zm-1.612,-1.406c0.368,0.069 0.726,0.166 1.072,0.289l-0,0.783l-1.072,-1.072Z",D.IS_VALID="M8.968,11.978l-1.982,0l-0,1.982l1.982,0l-0,-1.982Zm-0.968,-4.015l-1.014,0l-0,3.012l1.982,-0l-0,-1.136c1.739,-0.432 3.028,-2.004 3.028,-3.877c0,-2.206 -1.79,-3.996 -3.996,-3.996c-2.207,-0 -3.996,1.789 -3.996,3.996l1.998,-0c-0,-1.104 0.894,-1.998 1.998,-1.998c1.103,-0 1.998,0.895 1.998,1.998c0,1.103 -0.894,1.998 -1.998,1.998l0,0.003Z",D.MACRO="M4.632,6.37c-0.24,0.492 -0.374,1.046 -0.374,1.63c-0,2.065 1.677,3.742 3.742,3.742c2.065,0 3.742,-1.677 3.742,-3.742c0,-2.065 -1.677,-3.742 -3.742,-3.742c-0.418,-0 -0.82,0.069 -1.194,0.196l-0.764,-2.266l0.397,-2.034c1.031,-0.205 2.091,-0.205 3.122,-0l0.409,2.099c0.24,0.082 0.473,0.179 0.701,0.29l1.774,-1.195c0.873,0.584 1.623,1.334 2.207,2.207l-1.195,1.774c0.111,0.228 0.208,0.461 0.29,0.701l2.099,0.409c0.205,1.031 0.205,2.091 0,3.122l-2.099,0.409c-0.082,0.24 -0.179,0.473 -0.29,0.701l1.195,1.774c-0.584,0.873 -1.334,1.623 -2.207,2.207l-1.774,-1.195c-0.228,0.111 -0.461,0.208 -0.701,0.29l-0.409,2.099c-1.031,0.205 -2.091,0.205 -3.122,0l-0.409,-2.099c-0.24,-0.082 -0.473,-0.179 -0.701,-0.29l-1.774,1.195c-0.873,-0.584 -1.623,-1.334 -2.207,-2.207l1.195,-1.774c-0.111,-0.228 -0.208,-0.461 -0.29,-0.701l-2.099,-0.409c-0.205,-1.031 -0.205,-2.091 -0,-3.122l2.099,-0.409c0.077,-0.226 0.167,-0.446 0.272,-0.66l-0.001,-0.001l0.41,-0.846l-1.428,0.353l-0.433,-1.751l4.358,-1.076l1.853,4.087l-1.643,0.745l-0.607,-1.34l-0.402,0.829Z",D.LATENT="M10.667,1.31c5.164,0 9.357,4.185 9.357,9.339c-0,5.154 -4.193,9.338 -9.357,9.338c-5.165,0 -9.358,-4.184 -9.358,-9.338c0,-5.154 4.193,-9.339 9.358,-9.339Zm0.695,8.661l0,-7.105c0,-0.191 -0.156,-0.347 -0.348,-0.347l-0.695,-0c-0.192,-0 -0.348,0.156 -0.348,0.347l0,7.435l0.001,0.009l-0.001,0.009l0,0.695c0,0.192 0.156,0.348 0.348,0.348l5.924,0c0.191,0 0.347,-0.156 0.347,-0.348l0,-0.695c0,-0.192 -0.156,-0.348 -0.347,-0.348l-4.881,0Z";class R extends b{constructor(e,t){super(0,0),this.connections=[],this._pinProperty=t,this.hidden=!1,this._isInput=this._pinProperty.direction!==l.EGPD_Output,this._color=I.getPinColor(this._pinProperty),this._pinProperty.valueType&&(this._secondaryColor=I.getPinColorByCategory(this._pinProperty.valueType)),this.height=28,this.width=0,this.visible=!t.hidden,this.category=t.category,this.initPinIcons()}initialize(){this.visible&&(this.pinProperty.hidden||this.pinProperty.hideName?this.pinProperty.hidden||(this.width=2*R.PINS_PADDING_HORIZONTAL):this.width=this.formattedNameWidth(this.pinProperty)+2*R.PINS_PADDING_HORIZONTAL,this.category==g.delegate&&this.pinProperty.direction===l.EGPD_Output&&(this.width=2*R.PINS_PADDING_HORIZONTAL-8,this.height=24)),this.postInit()}initPinIcons(){switch(this._pinProperty.containerType){case f.Array:this.icon=this._pinProperty.isLinked?new Path2D(D.PIN_ARRAY_CONNECTED):new Path2D(D.PIN_ARRAY_DISCONNECTED);break;case f.Set:this.icon=new Path2D(D.PIN_SET);break;case f.Map:this.icon=new Path2D(D.PIN_MAP_KEY),this.secondaryIcon=new Path2D(D.PIN_MAP_VALUE);break;default:f.None;this.icon=void 0}void 0===this.icon&&this._pinProperty.isReference&&(this._pinProperty.isLinked?this.icon=new Path2D(D.PIN_REFERENCE_CONNECTED):this.icon=new Path2D(D.PIN_REFERENCE_DISCONNECTED))}get pinProperty(){return this._pinProperty}set parent(e){this.controlParent=e;e=this.findParent(k);e&&(1!=this.pinProperty.advancedView||e.showAdvanced||this.pinProperty.isLinked||(this.visible=!1))}addConnection(e){this.connections.push(e)}postInit(){this.pinProperty.shouldDrawDefaultValueBox&&this._pinProperty.defaultValueControlClass&&(this.defaultValueBox=new this._pinProperty.defaultValueControlClass(this._pinProperty.defaultValue),this.defaultValueBox.initControl(this.app),this.defaultValueBox.position.x=this.formattedNameWidth(this._pinProperty)+R.PINS_PADDING_HORIZONTAL+6,this.width+=this.defaultValueBox.width)}setHidden(e){this.hidden=e}onDraw(e){if(!this.hidden){e.save();var t=this.pinProperty.category;e.fillStyle(this._color).strokeStyle(this._color);var i=this.pinProperty.direction===l.EGPD_Output?-this.padding.right:this.padding.left;switch(e.translate(i,Math.floor(.5*this.height)),t){case g.exec:this.drawExecutionPin(e);break;case g.delegate:this.drawDelegatePin(e);break;default:this.drawPin(e)}e.restore()}}drawPinIcon(e,t){var i=Math.floor(this.getPinX());e.fillStyle(this._color).translate(i-7.5,-7.5).fill(this.icon,"evenodd"),void 0!==this.secondaryIcon&&e.fillStyle(this._secondaryColor).fill(this.secondaryIcon,"evenodd")}drawPin(e){var t=this.setupTextDrawing(e),i=this.getPinX();e.fillText(this._pinProperty.formattedName,t,4),void 0===this.icon?(e.fillStyle(this._color).fillCircle(i+6,0,2.3),this._pinProperty.isLinked?e.fillCircle(i,0,6):(e.strokeStyle(this._color).lineWidth(2).strokeCircle(i,0,4.8),this.drawDefaultValueBox(e)),e.strokeStyle("#000").lineWidth(.5).strokeCircle(i,0,6)):this.icon&&this.drawPinIcon(e,this.icon)}drawExecutionPin(e){e.save();let t=this.setupTextDrawing(e);if(e.fillText(this._pinProperty.formattedName,t,4),this._pinProperty.formattedName){const t=this.setupTextDrawing(e);e.fillText(this._pinProperty.formattedName,t,4)}e.translate(this.getPinX(),-7),e.strokeStyle("#fff").fillStyle("#fff").lineWidth(1.1).beginPath().moveTo(-3,0).lineTo(1,0).lineTo(8,6).lineTo(8,8).lineTo(1,14).lineTo(-3,14).lineTo(-4,13).lineTo(-4,1).lineTo(-3,0).closePath(),this.pinProperty.isLinked?e.fill():e.stroke(),e.restore()}drawDelegatePin(e){let t=2;var i;this._pinProperty.direction===l.EGPD_Input&&(i=this.setupTextDrawing(e),e.fillText(this._pinProperty.formattedName,i,4),t=-6),e.save().translate(this.getPinX(),-5).fillStyle(this._color).strokeStyle(this._color),e.strokeStyle(this._color).lineWidth(2),this.pinProperty.isLinked?e.roundedRectangle(t,0,11,11,3).fill():e.lineWidth(2).roundedRectangle(t,0,10,10,3).stroke(),e.restore()}drawDefaultValueBox(e){this.defaultValueBox&&this.defaultValueBox.draw(e)}getPinX(){return this._isInput?R.PINS_PADDING_HORIZONTAL:this.size.x-R.PINS_PADDING_HORIZONTAL}setupTextDrawing(e){let t=this.size.x-(R.PIN_NAME_PADDING_LEFT+R.PINS_PADDING_HORIZONTAL);return this._isInput?(e.textAlign("left"),t=R.PIN_NAME_PADDING_LEFT+R.PINS_PADDING_HORIZONTAL):e.textAlign("right"),e.font("12px sans-serif").fillStyle("#eee"),t}formattedNameWidth(e){return this.app.canvas.font(x.NODE_FONT).getContext().measureText(e.formattedName).width+R.PIN_NAME_PADDING_LEFT}static calculateTotalPinWidth(e){return 0}getPinAbsolutePosition(){let e=this.getAbsolutPosition();return e.y+=.5*this.height,this.pinProperty.direction===l.EGPD_Output?(e.x+=(this.width||this.size.x)-R.PINS_PADDING_HORIZONTAL,this.pinProperty.category===g.delegate&&(e.x+=8)):e.x+=R.PINS_PADDING_HORIZONTAL,e}}R.PIN_NAME_PADDING_LEFT=12,R.PINS_PADDING_HORIZONTAL=16;class L extends b{constructor(e,t,i){super(e,t,i),this.drawChildren=!0,this.children=[]}refreshLayout(){super.refreshLayout(),this.applyFills()}draw(e){if(this.visible){if(e.save(),e.translate(Math.round(this.position.x),Math.round(this.position.y)),this.onDraw(e),this.drawChildren){e.save(),e.translate(Math.round(this.padding.left),Math.round(this.padding.top));for(var t of this.children)t.draw(e);e.restore()}e.restore()}}add(e){return this.children.push(e),e.parent=this,e}insert(e,t){return this.children.splice(t,0,e),e.parent=this,e}getChildren(){return this.children}getCalculatedSize(){let e=new c(0,0);for(var t of this.children)t.ignoreLayout||(t=t.getCalculatedSize(),e.x=Math.max(e.x,t.x),e.y=Math.max(e.y,t.y));e.x+=this.padding.left+this.padding.right,e.y+=this.padding.top+this.padding.bottom,e.x=Math.max(e.x,this.minWidth||0),e.y=Math.max(e.y,this.minHeight||0),this.controlSize=e.copy();for(var i of this.children)i.fillParentHorizontal&&(i.desiredWidth=this.size.x-this.padding.left-this.padding.right),i.fillParentVertical&&(i.desiredHeight=this.size.y-this.padding.top-this.padding.top);return e}isDirty(){let e=this.dirty;for(var t of this.children)e=e||t.isDirty();return e}applyFills(e){for(var t of this.children)t instanceof L&&t.applyFills()}}(t=N=N||{})[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT";class v extends L{constructor(e,t,i){super(e,t,i),this.childAlignment=N.LEFT}onDraw(e){}getCalculatedSize(){let e=new c(0,0),t=0;this.verticalFillCount=0;for(var i of this.children){var s;!i.ignoreLayout&&i.visible&&(s=i.getCalculatedSize(),i.position.y=e.y,e.x=Math.max(e.x,s.x),e.y+=s.y,i.fillParentVertical?this.verticalFillCount++:t+=s.y)}return e.x=Math.max(e.x,this.minWidth||0),e.y=Math.max(e.y,this.minHeight||0),this.controlSize=e.copy(),this.childrenHeight=t,e.x+=this.padding.left+this.padding.right,e.y+=this.padding.top+this.padding.bottom,e}positionChildren(){if(this.childAlignment==N.RIGHT)for(var e of this.children){var t=this.size.x-this.padding.left-e.size.x;e.position.x=t}}applyFills(e){var t,e=(e?.y||this.size.y)-this.childrenHeight-(this.padding.top+this.padding.bottom),i=this.size.x,s=e/this.verticalFillCount;let n=new c(this.padding.left,this.padding.top);for(t of this.children)!t.ignoreLayout&&t.visible&&(t.position.x=n.x,t.position.y=n.y,t.fillParentHorizontal&&(t.desiredWidth=i),t.fillParentVertical&&(t.desiredHeight=s),n.y+=t.size.y+(t.padding.top||0)+(t.padding.bottom||0),t instanceof L&&t.applyFills(new c(i,s)));this.positionChildren()}}class M extends L{constructor(e,t,i){super(e,t,i)}onDraw(e){}getCalculatedSize(){let e=new c(0,0),t=0;this.horizontalFillCount=0;for(var i of this.children){var s;!i.ignoreLayout&&i.visible&&(s=i.getCalculatedSize(),i.position.x=e.x,e.x+=s.x,e.y=Math.max(e.y,s.y),i.fillParentHorizontal?this.horizontalFillCount++:t+=s.x)}return e.x=Math.max(e.x,this.minWidth||0),e.y=Math.max(e.y,this.minHeight||0),e.x=this.width||e.x,e.y=this.height||e.y,this.controlSize=e.copy(),this.childrenWidth=t,e.x+=this.padding.left+this.padding.right,e.y+=this.padding.top+this.padding.bottom,e}applyFills(e){var t,i=((e?.x||this.size.x)-this.childrenWidth-(this.padding.left+this.padding.right))/this.horizontalFillCount,s=this.size.y;let n=new c(0,0);for(t of this.children)!t.ignoreLayout&&t.visible&&(t.position.x=n.x,t.position.y=n.y,t.fillParentHorizontal&&(t.desiredWidth=i),t.fillParentVertical&&(t.desiredHeight=s),n.x+=t.size.x+(t.padding.left||0)+(t.padding.right||0),t instanceof L&&t.applyFills(new c(i,s)))}}class U extends b{constructor(e,t,i){super(),this.text=e,this.font=t||x.NODE_FONT,this.color=i||x.NODE_TEXT_COLOR,this.padding={top:0,right:0,bottom:0,left:0}}initialize(){var e=this.measureText();this.minWidth=e.width,this.minHeight=e.fontBoundingBoxAscent+e.fontBoundingBoxDescent,isNaN(this.minHeight)&&(e=this.measureText("|_"),this.minHeight=e.actualBoundingBoxAscent+e.actualBoundingBoxDescent+5,console.log(this.minHeight)),this.baseLine=Math.floor(this.minHeight/3)}onDraw(e){var t=this.getPosition();e.font(this.font).textAlign(this.textAlign).fillStyle(this.color).fillText(this.text,t.x,t.y)}measureText(e){return this.app.canvas.font(this.font).getContext().measureText(e||this.text)}getPosition(){let e=new c(0,0);switch(this.textAlign){case"center":e.x=.5*this.size.x,e.y=this.size.y+this.padding.top-this.baseLine;break;case"right":e.x=this.size.x-this.minWidth-this.padding.right,e.y=this.size.y+this.padding.top-this.baseLine;break;default:e.x=this.padding.left,e.y=this.size.y+this.padding.top-this.baseLine}return e}}class F extends v{constructor(e,t){super(),this.color="rgb(160, 0, 0)",this.fillParentHorizontal=!0,this.minHeight=15,this.label=new U(e),this.label.fillParentHorizontal=!0,this.label.textAlign="center",this.label.padding={top:2,right:0,bottom:0,left:0},this.add(this.label),this.toolTip=t,console.log(t)}onDraw(e){e.fillStyle(this.color).roundedRectangle(0,0,this.size.x,this.size.y,3).fill()}}class G extends b{constructor(e){super(),this.icon=new Path2D(e),this.width=22,this.height=20,this.padding={top:3,right:0,bottom:0,left:0}}onDraw(e){e.fillStyle(x.NODE_TEXT_COLOR).translate(this.padding.left,this.padding.top).fill(this.icon,"evenodd")}}class B extends G{constructor(e){super(e),this.ignoreLayout=!0,this.width=B.ICON_SIZE,this.height=B.ICON_SIZE}onDraw(e){e.fillStyle(x.NODE_TEXT_COLOR).translate(this.parent.size.x+this.padding.left-B.HALF_ICON_SIZE,-B.HALF_ICON_SIZE+this.padding.top).fill(this.icon,"evenodd")}}B.ICON_SIZE=22,B.HALF_ICON_SIZE=11;class k extends L{constructor(e){super(e.pos.x,e.pos.y),this.pins=[],this._node=e,this.width=0,this.height=0,this._selected=!1,this._stroke={lineWidth:1,style:"rgb(0,0,0)"},this.showAdvanced=e.advancedPinDisplay,this.mainPanel=new v,this.mainPanel.fillParentHorizontal=!0,this.add(this.mainPanel),this.pinPanel=new M,this.pinPanel.fillParentHorizontal=!0,this.mainPanel.add(this.pinPanel),this.inputPinPanel=new v,this.outputPinPanel=new v,this.outputPinPanel.childAlignment=N.RIGHT,this.outputPinPanel.fillParentHorizontal=!0,this.pinPanel.add(this.inputPinPanel),this.pinPanel.add(this.outputPinPanel),this.initErrorBar(),this.addInfoIcons()}initErrorBar(){var e;void 0!==this.node.errorType&&void 0!==this.node.errorMsg&&1===this.node.errorType&&(e=new F("ERROR!",this.node.errorMsg),this.mainPanel.add(e))}addInfoIcons(){this.node.latent&&this.mainPanel.add(new B(D.LATENT))}set selected(e){this._selected=e}get selected(){return this._selected}get sourceText(){return this._node.sourceText}get node(){return this._node}createPins(e){for(var t of this.node.customProperties)t instanceof o&&this.createPin(t)}createPin(e){e=new R(this.position,e);this.pins.push(e),this.onPinCreated(e)}onPinCreated(e){(e.pinProperty.direction===l.EGPD_Output?this.outputPinPanel:this.inputPinPanel).add(e)}onDraw(e){}drawStroke(e){this._selected?e.lineWidth(k._SELECTION_LINE_WIDTH).strokeStyle(k._SELECTION_COLOR):e.lineWidth(this._stroke.lineWidth).strokeStyle(this._stroke.style),e.stroke()}}k._SELECTION_COLOR="rgb(231,158,0)",k._SELECTION_LINE_WIDTH=2.5;class H extends k{constructor(e){super(e),this.zIndex=-100,this.width=e.width,this.height=e.height,this.applyCommentColor(e.backgroundColor)}onDraw(e){e.fillStyle(this.bodyBackgroundColor).font(x.NODE_FONT).roundedRectangle(0,0,this.width,this.height,5).fill(),this.drawTitle(e),e.roundedRectangle(0,0,this.width,this.height,5),this.drawStroke(e)}applyCommentColor(e){null!=e&&""!=e||(e=H._DEFAULT_COMMENT_COLOR);let t=new S(e);t.applyGamma(),t.A=.3*t.A,this.bodyBackgroundColor=t.toRGBAString(),t.darken(.3),this.headerBackgroundColor=t.toRGBString()}drawTitle(e){var t=new c(9,23);e.fillStyle(this.headerBackgroundColor).roundedRectangle(0,0,this.width,32,{radiusTopLeft:5,radiusTopRight:5,radiusBottomLeft:0,radiusBottomRight:0}).fill().font("600 18px sans-serif").textAlign("left").strokeStyle("#333").lineWidth(1.5).strokeText(this.node.title,t.x+1,t.y+1).fillStyle(H._HEADER_TEXT_COLOR).fillText(this.node.title,t.x,t.y)}}H._HEADER_TEXT_COLOR="rgb(238,238,238)",H._DEFAULT_COMMENT_COLOR="rgba(255,255,255,1)";class Z{constructor(e){this._propertyParsers={},this._propertyParsers=e}parse(e){throw new Error("Not implemented! A derived class does not override the 'parse' function of the abstract class 'NodeParser'.")}parseProperties(t){for(let e=t.unparsedLines.length-1;0<=e;e--){var i=t.unparsedLines[e];this.parseProperty(t.node,i)&&t.unparsedLines.splice(e,1)}}parseProperty(e,t){const i=t.split("=");let s=i.shift();t=i.join("=");s=s.replace(/\((.+)\)/g,"");const n=this._propertyParsers[s];return!!n&&(n(e,t),!0)}}class K extends Z{constructor(){super({CommentColor:(e,t)=>{e.backgroundColor=A.parseColor(t)},NodeWidth:(e,t)=>{e.width=Number.parseInt(t)},NodeHeight:(e,t)=>{e.height=Number.parseInt(t)},NodeComment:(e,t)=>{e.title=t.replace(/"/g,"")}})}parse(e){return this.parseProperties(e),new H(e.node)}}class V extends M{constructor(e,t){super(),this.headerHeight=V.HEADER_TITLE_HEIGHT,this.icon=void 0,this.node=e,this.padding={top:2,right:0,bottom:0,left:7},t&&(this.icon=new G(t),this.add(this.icon)),this.titlePanel=new v,this.titlePanel.padding={top:0,right:0,bottom:0,left:0};let i=new U(e.title,x.NODE_HEADER_FONT);i.color=x.NODE_TEXT_COLOR,i.padding={top:6,right:0,bottom:3,left:0},this.titlePanel.add(i);for(const n of this.node.subTitles.sort((e,t)=>(t.orderIndex||0)-(e.orderIndex||0))){var s=new U(n.text,x.NODE_FONT,x.NODE_SUBTITLE_COLOR);this.titlePanel.add(s)}this.add(this.titlePanel),this.delegatePanel=new v,this.delegatePanel.fillParentHorizontal=!0,this.delegatePanel.minWidth=28,this.add(this.delegatePanel)}initialize(){this.fillStyleHeader=this.getHeaderFillStyle()}onDraw(e){e.fillStyle(this.fillStyleHeader).roundedRectangle(1,1,this.size.x-2,this.size.y,{radiusTopLeft:5,radiusTopRight:5,radiusBottomLeft:0,radiusBottomRight:0}).fill()}getHeaderFillStyle(){var e=this.node.backgroundColor||V.NODE_DEFAULT_BACKGROUND_COLOR;const t=this.app.canvas.getContext().createLinearGradient(0,0,150,0);return t.addColorStop(0,`rgb(${e})`),t.addColorStop(1,`rgba(${e},0.15)`),t}addDelegate(e){this.delegatePanel.add(e)}}V.HEADER_TITLE_HEIGHT=23,V.NODE_DEFAULT_BACKGROUND_COLOR="78, 117, 142";class z extends v{constructor(e){super(),this.color="#FFE32F",this.svg=new Image,this.svg.src="data:image/svg+xml,"+escape('<svg width="32px" height="32px" viewBox="0 5 32 27" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><path d="M16,6.988l-16,0l-16,18.024l16,-0l16,-18.024Z" style="fill:'+this.color+';fill-opacity:0.4;"/><path d="M48,6.988l-16,0l-16,18.024l16,-0l16,-18.024Z" style="fill:'+this.color+';fill-opacity:0.4;"/></svg>'),this.svg.width="25px",this.svg.height="25px",this.svg.onload=()=>{this.imageLoaded()},this.fillParentHorizontal=!0,this.minHeight=25,this.label=new U(e),this.label.fillParentHorizontal=!0,this.label.textAlign="center",this.label.padding={top:7,right:0,bottom:5,left:0},this.add(this.label)}onDraw(e){e.fillStyle(this.pattern),e.fillRect(0,0,this.size.x,this.size.y)}imageLoaded(){this.pattern=this.app.canvas.getContext().createPattern(this.svg,"repeat"),this.app.scene.refresh()}}class W extends k{constructor(e,t){super(e),this.headerHeight=W.NODE_HEADER_TITLE_HEIGHT,this.minHeight=W.NODE_HEADER_TITLE_HEIGHT,this.minWidth=100,this.header=new V(e,t),this.header.fillParentHorizontal=!0,this.pinPanel.padding={top:3,right:0,bottom:3,left:0},this.createPins(new c(0,this.headerHeight)),this.mainPanel.insert(this.header,0),this.initializeEnabledState()}initialize(){let e=this.app.canvas.getContext().measureText(this.node.title).width;if(this.node.subTitles&&0<this.node.subTitles.length){for(const t of this.node.subTitles)e=Math.max(e,this.app.canvas.getContext().measureText(t.text).width);this.headerHeight+=W.NODE_HEADER_SPACE_BETWEEN_TITLE_AND_SUBTITLE-2+W.NODE_HEADER_SUBTITLE_HEIGHT*this.node.subTitles.length}this.minWidth=e+W.NODE_HEADER_ICONS_WIDTH}initializeEnabledState(){void 0!==this.node.enabledState&&this.mainPanel.add(new z(_(this.node.enabledState)))}createPin(e){let t=new R(this.position,e);if(this.pins.push(t),e.direction==l.EGPD_Output){if(e.category===g.delegate)return t.fillParentVertical=!0,void this.header.addDelegate(t);this.outputPinPanel.add(t)}else this.inputPinPanel.add(t)}onDraw(e){super.onDraw(e),e.fillStyle(x.NODE_BACKGROUND_COLOR).font(x.NODE_FONT).roundedRectangle(0,0,this.size.x,this.size.y,5).fill(),e.roundedRectangle(0,0,this.size.x,this.size.y,5),this.drawStroke(e)}}W.NODE_HEADER_TITLE_HEIGHT=23,W.NODE_HEADER_SUBTITLE_HEIGHT=14,W.NODE_HEADER_SPACE_BETWEEN_TITLE_AND_SUBTITLE=4,W.NODE_HEADER_ICONS_WIDTH=50;class X extends k{constructor(e){super(e),this.minHeight=32,this.minWidth=Math.max(130,isNaN(this.minWidth)?0:this.minWidth),this.padding={top:2,right:0,bottom:0,left:0},this.createPins(new c(0,0))}initialize(){this.node.title&&(this.minWidth=this.app.canvas.font(x.NODE_MATHFUNC_TITLE_FONT).getContext().measureText(this.node.title).width+X._NODE_PIN_ICONS_WIDTH)}onDraw(e){e.fillStyle(X._NODE_BACKGROUND_COLOR).roundedRectangle(0,0,this.size.x,this.size.y,16).fill(),this.drawTitle(e),this.drawFirstSubTitle(e),this.drawStroke(e)}drawTitle(e){this.node.title&&e.font(x.NODE_MATHFUNC_TITLE_FONT).textAlign("center").fillStyle(x.NODE_MATHFUNC_TITLE_COLOR).fillText(this.node.title,.5*this.size.x,.5*this.size.y+8)}drawFirstSubTitle(e){this.node.subTitles&&0!==this.node.subTitles.length&&e.font(x.NODE_MATHFUNC_SUBTITLE_FONT).textAlign("center").fillStyle(x.NODE_MATHFUNC_TITLE_COLOR).fillText(this.node.subTitles[0].text,.5*this.size.x,.5*this.size.y+22)}}X._NODE_BACKGROUND_COLOR="rgba(15,15,15,0.6)",X._NODE_PIN_ICONS_WIDTH=140;class j extends Z{parse(e){const t=e.node;e=j.MATH_FUNCTIONS.find(e=>t.functionReference.memberName.startsWith(e.name));return t.subTitles=[],t.isPrimitiveNode=!!e,t.isPrimitiveNode?(t.title=e.displayName,A.hidePinNames(t.customProperties),new X(t)):new W(t,this.getIconForHeadedNode(t))}getIconForHeadedNode(e){return e.functionReference.memberName.startsWith("Make")?D.MAKE_STRUCT:e.functionReference.memberName.startsWith("Break")?D.BREAK_STRUCT:D.FUNCTION}}j.MATH_FUNCTIONS=[{name:"Multiply",displayName:""},{name:"Divide",displayName:""},{name:"Add",displayName:"+"},{name:"Subtract",displayName:"-"},{name:"Percent",displayName:"%"},{name:"FMax",displayName:"MAX"},{name:"Max",displayName:"MAX"},{name:"FMin",displayName:"MIN"},{name:"Min",displayName:"MIN"},{name:"Dot",displayName:""},{name:"LessEqual",displayName:"<="},{name:"Less",displayName:"<"},{name:"GreaterEqual",displayName:">="},{name:"Greater",displayName:">"},{name:"Abs",displayName:"ABS"},{name:"Exp",displayName:"e"},{name:"Sqrt",displayName:"SQRT"},{name:"Square",displayName:"^2"},{name:"NotEqual",displayName:"!="},{name:"Not",displayName:"NOT"},{name:"EqualEqual",displayName:"=="},{name:"BooleanOR",displayName:"OR"},{name:"BooleanXOR",displayName:"XOR"},{name:"BooleanNOR",displayName:"NOR"},{name:"BooleanAND",displayName:"AND"},{name:"BooleanNAND",displayName:"NAND"}];class Y{constructor(){this.FUNCTION_NAMES={K2_GetComponentRotation:"GetWorldRotation",GreaterGreater_VectorRotator:"RotateVector"}}parse(e){let t={};const i=(e=(e=e.trim()).substr(1,e.length-2)).split(",");for(let e=0;e<i.length;++e){var s=i[e].split("="),n=s[0],r=s[1];switch(n){case"MemberName":t.memberName=this.translateFunctionName(A.parseString(r));break;case"MemberParent":t.memberParent=Y.parseClassReference(r);break;case"MemberGuid":t.memberGUID=r;break;case"bSelfContext":t.selfContext="True"==r}}return t}translateFunctionName(e){for(var t in this.FUNCTION_NAMES){var i=this.FUNCTION_NAMES[t];e=e.replace(t,i)}return e}static parseClassReference(e){var t=e.substring(0,e.indexOf("'")),e=e.substring(e.indexOf("'")).replace(/['"]/g,"");return{type:t,classPath:e,className:A.getClassFriendlyName(e)}}}class q extends b{onDraw(e){}onMouseDown(e){return!1}onMouseUp(e){return!1}onMouseEnter(e){return!1}onMouseLeave(e){return!1}onMouseMove(e){return!1}}class $ extends q{constructor(e){super(),this.foldout=!1,this.hovered=!1,this.height=$.BUTTON_HEIGHT,this.fillParentHorizontal=!0,this.padding={top:0,right:0,bottom:3,left:0},this.foldout=e,this.zIndex=1}get foldoutState(){return this.foldout}set foldoutState(e){this.foldout=e,this.app.scene.refresh()}onMouseEnter(e){return this.hovered=!0,this.app.scene.refresh(),!0}onMouseLeave(e){return this.hovered=!1,this.app.scene.refresh(),!0}onMouseDown(e){return!0}onMouseUp(e){return this.foldoutState=!this.foldoutState,this.onClick&&this.onClick(this.foldoutState),!0}onDraw(e){this.hovered&&e.fillStyle("rgba(255,255,255,0.1)").fillRect(0,0,this.size.x,this.size.y),this.drawChevron(e)}drawChevron(e){e.save(),e.translate(.5*this.size.x,.5*this.size.y),e.fillStyle("#eee").beginPath(),this.foldoutState?e.moveTo(5,5).lineTo(0,-2).lineTo(-5,5).lineTo(5,5):e.moveTo(5,-2).lineTo(0,5).lineTo(-5,-2).lineTo(5,-2),e.fill(),e.restore()}}$.BUTTON_HEIGHT=20,$.BUTTON_MARGIN=3;class J extends W{constructor(e,t){super(e,t),this.foldState=!1,this.foldState=void 0===e.advancedPinDisplay||e.advancedPinDisplay,this.nodeButton=new $(this.foldState),this.mainPanel.add(this.nodeButton),this.nodeButton.onClick=e=>this.toggleFold(e)}toggleFold(e){this.foldState=e,this.applyAdvancedView(this.foldState),this.app.scene.refresh()}applyAdvancedView(e){for(var t of this.pins)!0!==t.pinProperty.advancedView||t.pinProperty.isLinked||(t.visible=e);this.nodeButton.refreshLayout(),this.refreshLayout();for(var i of this.pins)i.refreshLayout()}}class Q extends Z{parse(e){const t=e.node;e=Q.STR_FUNCTIONS.find(e=>t.functionReference.memberName.startsWith(e.name));return e&&(t.title=e.displayName),t.subTitles=[],!0===e?.isPrimitive?(A.hidePinNames(t.customProperties),new X(t)):new W(t,D.FUNCTION)}}Q.STR_FUNCTIONS=[{name:"Concat_StrStr",displayName:"Append"},{name:"Conv_",displayName:"",isPrimitive:!0}];class ee extends Z{parse(e){const t=e.node;let i=!1;e=ee.FUNCTIONS.find(e=>t.functionReference.memberName===e.name);return e?(t.title=e.displayName,i=e.isPrimitive):t.functionReference.memberName.startsWith("Array_")&&(t.title=t.functionReference.memberName.substr(6),t.title=p(t.title).toUpperCase(),i=!0),t.subTitles=[],!0===i?(A.hidePinNames(t.customProperties),new X(t)):new W(t,D.FUNCTION)}}ee.FUNCTIONS=[{name:"Array_Identical",displayName:"==",isPrimitive:!0},{name:"Array_Remove",displayName:"REMOVE INDEX",isPrimitive:!0},{name:"Array_RemoveItem",displayName:"REMOVE",isPrimitive:!0},{name:"Array_RandomFromStream",displayName:"Random Array Item from Stream",isPrimitive:!1},{name:"Array_Set",displayName:"Set Array Elem",isPrimitive:!1}];class te extends Z{constructor(){super({bIsPureFunc:(e,t)=>{e.isPureFunc="True"===t},bIsConstFunc:(e,t)=>{e.isConstFunc="True"===t},FunctionReference:(e,t)=>{const i=new Y;e.functionReference=i.parse(t),e.title=p(u(e.functionReference.memberName)),!0===e.functionReference.selfContext?e.subTitles.push({text:"Target is self context"}):!e.functionReference?.memberParent?.className||(t=e.customProperties.find(e=>"self"===e?.name?.toLowerCase()))&&!t.hidden&&(t=_(e.functionReference?.memberParent?.className),e.subTitles.push({text:`Target is ${t}`}))}})}parse(e){const t=e.node;this.parseProperties(e),t.backgroundColor=!0===t.isPureFunc?x.DEFAULT_FUNC_PURE_BACKGROUND_COLOR:x.DEFAULT_FUNC_BACKGROUND_COLOR;let i=D.FUNCTION;t.class===m.FUNCTION_ENTRY&&(i=this.handleFunctionNode(t));const s=te._FUNCTION_MAP[t.functionReference?.memberParent?.classPath];return s?s(e):new(void 0!==t.advancedPinDisplay?J:W)(t,i)}handleFunctionNode(e){return e.backgroundColor=x.DEFAULT_FUNC_ENTRY_BACKGROUND_COLOR,e.title=p(e.functionReference.memberName.replace("UserConstructionScript","ConstructionScript")),D.BREAK_STRUCT}}te._FUNCTION_MAP={"/Script/Engine.KismetMathLibrary":e=>(new j).parse(e),"/Script/Engine.KismetStringLibrary":e=>(new Q).parse(e),"/Script/Engine.KismetArrayLibrary":e=>(new ee).parse(e)};class ie extends Z{constructor(){super({InputAxisName:(e,t)=>{e.inputAxisName=t.replace(/"/g,""),e.title="InputAxis "+e.inputAxisName},CustomFunctionName:(e,t)=>{e.customFunctionName=t}})}parse(e){return this.parseProperties(e),e.node.backgroundColor=ie._DEFAULT_BACKGROUND_COLOR,new W(e.node,D.EVENT)}}ie._DEFAULT_BACKGROUND_COLOR="156, 36, 35",(t=C=C||{})[t.Getter=0]="Getter",t[t.Setter=1]="Setter";class se extends X{drawTitle(e){this.node.title&&e.font("bold 18px sans-serif").textAlign("center").fillStyle(x.NODE_MATHFUNC_TITLE_COLOR).fillText(this.node.title,this.size.x/2,22)}}class ne extends Z{constructor(){super({VariableReference:(e,t)=>{const i=new Y;e.variableReference=i.parse(t)}})}parse(e){this.parseProperties(e);const t=e.node;var i=e.node.class===m.VARIABLE_SET;return t.variableType=C.Getter,i?(t.variableType=C.Setter,e.node.title="SET",this.hideOutputPinNames(t),new se(e.node)):(e.node.title=void 0,new X(e.node))}hideOutputPinNames(t){for(let e=t.customProperties.length-1;0<=e;e--)if(t.customProperties[e]instanceof o!=!1){const i=t.customProperties[e];i.direction===l.EGPD_Output&&(i.hideName=!0)}}}class re extends b{constructor(e){super(),this.color=e,this.height=x.DEFAULT_BOX_HEIGHT,this.width=this.height}onDraw(e){e.roundedRectangle(0,0-x.DEFAULT_BOX_HEIGHT/2,this.width,this.height,x.DEFAULT_BOX_RADIUS).fillStyle(this.color.toRGBAString()).fill()}}class oe{}class le extends b{constructor(e){super(),this.height=x.DEFAULT_BOX_HEIGHT,this.entries=[]}initialize(){let s=0;this.entries.forEach(e=>{var t=this.app.canvas.getContext().measureText(`${e.key}`).width+3,i=t+this.app.canvas.getContext().measureText(`${e.value}`).width+2*x.DEFAULT_VALUE_BOX_TEXT_PADDING;this.entries.push({key:e.key,value:e.value,x:s,keyWidth:t,boxWidth:i}),s+=i+5}),this.width=s}onDraw(t){this.entries.forEach(e=>{t.roundedRectangle(e.x,0-x.DEFAULT_BOX_HEIGHT/2,e.boxWidth,x.DEFAULT_BOX_HEIGHT,x.DEFAULT_BOX_RADIUS).fillStyle("rgba(70,70,70,0.5)").fill(),t.textAlign("left").font("10px sans-serif").fillStyle("#999").fillText(`${e.key}`,e.x+x.DEFAULT_VALUE_BOX_TEXT_PADDING,x.DEFAULT_VALUE_BOX_TEXT_PADDING),t.textAlign("left").font(x.NODE_FONT).fillStyle("#ccc").fillText(`${e.value}`,e.x+e.keyWidth+x.DEFAULT_VALUE_BOX_TEXT_PADDING,x.DEFAULT_VALUE_BOX_TEXT_PADDING)})}}class ae extends b{constructor(e){super(),this.text=e,this.height=x.DEFAULT_BOX_HEIGHT}initialize(){this.width=this.app.canvas.getContext().measureText(this.text).width+2*x.DEFAULT_VALUE_BOX_TEXT_PADDING}onDraw(e){e.roundedRectangle(0,0-x.DEFAULT_BOX_HEIGHT/2,this.width,x.DEFAULT_BOX_HEIGHT,x.DEFAULT_BOX_RADIUS).fillStyle("rgba(70,70,70,0.5)").fill().font(x.NODE_FONT).fillStyle("#ccc").textAlign("left").fillText(this.text,x.DEFAULT_VALUE_BOX_TEXT_PADDING,x.DEFAULT_VALUE_BOX_TEXT_PADDING)}}class ce extends b{constructor(e){super(),this.isTrue=e,this.width=x.DEFAULT_BOX_HEIGHT,this.height=x.DEFAULT_BOX_HEIGHT}onDraw(e){var t=new Path2D(D.DEFAULT_VALUE_BOOL_TRUE);e.roundedRectangle(0,0-x.DEFAULT_BOX_HEIGHT/2,x.DEFAULT_BOX_HEIGHT-1,x.DEFAULT_BOX_HEIGHT-1,x.DEFAULT_BOX_RADIUS).fillStyle("rgba(50,50,50,0.5)").fill(),e.strokeStyle("rgba(70,70,70,0.7)").lineWidth(2).stroke(),this.isTrue&&e.fillStyle(x.NODE_TEXT_COLOR).translate(-.5,-x.DEFAULT_BOX_HEIGHT/2).fill(t,"evenodd")}}class he{parse(e,t){var i,s,n;this._property=new o(t);for([i,s,n]of e.matchAll(/([a-zA-Z0-9_.]+)\s*=\s*(("[^"]*")|(\([^)]*\))|(\w*\(\w*(?:[^(]*\([^)]*(?:"[^"]*")\))*\))|(\w*\([^)]*\([^)]*\)[^)]*\))|(\w*\([^)]*\))|([^,]*))/g))if(i&&s){const r=he._ATTRIBUTE_PARSERS[s];r?r(this._property,n):console.info(`Didn't parse property attribute '${s}'. There isn't a matching parser.`)}else console.warn(`Skipped property attribute because invalid key: '${i}'`);return he.setDefaultValueIfUndefined(this._property),this._property}static parseLinkedTo(e){let t=[],i=(e=e.substr(1,e.length-1)).split(",");for(let e=0;e<i.length;++e){var s=i[e].split(" ");if(2==s.length){let e=new oe;e.nodeName=s[0],e.pinID=s[1],t.push(e)}}return t}static parseSubCategoryObject(e){let t=e;var i=e.substring(0,e.indexOf("'"));let s=e.matchAll(/'"(.*)"'/g);return!s||(e=s.next())&&e.value&&(t=e.value[1]),{type:i,class:t}}static parsePinFriendlyName(t){let i="";if(t.startsWith("NSLOCTEXT")){var r="NSLOCTEXT(".length-1;let e=(t=t.substr(r,t.length-r-1)).split(",");return i=e[e.length-1].replace(/"/g,""),i}if(t.startsWith("LOCGEN_FORMAT_NAMED")){r="LOCGEN_FORMAT_NAMED(".length;let i="",s={};var o,r=(t=t.substr(r,t.length-r-1)).matchAll(/(\w*\((?:"[^"]*"[, ]*)+\))|("[^"]*")/g);let n=void 0;for(const[h,d,t]of r){console.log(h);let t=h;if(t=t.trim(),t.startsWith("NSLOCTEXT")){t=t.substring("NSLOCTEXT(".length,t.length-1);let e=t.split(",");var l=e[0].trim().replace(/"/g,""),a=(e[1].trim().replace(/"/g,""),e[2].trim().replace(/"/g,""));"KismetSchema"===l&&(i=a),""===l&&(l=n,s[l]=a)}a=t.replace(/"/g,"");n=a}let e=i;for(o in s){var c=s[o];e=e.replace("{"+o+"}",c)}return e}return i=t.replace(/"/g,""),i}static parsePinCategory(e){return(e=A.parseString(e)).toLowerCase()}static parseDirection(e){return"EGPD_Output"!==(e=e.replace(/"/g,""))?l.EGPD_Input:l.EGPD_Output}static parseDefaultValue(e,t){if(t)switch(e.category){case g.float:return{control:ae,data:T(A.parseString(t))};case g.bool:return{control:ce,data:"true"===A.parseString(t).toLowerCase()};case g.struct:return this.parseDefaultValueStruct(e.subCategoryObject.class,t);case g.byte:return"Enum"===e.subCategoryObject.type?{control:ae,data:A.parseEnumValue(e.subCategoryObject.class,t)}:{control:ae,data:A.parseString(t)};default:return{control:ae,data:A.parseString(t)}}}static parseEnumValue(){}static parseDefaultValueStruct(e,t){switch(e){case E.VECTOR:case E.ROTATOR:return{control:le,data:this.parseDefaultValueVector(t)};case E.LINEAR_COLOR:var i=this.parseDefaultValueStructCommon(t).map(e=>Number(e.value));const s=new S(255*(i[0]||0),255*(i[1]||0),255*(i[2]||0),i[3]);return s.applyGamma(),{control:re,data:s};default:return{control:le,data:this.parseDefaultValueStructCommon(t)}}}static parseDefaultValueVector(e){var t=["X","Y","Z"];let i=[];e.split(",").forEach(e=>{i.push(T(A.parseString(e)))});for(let e=0;e<i.length;e++)i[e]={key:t[e],value:i[e]};return i}static parseDefaultValueStructCommon(e){let i=[];return(e=(e=A.parseString(e)).trim().replace(/[()]/g,"")).split(",").forEach(e=>{var[t,e]=e.split("=");i.push({key:t,value:T(e)})}),i}static parseDefaultValueText(e){var t=/(?<=")([^"]+)(?="\))/g.exec(e.trim());return t?t[0]:e}static setDefaultValueIfUndefined(e){null==e.defaultValue&&e.category===g.struct&&e.subCategoryObject.class===E.VECTOR2D&&(e.defaultValue=[{key:"X",value:"0.0"},{key:"Y",value:"0.0"}],e.defaultValueControlClass=le)}}y=he,he._ATTRIBUTE_PARSERS={PinId:(e,t)=>{e.id=t},PinName:(e,t)=>{e.name=_(A.parseString(t))},PinFriendlyName:(e,t)=>{e.friendlyName=_(he.parsePinFriendlyName(t))},"PinType.PinCategory":(e,t)=>{e.category=he.parsePinCategory(t)},Direction:(e,t)=>{e.direction=he.parseDirection(t)},PinToolTip:(e,t)=>{e.toolTip=A.parseString(t)},"PinType.PinSubCategory":(e,t)=>{e.subCategory=A.parseString(t)},"PinType.PinSubCategoryObject":(e,t)=>{e.subCategoryObject=he.parseSubCategoryObject(t)},"PinType.bIsReference":(e,t)=>{e.isReference="true"===t.toLowerCase()},"PinType.bIsConst":(e,t)=>{e.isConst="true"===t.toLowerCase()},"PinType.bIsWeakPointer":(e,t)=>{e.isWeakPointer="true"===t.toLowerCase()},"PinType.bIsUObjectWrapper":(e,t)=>{e.isUObjectWrapper="true"===t.toLowerCase()},DefaultValue:(e,t)=>{t=y.parseDefaultValue(e,t);e.defaultValue=t.data,e.defaultValueControlClass=t.control},DefaultObject:(e,t)=>{t=A.parseString(t),t=A.getClassFriendlyName(t);t&&(e.defaultValue=t,e.defaultValueControlClass=ae)},DefaultTextValue:(e,t)=>{e.defaultValue=y.parseDefaultValueText(t),e.defaultValueControlClass=ae},AutogeneratedDefaultValue:(e,t)=>{e.autogeneratedDefaultValue=A.parseString(t)},LinkedTo:(e,t)=>{e.linkedTo=he.parseLinkedTo(t)},bHidden:(e,t)=>{e.hidden="true"===t.toLowerCase()},bDefaultValueIsIgnored:(e,t)=>{e.defaultValueIsIgnored="true"===t.toLowerCase()},bDefaultValueIsReadOnly:(e,t)=>{e.defaultValueIsReadOnly="true"===t.toLowerCase()},bAdvancedView:(e,t)=>{e.advancedView="true"===t.toLowerCase()},bOrphanedPin:(e,t)=>{e.orphanedPin="true"===t.toLowerCase()},bNotConnectable:(e,t)=>{e.notConnectable="true"===t.toLowerCase()},PersistentGuid:(e,t)=>{e.persistentGUID=A.parseString(t)},"PinType.ContainerType":(e,t)=>{e.containerType=t},"PinType.PinValueType":(e,t)=>{void 0!==(t=(t=t.replace(/[\(\)]/g,"")).split("=")[1])&&(e.valueType=t.replace(/"/g,""))},"PinType.PinSubCategoryMemberReference":(e,t)=>{t&&"()"!=t&&console.log(`Found interesting attribute 'PinType.PinSubCategoryMemberReference' for which a value other than '()' was set. PinType.PinSubCategoryMemberReference='${t}' [pin-name: ${e.name}]`)}};class de extends Z{parse(e){var t=de._NODE_TITLES[e.node.class];return e.node.title=t.title,e.node.backgroundColor=de._DEFAULT_BACKGROUND_COLOR,new W(e.node,t.icon)}}de._DEFAULT_BACKGROUND_COLOR="150, 150, 150",de._NODE_TITLES={[m.IF_THEN_ELSE]:{title:"Branch",icon:D.BRANCH},[m.EXECUTION_SEQUENCE]:{title:"Sequence",icon:D.SEQUENCE},[m.MULTI_GATE]:{title:"Multi Gate",icon:D.SEQUENCE}};class pe extends k{constructor(e){super(e),this.width=16,this.height=16,this._stroke.lineWidth=.5,this.drawChildren=!1,this.color=I.getPinColor(e.customProperties[0]),this.mainPanel.width=0,this.createPins()}onPinCreated(e){e.ignoreLayout=!0,this.mainPanel.add(e),e.position.y=8,e.width=20,e.height=0,e.visible=!1}onDraw(e){e.translate(8,8).fillStyle(this.color).fillCircle(6,0,2.3).fillCircle(0,0,6),this.drawStroke(e)}}class ue extends Z{parse(e){return e.node.backgroundColor=ue._DEFAULT_BACKGROUND_COLOR,new pe(e.node)}}ue._DEFAULT_BACKGROUND_COLOR="255, 255, 255",(t=P=P||{})[t.NotReplicated=0]="NotReplicated",t[t.Multicast=1]="Multicast",t[t.RunOnServer=2]="RunOnServer",t[t.RunOnOwningClient=3]="RunOnOwningClient";class _e extends Z{constructor(){super({CustomFunctionName:(e,t)=>{e.customFunctionName=t.replace(/"/g,""),e.title=e.customFunctionName,e.subTitles.unshift({text:"Custom Event"})},FunctionFlags:(e,t)=>{e.functionFlags=Number.parseInt(t),e.reliable=0!=(e.functionFlags&_e.FUNCTION_FLAG_RELIABLE),e.replicationType=this.getReplicationType(e.functionFlags),e.replicationType!==P.NotReplicated&&(t=P[e.replicationType],t=_e.REPLICATION_TYPE_TEXTS[t],e.subTitles.unshift({text:t,orderIndex:1}))},ErrorType:(e,t)=>{e.errorType=Number.parseInt(t)}})}parse(e){return this.parseProperties(e),e.node.backgroundColor=_e._DEFAULT_BACKGROUND_COLOR,new W(e.node,D.CUSTOM_EVENT)}getReplicationType(e){for(const t in _e.FUNCTION_FLAG_BIT_MASKS)if(Object.prototype.hasOwnProperty.call(_e.FUNCTION_FLAG_BIT_MASKS,t))if(0!=(e&_e.FUNCTION_FLAG_BIT_MASKS[t]))return P[t];return P.NotReplicated}}_e.FUNCTION_FLAG_RELIABLE=64,_e.FUNCTION_FLAG_BIT_MASKS={[P.Multicast]:16384,[P.RunOnServer]:2097152,[P.RunOnOwningClient]:16777216},_e.REPLICATION_TYPE_TEXTS={[P.Multicast]:"Executes On All",[P.RunOnServer]:"Executes On Server",[P.RunOnOwningClient]:"Executes On Owning Client"},_e._DEFAULT_BACKGROUND_COLOR="156, 36, 35";class Te extends Z{constructor(){super({EventReference:(e,t)=>{const i=new Y;e.eventReference=i.parse(t),e.title="Event "+e.eventReference.memberName.replace("Receive","")},bOverrideFunction:(e,t)=>{e.overrideFunction="True"===t}})}parse(e){return this.parseProperties(e),e.node.backgroundColor=Te._DEFAULT_BACKGROUND_COLOR,new W(e.node,D.EVENT)}}Te._DEFAULT_BACKGROUND_COLOR="156, 36, 35";class me extends Z{constructor(){super({InputKey:(e,t)=>{e.inputKey=t},bControl:(e,t)=>{e.control="true"===t.toLowerCase()},bAlt:(e,t)=>{e.alt="true"===t.toLowerCase()},bShift:(e,t)=>{e.shift="true"===t.toLowerCase()},bCommand:(e,t)=>{e.command="true"===t.toLowerCase()}})}parse(e){this.parseProperties(e),e.node.backgroundColor=me.DEFAULT_BACKGROUND_COLOR;let t=e.node,i=[],s="";t.control&&i.push("Ctrl"),t.command&&i.push("Cmd"),t.alt&&i.push("Alt"),t.shift&&i.push("Shift"),0<i.length&&(s=i.join("+")+" "),s+=_(t.inputKey),s=s.replace("Magic Leap","ML");let n=D.INPUT_KEY;return(t.inputKey.startsWith("Gamepad_")||t.inputKey.startsWith("MagicLeap_"))&&(n=D.INPUT_GAMEPAD),e.node.title=s,new W(e.node,n)}}me.DEFAULT_BACKGROUND_COLOR="156, 36, 35";class ge extends Z{constructor(){super({TargetType:(e,t)=>{e.targetType=Y.parseClassReference(t)}})}parse(e){this.parseProperties(e);let t=e.node;return t.title="Cast to "+t.targetType.className,t.backgroundColor="32, 116, 120",new W(e.node,D.CAST)}}class fe extends Z{constructor(){super({Enum:(e,t)=>{e.enum=A.parseString(t)},EnumEntries:(e,t)=>{e.enumEntries||(e.enumEntries=[]),e.enumEntries.push(A.parseString(t))}})}parse(e){this.parseProperties(e);let t=e.node;return t.title="Switch on "+A.getClassFriendlyName(t.enum),t.backgroundColor="162, 161, 35",new J(e.node,D.SWITCH)}}class Ee{parse(e){let i={};const s=(e=(e=e.trim()).substr(1,e.length-2)).split(",");for(let t=0;t<s.length;++t){var n=s[t].split("="),r=n[0];let e=n[1];"MacroGraph"===r&&(i.macroFuncName=Ee.extractNodeNameOfMacroGraphStr(e.substring(e.indexOf("'"))))}return i}static extractNodeNameOfMacroGraphStr(e){var t=A.parseString(e),e=/(?<=\:)\w*/g.exec(t);return e?e[0]:t}}class Ne extends Z{constructor(){super({MacroGraphReference:(e,t)=>{const i=new Ee;e.macroGraphReference=i.parse(t),e.title=p(e.macroGraphReference.macroFuncName)}})}parse(e){this.parseProperties(e);var t=e.node,t=Ne.getIconForMacro(t.macroGraphReference.macroFuncName);return e.node.backgroundColor=Ne._DEFAULT_BACKGROUND_COLOR,new W(e.node,t)}static getIconForMacro(e){switch(e){case"ForLoop":case"ForLoopWithBreak":case"WhileLoop":return D.LOOP;case"Gate":return D.GATE;case"FlipFlop":return D.FLIPFLOP;case"Do":return D.DO_N;case"DoOnce":return D.DO_ONCE;case"IsValid":return D.IS_VALID;default:return D.MACRO}}}Ne._DEFAULT_BACKGROUND_COLOR="150, 150, 150";class Ce extends Z{constructor(){super({FunctionReference:(e,t)=>{const i=new Y;e.functionReference=i.parse(t),e.functionReference.memberName=e.functionReference.memberName.replace("UserConstructionScript","ConstructionScript"),e.backgroundColor=x.DEFAULT_FUNC_ENTRY_BACKGROUND_COLOR,e.class===m.FUNCTION_RESULT?e.title="Return Node":e.title=p(u(e.functionReference.memberName))}})}parse(e){return this.parseProperties(e),new W(e.node,D.CONSTRUCT)}}class ye extends Z{constructor(){super({bReturnByRefDesired:(e,t)=>{e.returnByRefDesired=!("False"===t)}})}parse(e){const t=e.node;return t.returnByRefDesired=!0,this.parseProperties(e),t.title="GET",t.subTitles.push({text:!0===t.returnByRefDesired?"a ref":"a copy"}),A.hidePinNames(t.customProperties),new X(t)}}class Pe extends Z{parse(e){return e.node.title="Make Array",e.node.backgroundColor=x.DEFAULT_FUNC_PURE_BACKGROUND_COLOR,new W(e.node,D.MAKE_ARRAY)}}class Oe extends Z{parse(e){return e.node.title="Input Touch",e.node.backgroundColor=Oe._DEFAULT_BACKGROUND_COLOR,new W(e.node,D.INPUT_TOUCH)}}Oe._DEFAULT_BACKGROUND_COLOR="156, 36, 35";class Ae extends Z{constructor(){super({InputAxisKey:(e,t)=>{e.inputAxisKey=t}})}parse(e){this.parseProperties(e),e.node.backgroundColor=x.DEFAULT_FUNC_PURE_BACKGROUND_COLOR;let t=e.node;t.title="Get "+p(t.inputAxisKey);let i=D.FUNCTION;return t.inputAxisKey.startsWith("Mouse")&&(i=D.MOUSE),new W(e.node,i)}}class xe extends Z{constructor(){super({StructType:(e,t)=>{e.structType=Y.parseClassReference(t)}})}parse(e){this.parseProperties(e),e.node.backgroundColor=xe._DEFAULT_BACKGROUND_COLOR;const t=e.node;let i="",s=D.PILL;switch(console.log(e.node.class),e.node.class){case m.SET_FIELDS_IN_STRUCT:i="Set members in ";break;case m.BREAK_STRUCT:i="Break ",s=D.BREAK_STRUCT;break;case m.MAKE_STRUCT:i="Make ",s=D.MAKE_STRUCT}return t.title=i+t.structType.className,new W(e.node,s)}}xe._DEFAULT_BACKGROUND_COLOR="19, 42, 79";class Se extends Z{constructor(){super({IndexPinType:(e,t)=>{var i;let s,n;for(i of(t=t.replace(/[()]/g,"")).split(",")){let e=i.split("=");"PinCategory"==e[0]&&(s=e[1].replace('"',"")),"PinSubCategory"==e[0]&&(n=e[1].replace('"',""))}e.indexPinType={category:s,subCategory:n}}})}parse(e){return this.parseProperties(e),e.node.title="Select",Se.changePinsToReference(e),new W(e.node,D.SELECT)}static changePinsToReference(e){for(var t of e.node.customProperties)t instanceof o&&"index"!==t.name.toLowerCase()&&(t.isReference=!0)}}class we extends Z{constructor(){super({TimelineName:(e,t)=>{e.title=A.parseString(t)}})}parse(e){return this.parseProperties(e),e.node.backgroundColor=we.DEFAULT_BACKGROUND_COLOR,new W(e.node,D.TIMER)}}we.DEFAULT_BACKGROUND_COLOR="138, 108, 19";class be extends Z{parse(e){var t=A.getFirstClassNameFromPinProperties(e.node.customProperties)||"";return e.node.title=`Spawn Actor ${_(t)}`,new J(e.node,D.SPAWN_ACTOR)}}class Ie extends Z{constructor(){super({bCanHaveInputs:(e,t)=>{"true"===t.toLowerCase()&&(e.title="Outputs")},bCanHaveOutputs:(e,t)=>{"true"===t.toLowerCase()&&(e.title="Inputs")}})}parse(e){return this.parseProperties(e),e.node.backgroundColor=x.DEFAULT_FUNC_BACKGROUND_COLOR,new W(e.node,D.CONSTRUCT)}}class De extends Z{parse(e){var t=A.getFirstClassNameFromPinProperties(e.node.customProperties)||"User ";return e.node.title=`Create ${_(t)} Widget`,new W(e.node,D.CONSTRUCT)}}class Re extends Z{parse(e){var t=A.getFirstClassNameFromPinProperties(e.node.customProperties)||"";return e.node.title=`Create ${_(t)}`,new W(e.node,D.CONSTRUCT)}}class Le extends Z{constructor(){super({NodeGuid:(e,t)=>{e.guid=t},NodePosX:(e,t)=>{e.pos.x=Number.parseInt(t)},NodePosY:(e,t)=>{e.pos.y=Number.parseInt(t)},AdvancedPinDisplay:(e,t)=>{e.advancedPinDisplay="Shown"===t},EnabledState:(e,t)=>{e.enabledState=t},ErrorType:(e,t)=>{e.errorType=Number.parseInt(t)},ErrorMsg:(e,t)=>{e.errorMsg=t.replace(/["]/g,"").replace(/\\\'/g,"'")}}),this._OBJECT_STARTING_TAG="Begin Object",this._nodeParsers={[m.KNOT]:()=>new ue,[m.CALL_FUNCTION]:()=>new te,[m.IF_THEN_ELSE]:()=>new de,[m.EXECUTION_SEQUENCE]:()=>new de,[m.MULTI_GATE]:()=>new de,[m.VARIABLE_GET]:()=>new ne,[m.VARIABLE_SET]:()=>new ne,[m.EVENT]:()=>new Te,[m.CUSTOM_EVENT]:()=>new _e,[m.INPUT_AXIS_EVENT]:()=>new ie,[m.COMMENT]:()=>new K,[m.INPUT_KEY]:()=>new me,[m.CommutativeAssociativeBinaryOperator]:()=>new te,[m.DYNAMIC_CAST]:()=>new ge,[m.SWITCH_ENUM]:()=>new fe,[m.MACRO_INSTANCE]:()=>new Ne,[m.FUNCTION_ENTRY]:()=>new Ce,[m.FUNCTION_RESULT]:()=>new Ce,[m.CALL_ARRAY_FUNCTION]:()=>new te,[m.SELF]:()=>new ne,[m.GET_ARRAY_ITEM]:()=>new ye,[m.MAKE_ARRAY]:()=>new Pe,[m.INPUT_TOUCH]:()=>new Oe,[m.GET_INPUT_AXIS_KEY_VALUE]:()=>new Ae,[m.SET_FIELDS_IN_STRUCT]:()=>new xe,[m.BREAK_STRUCT]:()=>new xe,[m.MAKE_STRUCT]:()=>new xe,[m.SELECT]:()=>new Se,[m.TIMELINE]:()=>new we,[m.SPAWN_ACTOR_FROM_CLASS]:()=>new be,[m.TUNNEL]:()=>new Ie,[m.CREATE_WIDGET]:()=>new De,[m.CREATE_OBJECT]:()=>new Re},this._customPropertyParsers={Pin:()=>new he}}parse(e){var t=e.lines[0],t=this.parseHeader(t);e.node={class:t.class,name:t.name,title:t.name,subTitles:[],guid:void 0,pos:new c(0,0),sourceText:e.lines.join("\n"),customProperties:[],latent:!1},this.parseProperties(e),this.parseCustomProperties(e);const i=this._nodeParsers[e.node.class];if(!i)return console.info(`There is no particular implementation for class ${e.node.class}. Falling back to the generic node class.`),new W(e.node);const s=i();return s.parse(e)}parseHeader(e){let i={};var t=this._OBJECT_STARTING_TAG.length;const s=e.substr(t,e.length-t-1),n=s.trim().split(" ")||[];return n.forEach(e=>(e=>{const t=e.split("=");i[t[0]]=t[1].replace(/"/g,"")})(e)),{class:i.Class,name:i.Name}}parseCustomProperties(e){for(const i of e.unparsedLines){var t;!i.startsWith("CustomProperties")||(t=this.parseCustomProperty(i,e.node.name))&&(e.node.customProperties.push(t),t instanceof o&&t.subCategoryObject.class===E.LatentActionInfo&&(e.node.latent=!0))}this.hideExecPins(e.node)}parseCustomProperty(e,t){let i=(e=e.substr("CustomProperties".length).trim()).split(" ");e=i.shift();let s=i.join(" ");s=s.trim(),s=s.substr(1,s.length-2);const n=this._customPropertyParsers[e];if(n)return n().parse(s,t);console.info(`There is no implementation for custom property type '${e}'. Skip this property`)}hideExecPins(e){let t={[l.EGPD_Input]:new Array,[l.EGPD_Output]:new Array};for(const i of e.customProperties)i instanceof o&&null!=i.direction&&i.category===g.exec&&t[i.direction].push(i);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const n=t[s];1==n.length&&(n[0].hideName=!0)}}}class ve{constructor(e){this._lines=Array.from(e),this._unparsedLines=e.slice(1,e.length-1)}get node(){return this._node}set node(e){this._node=e}get lines(){return this._lines}get unparsedLines(){return this._unparsedLines}}class Me{constructor(){this._OBJECT_STARTING_TAG="Begin Object",this._OBJECT_ENDING_TAG="End Object"}parseBlueprint(e){let i=new Array;this._lines=e.replace(/\r/g,"").split("\n");for(let t=0;t<this._lines.length;++t){let e=A.stripLine(this._lines[t]);if(e.startsWith(this._OBJECT_STARTING_TAG)){const s=this.getLinesUntilEndTag(t);t+=s.length,s.unshift(e),i.push((new Le).parse(new ve(s)))}}return i}getLinesUntilEndTag(e){let t=Array(),i="";do{if(++e>=this._lines.length)throw new Error("Invalid blueprint text. An 'Object' node was never closed. Missing 'End Object'");if(i=A.stripLine(this._lines[e]),i.startsWith(this._OBJECT_STARTING_TAG))throw new Error("Invalid blueprint text. An 'Object' node was opened before the previous was closed. Missing 'End Object'")}while(t.push(i),!i.startsWith(this._OBJECT_ENDING_TAG));return t}}class Ue{constructor(e){this._canvas=e,this._position=new c(0,0)}get position(){return this._position}prepareViewport(){this._canvas.translate(Math.round(this._position.x),Math.round(this._position.y))}moveRelative(e){this._position=this._position.add(e)}centerAbsolutePosition(e){this._position=new c(Math.round(e.x+this._canvas.width/2),Math.round(e.y+this._canvas.height/2))}}class Fe extends w{constructor(e){super(0,0,-1e3),this.camera=e,this.ready=!1,this.image=new Image,this.image.onload=e=>this.onLoaded(e),this.image.src=Fe.BACKGROUND_SVG}initialize(){this.loaded&&this.initPattern()}draw(e){this.ready&&e.fillStyle(this.pattern).fillRect(-this.camera.position.x,-this.camera.position.y,e.width,e.height)}onLoaded(e){this.loaded=!0,this.app&&this.initPattern()}initPattern(){this.pattern=this.app.canvas.getContext().createPattern(this.image,"repeat"),this.ready=!0,this.app.scene.refresh()}}Fe.BACKGROUND_SVG="data:image/svg+xml,"+escape('<svg width="96px" height="96px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.5;"><rect x="0" y="0" width="96.375" height="96" style="fill:#262626;stroke:#262626;stroke-width:0.75px;"/><g>        <path d="M96.375,48.389l-96,-0" style="fill:none;stroke:#353535;stroke-width:0.75px;"/>        <path d="M96.375,60.389l-96,-0" style="fill:none;stroke:#353535;stroke-width:0.75px;"/>        <path d="M96.375,72.389l-96,-0" style="fill:none;stroke:#353535;stroke-width:0.75px;"/>        <path d="M96.375,84.389l-96,-0" style="fill:none;stroke:#353535;stroke-width:0.75px;"/>        <path d="M96.375,36.389l-96,-0" style="fill:none;stroke:#353535;stroke-width:0.75px;"/>        <path d="M96.375,24.389l-96,-0" style="fill:none;stroke:#353535;stroke-width:0.75px;"/>        <path d="M96.375,12.389l-96,-0" style="fill:none;stroke:#353535;stroke-width:0.75px;"/></g><path d="M48.375,96l-0,-96" style="fill:none;stroke:#353535;stroke-width:0.75px;"/><path d="M36.375,96l-0,-96" style="fill:none;stroke:#353535;stroke-width:0.75px;"/><path d="M24.375,96l-0,-96" style="fill:none;stroke:#353535;stroke-width:0.75px;"/><path d="M12.375,96l-0,-96" style="fill:none;stroke:#353535;stroke-width:0.75px;"/><path d="M60.375,96l-0,-96" style="fill:none;stroke:#353535;stroke-width:0.75px;"/><path d="M72.375,96l-0,-96" style="fill:none;stroke:#353535;stroke-width:0.75px;"/><path d="M84.375,96l-0,-96" style="fill:none;stroke:#353535;stroke-width:0.75px;"/><path d="M96,0l-96,0l0,96" style="fill:none;stroke:#161616;stroke-width:1.55px;"/></svg>');class Ge extends b{constructor(e,t){super(0,0,-1),this.pinStart=e,this.pinEnd=t,this.pinStartPosition=this.pinStart.getPinAbsolutePosition(),this.pinEndPosition=this.pinEnd.getPinAbsolutePosition();t=this.pinEndPosition.subtract(this.pinStartPosition),t=Math.sqrt(t.x*t.x+t.y*t.y)-12;this.curveValue=.4*t,this.color=I.getPinColor(this.pinStart.pinProperty),this.lineWidth=this.pinStart.pinProperty.category===g.exec?2.5:1.5}onDraw(e){this.pinStartPosition=this.pinStart.getPinAbsolutePosition(),this.pinEndPosition=this.pinEnd.getPinAbsolutePosition();var t=this.pinEndPosition.subtract(this.pinStartPosition),t=Math.sqrt(t.x*t.x+t.y*t.y)-12;this.curveValue=.4*t,e.lineWidth(this.lineWidth).beginPath().moveTo(this.pinStartPosition.x,this.pinStartPosition.y).strokeStyle(this.color).lineTo(this.pinStartPosition.x+6,this.pinStartPosition.y).bezierCurveTo(this.pinStartPosition.x+this.curveValue+6,this.pinStartPosition.y,this.pinEndPosition.x-this.curveValue-6,this.pinEndPosition.y,this.pinEndPosition.x-6,this.pinEndPosition.y).lineTo(this.pinEndPosition.x,this.pinEndPosition.y).stroke()}}class Be extends w{constructor(e){super(e.getAbsolutPosition().x,e.getAbsolutPosition().y,-1),this._pin=e,this._color=I.getPinColor(this._pin.pinProperty),this._isDirectionOutput=this._pin.pinProperty.direction==l.EGPD_Output,this._lineWidth=this._pin.pinProperty.category===g.exec?2.5:1.5}draw(e){e.save(),e.translate(this._pin.getPinAbsolutePosition().x,this._pin.getPinAbsolutePosition().y),e.lineWidth(this._lineWidth).beginPath().setLineDash([30,4,2.5,4,2.5,4,2.5]),this._isDirectionOutput?e.moveTo(6,0).lineTo(Be.LINE_LENGTH,0):e.moveTo(-6,0).lineTo(-Be.LINE_LENGTH,0),e.strokeStyle(this._color).stroke(),e.restore()}}Be.LINE_LENGTH=80;class ke{constructor(e,t){this.app=t,this._canvas=e,this._camera=new Ue(this._canvas),this._nodes=new Array,this._controls=new Array,this._pins=new Array}get camera(){return this._camera}get canvas(){return this._canvas}get nodes(){return this._nodes||[]}get interactables(){return this._interactables||[]}collectInteractables(){let t=[];this._controls.forEach(e=>{e instanceof q&&t.push(e),e instanceof L&&this.findInteractablesIn(t,e)}),this._interactables=t}findInteractablesIn(e,t){for(var i of t.getChildren())i instanceof q&&e.push(i),i instanceof L&&this.findInteractablesIn(e,i)}updateLayout(){this._controls.forEach(e=>{e instanceof b&&e.refreshLayout()})}refresh(){this._canvas.clear(),this._controls.sort((e,t)=>e.ZIndex-t.ZIndex),this._camera.prepareViewport(),this._controls.forEach(e=>{void 0!==e.draw&&e.draw(this._canvas)})}unload(){this._pins=new Array,this._nodes=new Array,this._controls=new Array}load(e){this.createBackground(),this.createControlNodes(e),this.createConnectionLines(),this.initializeControls()}createBackground(){var e=new Fe(this.camera);this._controls.push(e)}createControlNodes(e){for(const t of e)this._nodes.push(t),this._controls.push(t),this.collectPins(t)}collectPins(e){if(e instanceof L)for(var t of e.getChildren())t instanceof R&&this._pins.push(t),t instanceof L&&this.collectPins(t)}createConnectionLines(){const r=[],o=this._pins;for(let e=o.length-1;0<=e;--e){let n=o[e];if(n.pinProperty.isLinked){if(n.pinProperty.direction==l.EGPD_Output){let s=!1;for(let i=0;i<n.pinProperty.linkedTo.length;++i){let t=n.pinProperty.linkedTo[i],e=o.find(e=>e.pinProperty.nodeName===t.nodeName&&e.pinProperty.id===t.pinID);e&&(this._controls.push(new Ge(n,e)),r.push(n.pinProperty.getUniqueName()),r.push(e.pinProperty.getUniqueName()),s=!0)}s&&o.splice(e,1)}}else o.splice(e,1)}for(let t=o.length-1;0<=t;--t){let e=o[t];var i;0<=r.indexOf(e.pinProperty.getUniqueName())||e.pinProperty.isLinked&&(i=new Be(e),this._controls.push(i))}}initializeControls(){for(var e of this._controls)this.initializeControl(e)}initializeControl(e){if(e.initControl(this.app),e instanceof L)for(var t of e.getChildren())this.initializeControl(t)}calculateCentroid(){let t=new c(0,0);return 0==this.nodes.length?t:(this.nodes.forEach(e=>{t=new c(t.x-e.position.x-.5*e.size.x,t.y-e.position.y-.5*e.size.y)}),new c(t.x/this.nodes.length,t.y/this.nodes.length))}calculateCenterPoint(){if(0==this.nodes.length)return new c(0,0);let t=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;this.nodes.forEach(e=>{t=Math.min(e.position.x,t),s=Math.min(e.position.y,s),i=Math.max(e.position.x+e.size.x,i),n=Math.max(e.position.y+e.size.y,n)});var e=i-t,r=n-s;return new c(.5*-e-t,.5*-r-s)}}class He{constructor(e){this._element=e,0<navigator.userAgent.indexOf("Firefox")&&(He.firefox=!0),this._canvas=new s(e),this._scene=new ke(this._canvas,this),this.initializeHtmlAttributes(),this._parser=new Me,this.loadBlueprintIntoScene(e.innerHTML),this._controller=new r(e,this),this._controller.registerAction({ctrl:!0,keycode:"KeyC",callback:this.copyBlueprintSelectionToClipboard.bind(this)}),this._controller.registerAction({ctrl:!1,keycode:"Home",callback:this.recenterCamera.bind(this)}),this._controller.registerAction({ctrl:!0,keycode:"KeyV",callback:this.pasteClipboardContentToCanvas.bind(this)}),this._element.onpaste=e=>this.onPaste(e),window.addEventListener("resize",this.refresh.bind(this),!1)}get scene(){return this._scene}get canvas(){return this._canvas}static get isFirefox(){return this.firefox}getBlueprint(){let t=[];return this._scene.nodes.forEach(e=>t=[].concat(t,e.sourceText)),t.join("\n")}initializeHtmlAttributes(){this._element.style.outline="none";var e=this._element.getAttributeNode("data-klee-paste");this.allowPaste="true"==e?.value||!1}refresh(){this._element.width=this._element.offsetWidth,this._element.height=this._element.offsetHeight,this._scene.collectInteractables(),this._scene.updateLayout(),this._scene.refresh()}copyBlueprintSelectionToClipboard(){console.log("Copy selection");let t=[];return this._scene.nodes.filter(e=>e.selected).forEach(e=>t=[].concat(t,e.sourceText)),navigator.clipboard.writeText(t.join("\n")),!0}pasteClipboardContentToCanvas(e){if(this.allowPaste)return!He.isFirefox&&(console.log("Paste from clipboard"),navigator.clipboard.readText().then(e=>{e&&this.loadBlueprintIntoScene(e)}),!0)}onPaste(e){this.allowPaste&&(console.log("Paste from clipboard"),e=e.clipboardData.getData("text/plain"),this.loadBlueprintIntoScene(e))}loadBlueprintIntoScene(e){this._scene.unload();e=this._parser.parseBlueprint(e);this._scene.load(e),this.refresh(),this.recenterCamera()}recenterCamera(){return this._scene.camera.centerAbsolutePosition(this._scene.calculateCenterPoint()),this.refresh(),!0}static registerInstance(e,t){e.setAttribute("data-klee-instance",He.instances.length.toString()),He.instances.push(t)}static getInstance(e){e=e.getAttributeNode("data-klee-instance");if(e){e=Number.parseInt(e.value);if(!isNaN(e)&&e<He.instances.length)return He.instances[e]}}static createOrGet(e){var t=this.getInstance(e);if(void 0!==t)return t;t=new He(e);return He.registerInstance(e,t),t}}He.instances=[];class Ze{constructor(e,t){this.app=void 0!==t?t:He.createOrGet(e)}display(e){this.app.loadBlueprintIntoScene(e)}static getInstance(e){var t=He.getInstance(e);if(void 0!==t)return new Ze(e,t)}get value(){return this.app.getBlueprint()}}window.addEventListener("load",function(){document.querySelectorAll("canvas.klee").forEach(e=>{new Ze(e)})})}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;t=s[e]={exports:{}};return i[e](t,t.exports,l),t.exports}return o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(t,e){if(1&e&&(t=this(t)),8&e)return t;if("object"==typeof t&&t){if(4&e&&t.__esModule)return t;if(16&e&&"function"==typeof t.then)return t}var i=Object.create(null);l.r(i);var s={};r=r||[null,o({}),o([]),o(o)];for(var n=2&e&&t;"object"==typeof n&&!~r.indexOf(n);n=o(n))Object.getOwnPropertyNames(n).forEach(e=>s[e]=()=>t[e]);return s.default=()=>t,l.d(i,s),i},l.d=(e,t)=>{for(var i in t)l.o(t,i)&&!l.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l(741)})()});