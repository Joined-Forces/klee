!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Klee=e():t.Klee=e()}(self,(function(){return(()=>{"use strict";var t,e,i={724:(t,e,i)=>{i.r(e),i.d(e,{Klee:()=>Kt,get:()=>Wt,init:()=>zt});class s{constructor(t){this._element=t,this._context=this._element.getContext("2d",{alpha:!1}),this._PI_TIMES_TWO=2*Math.PI}getBoundingClientRect(){return this._element.getBoundingClientRect()}fillStyle(t){return this._context.fillStyle=t,this}strokeStyle(t){return this._context.strokeStyle=t,this}beginPath(){return this._context.beginPath(),this}closePath(){return this._context.closePath(),this}drawImage(t,e,i,s,n){return this._context.drawImage(t,e,i,s,n),this}roundedRectangle(t,e,i,s,n){let r,o,l,a;if(n instanceof Object){let t=n;r=t.radiusTopLeft,o=t.radiusTopRight,l=t.radiusBottomLeft,a=t.radiusBottomRight}else r=n,o=n,l=n,a=n;return this._context.beginPath(),this._context.moveTo(t+r,e),this._context.lineTo(t+i-o,e),this._context.quadraticCurveTo(t+i,e,t+i,e+o),this._context.lineTo(t+i,e+s-a),this._context.quadraticCurveTo(t+i,e+s,t+i-a,e+s),this._context.lineTo(t+l,e+s),this._context.quadraticCurveTo(t,e+s,t,e+s-l),this._context.lineTo(t,e+r),this._context.quadraticCurveTo(t,e,t+r,e),this._context.closePath(),this}lineTo(t,e){return this._context.lineTo(t,e),this}quadraticCurveTo(t,e,i,s){return this._context.quadraticCurveTo(t,e,i,s),this}fill(t,e){return t instanceof Path2D?this._context.fill(t,e):void 0!==t?this._context.fill(t):this._context.fill(),this}stroke(t){return null!=t?this._context.stroke(t):this._context.stroke(),this}clear(){return this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._element.width,this._element.height),this}translate(t,e){return this._context.translate(t,e),this}fillRect(t,e,i,s){return this._context.fillRect(t,e,i,s),this}strokeRect(t,e,i,s){return this._context.strokeRect(t,e,i,s),this}setLineDash(t){return this._context.setLineDash(t),this}fillCircle(t,e,i){return this._context.beginPath(),this._context.arc(t,e,i,0,this._PI_TIMES_TWO),this._context.fill(),this}strokeCircle(t,e,i){return this._context.beginPath(),this._context.arc(t,e,i,0,this._PI_TIMES_TWO),this._context.stroke(),this}fillText(t,e,i,s){return this._context.fillText(t,e,i,s),this}strokeText(t,e,i,s){return this._context.strokeText(t,e,i,s),this}shadow(t,e,i){return this._context.shadowOffsetX=t.x,this._context.shadowOffsetY=t.y,this._context.shadowBlur=e,this._context.shadowColor=i,this}lineWidth(t){return this._context.lineWidth=t,this}moveTo(t,e){return this._context.moveTo(t,e),this}bezierCurveTo(t,e,i,s,n,r){return this._context.bezierCurveTo(t,e,i,s,n,r),this}save(){return this._context.save(),this}restore(){return this._context.restore(),this}font(t){return this._context.font=t,this}textAlign(t){return this._context.textAlign=t,this}getContext(){return this._context}get width(){return this._element.width}get height(){return this._element.height}}class n{static checkIntersection(t,e,i,s){return this.absRect(t,e),this.absRect(i,s),t.x<i.x+s.x&&t.x+e.x>i.x&&t.y<i.y+s.y&&t.y+e.y>i.y}static absRect(t,e){e.x<0&&(t.x+=e.x,e.x=Math.abs(e.x)),e.y<0&&(t.y+=e.y,e.y=Math.abs(e.y))}}class r{constructor(t,e){this.x=t,this.y=e}add(t){return new r(this.x+t.x,this.y+t.y)}subtract(t){return new r(this.x-t.x,this.y-t.y)}divide(t){return new r(this.x/t.x,this.y/t.y)}multiply(t){return t instanceof r?new r(this.x*t.x,this.y*t.y):new r(this.x*t,this.y*t)}toString(){return`Vector2(x: ${this.x}, y: ${this.y})`}copy(){return new r(this.x,this.y)}}function o(t){const e=t;return void 0!==e.onMouseDown&&void 0!==e.onMouseUp&&void 0!==e.onMouseEnter&&void 0!==e.onMouseLeave&&void 0!==e.onMouseMove}var l,a,c;!function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"}(l||(l={}));class h{constructor(t,e){this._actions=[],this.hoveredControls=[],this.app=e,this._element=t,Vt.isFirefox&&(this._element.setAttribute("contenteditable",""),this._element.style.cursor="default",this._element.style.color="transparent"),t.tabIndex=0,t.onmousedown=t=>this.onMouseDown(t),t.onmouseup=t=>this.onMouseUp(t),t.onmousemove=t=>this.onMouseMove(t),t.onmouseenter=t=>this.onMouseEnter(t),t.onmouseleave=t=>this.onMouseLeave(t),t.onkeydown=t=>this.onKeydown(t),t.oncontextmenu=t=>this.onContextMenu(t),this.registerAction({ctrl:!0,keycode:"KeyA",callback:this.selectAllNodes.bind(this)})}registerAction(t){this._actions.push(t)}onKeydown(t){for(const e of this._actions.filter((e=>e.keycode===t.code)))e.ctrl===t.ctrlKey&&e.callback(t)&&t.preventDefault()}onMouseDown(t){this._mouseDownData={buttonType:t.button,position:this.getMousePosition(t)},this._mousePositionOfPreviousMove=this._mouseDownData.position;const e=this.getAbsoluteMousePosition(t);let i=this.getIntersectingControls(e,new r(0,0));i=i.sort(((t,e)=>t.ZIndex-e.ZIndex));for(let e of i)if(e.onMouseDown(t))break;for(let e of this.hoveredControls)i.indexOf(e)<0&&(this.hoveredControls.splice(this.hoveredControls.indexOf(e),1),o(e)&&e.onMouseLeave(t))}onMouseUp(t){const e=this.getMousePosition(t),i=this.getAbsoluteMousePosition(t);let s=!1,n=this.getIntersectingControls(i,new r(0,0));n=n.sort(((t,e)=>t.ZIndex-e.ZIndex));for(let e of n)if(o(e)&&(s=e.onMouseUp(t)))break;for(let e of this.hoveredControls)n.indexOf(e)<0&&(this.hoveredControls.splice(this.hoveredControls.indexOf(e),1),o(e)&&e.onMouseLeave(t));if(this._mouseDownData&&!s){const t=e.subtract(this._mouseDownData.position);0==t.x&&0==t.y&&(this.app.scene.nodes.forEach((t=>t.selected=!1)),this.selectIntersectingControls(i,new r(0,0)))}this._mouseDownData=null,this.app.scene.refresh()}onMouseMove(t){const e=this.getMousePosition(t),i=this.getAbsoluteMousePosition(t);if(this._mouseDownData){if(this._mouseDownData.buttonType===l.Right){const t=e.subtract(this._mousePositionOfPreviousMove);return this._mousePositionOfPreviousMove=e,this.app.scene.camera.moveRelative(t),this.app.scene.refresh(),!1}if(this._mouseDownData.buttonType===l.Left){const i=e.subtract(this._mouseDownData.position);this.app.scene.refresh();const s=this.getAbsoluteMouseDownPosition(t);return this.drawMouseSelection(s.x,s.y,i.x,i.y),this.selectIntersectingControls(s,i),!1}}let s=this.getIntersectingControls(i,new r(0,0));for(let e of s)this.hoveredControls.indexOf(e)<0&&(this.hoveredControls.push(e),o(e)&&e.onMouseEnter(t));s=s.sort(((t,e)=>t.ZIndex-e.ZIndex));for(let e of s)if(o(e)&&e.onMouseMove(t))break;for(let e of this.hoveredControls)s.indexOf(e)<0&&(this.hoveredControls.splice(this.hoveredControls.indexOf(e),1),o(e)&&e.onMouseLeave(t));return!1}onMouseEnter(t){0==t.buttons&&(this._mouseDownData=null)}onMouseLeave(t){if(this._mouseDownData&&this._mouseDownData.buttonType===l.Left)return this.app.scene.nodes.forEach((t=>t.selected=!1)),this.app.scene.refresh(),!1}onContextMenu(t){return t.preventDefault(),t.stopPropagation(),!1}drawMouseSelection(t,e,i,s){this.app.canvas.save().setLineDash([6]).strokeStyle("#fff").lineWidth(2).strokeRect(t,e,i,s).restore()}selectIntersectingControls(t,e){this.app.scene.nodes.forEach((t=>t.selected=!1));this.getIntersectingNodeControls(t,e).forEach((t=>t.selected=!0))}getIntersectingNodeControls(t,e){return this.app.scene.nodes.filter((i=>n.checkIntersection(t,e,i.position,i.size)))||[]}getIntersectingControls(t,e){return this.app.scene.interactables.filter((i=>n.checkIntersection(t,e,i.getAbsolutPosition(),i.size)))||[]}getAbsoluteMousePosition(t){const e=this.app.scene.camera.position,i=this.getMousePosition(t);return new r(i.x-e.x,i.y-e.y)}getAbsoluteMouseDownPosition(t){const e=this.app.scene.camera.position;return new r(this._mouseDownData.position.x-e.x,this._mouseDownData.position.y-e.y)}selectAllNodes(){return this.app.scene.nodes.forEach((t=>t.selected=!0)),this.app.scene.refresh(),!0}getMousePosition(t){let e=this._element.getBoundingClientRect();return new r(t.clientX-e.left,t.clientY-e.top)}}!function(t){t.delegate="delegate",t.exec="exec",t.object="object",t.int="int",t.int64="int64",t.string="string",t.text="text",t.float="float",t.struct="struct",t.class="class",t.bool="bool",t.name="name",t.wildcard="wildcard",t.byte="byte"}(a||(a={})),function(t){t[t.EGPD_Input=0]="EGPD_Input",t[t.EGPD_Output=1]="EGPD_Output"}(c||(c={}));class d extends class{}{constructor(t){super(),this.nodeName=t,this.direction=c.EGPD_Input}get isLinked(){return this.linkedTo&&this.linkedTo.length>0}get formattedName(){return this.hideName?"":this.friendlyName?this.friendlyName:this.name}get shouldDrawDefaultValueBox(){return!this.isLinked&&this.direction!==c.EGPD_Output&&null!=this.defaultValue}getUniqueName(){return this.nodeName+" "+this.id}}const p={K2_SetTimerDelegate:"Set Timer by Event",K2_SetTimer:"Set Timer by Function Name",K2_PauseTimer:"Pause Timer by Function Name",K2_ClearAndInvalidateTimerHandle:"Clear and Invalidate Timer by Handle",K2_ClearTimer:"Clear Timer by Function Name",K2_TimerExists:"Does Timer Exist by Function Name",K2_TimerExistsHandle:"Does Timer Exist by Handle",K2_GetTimerElapsedTime:"Get Timer Elapsed Time by Function Name",K2_GetTimerElapsedTimeHandle:"Get Timer Elapsed Time by Handle",K2_InvalidateTimerHandle:"Invalidate",K2_IsTimerActiveHandle:"Is Timer Active by Handle",K2_DestroyActor:"Destroy Actor"};function u(t){return(t=t||"").replace(/((?<=[a-z])[A-Z]+)/g," $1")}function _(t){return p[t]||t}function m(t){return function(t){return(t=t.trim()).charAt(0).toUpperCase()+t.slice(1)}(u(function(t){return t.replace(/^b(?=[A-Z])/g,"")}(t).replace(/[_]/g," ")))}function f(t){let e=Number(t);return isNaN(e)?t:Number.isInteger(e)?e+".0":e.toString()}const T=JSON.parse('{"/Script/Engine.ESpawnActorCollisionHandlingMethod":{"Undefined":"Default","AlwaysSpawn":"Always Spawn, Ignore Collisions","AdjustIfPossibleButAlwaysSpawn":"Try to Adjust Location, But Always Spawn","AdjustIfPossibleButDontSpawnIfColliding":"Try to Adjust Location, Don\'t Spawn If Still Colliding","DontSpawnIfColliding":"Do Not Spawn"},"/Script/Engine.ETraceTypeQuery":{"TraceTypeQuery1":"Visibility","TraceTypeQuery2":"Camera"},"/Script/Engine.ECanBeCharacterBase":{"ECB_Yes":"Yes","ECB_No":"No","ECB_Owner":"(Owner)"},"/Script/Engine.ECollisionChannel":{"ECC_WorldStatic":"WorldStatic","ECC_WorldDynamic":"WorldDynamic","ECC_Pawn":"Pawn","ECC_Visibility":"Visibility","ECC_Camera":"Camera","ECC_PhysicsBody":"PhysicsBody","ECC_Vehicle":"Vehicle","ECC_Destructible":"Destructible"},"/Script/UMG.ESlateVisibility":{"Visible":"Visible","Collapsed":"Collapsed","Hidden":"Hidden","HitTestInvisible":"Not Hit-Testable (Self & All Children)","SelfHitTestInvisible":"Not Hit-Testable (Self Only)"}}');var g,E,N,C,y,P,O,A=i.t(T,2);class x{static parseString(t){return t.replace(/(?<!\\)["']/g,"")}static stripLine(t){return t.replace("\t","").trim()}static parseColor(t){let e=(t=t.replace(/[()]/g,"")).split(","),i=[];for(let t of e){let e=t.split("="),s="A"!=e[0]?Math.floor(255*Number.parseFloat(e[1])):Number.parseFloat(e[1]);i.push(s)}return"rgba("+i.join(",")+")"}static getClassFriendlyName(t){const e=x.parseString(t),i=/(?<=\.)((?!_C$)\w)*/g.exec(e);return i?i[0]:t}static hidePinNames(t){t.forEach((t=>{if(t instanceof d==!1)return!1;t.hideName=!0}))}static configureFirstDelegatePinInHead(t){for(const e of t)if(e instanceof d&&e.direction===c.EGPD_Output&&e.category===a.delegate&&"Output Delegate"===e.name)return e.showInHead=!0,void(e.hideName=!0)}static getFirstClassNameFromPinProperties(t){for(const e of t)if(e instanceof d&&"Class"===e.name&&!e.isLinked)return e.defaultValue||"NONE"}static parseEnumValue(t,e){e=e.replace(/["']/g,"");let i=A[t];if(i){return i[e]||m(e)}return m(e)}}!function(t){t.KNOT="/Script/BlueprintGraph.K2Node_Knot",t.CALL_FUNCTION="/Script/BlueprintGraph.K2Node_CallFunction",t.IF_THEN_ELSE="/Script/BlueprintGraph.K2Node_IfThenElse",t.EXECUTION_SEQUENCE="/Script/BlueprintGraph.K2Node_ExecutionSequence",t.MULTI_GATE="/Script/BlueprintGraph.K2Node_MultiGate",t.VARIABLE_GET="/Script/BlueprintGraph.K2Node_VariableGet",t.VARIABLE_SET="/Script/BlueprintGraph.K2Node_VariableSet",t.EVENT="/Script/BlueprintGraph.K2Node_Event",t.CUSTOM_EVENT="/Script/BlueprintGraph.K2Node_CustomEvent",t.INPUT_AXIS_EVENT="/Script/BlueprintGraph.K2Node_InputAxisEvent",t.COMMENT="/Script/UnrealEd.EdGraphNode_Comment",t.INPUT_KEY="/Script/BlueprintGraph.K2Node_InputKey",t.CommutativeAssociativeBinaryOperator="/Script/BlueprintGraph.K2Node_CommutativeAssociativeBinaryOperator",t.DYNAMIC_CAST="/Script/BlueprintGraph.K2Node_DynamicCast",t.SWITCH_ENUM="/Script/BlueprintGraph.K2Node_SwitchEnum",t.MACRO_INSTANCE="/Script/BlueprintGraph.K2Node_MacroInstance",t.FUNCTION_ENTRY="/Script/BlueprintGraph.K2Node_FunctionEntry",t.FUNCTION_RESULT="/Script/BlueprintGraph.K2Node_FunctionResult",t.CALL_ARRAY_FUNCTION="/Script/BlueprintGraph.K2Node_CallArrayFunction",t.SELF="/Script/BlueprintGraph.K2Node_Self",t.GET_ARRAY_ITEM="/Script/BlueprintGraph.K2Node_GetArrayItem",t.MAKE_ARRAY="/Script/BlueprintGraph.K2Node_MakeArray",t.INPUT_TOUCH="/Script/BlueprintGraph.K2Node_InputTouch",t.GET_INPUT_AXIS_KEY_VALUE="/Script/BlueprintGraph.K2Node_GetInputAxisKeyValue",t.SET_FIELDS_IN_STRUCT="/Script/BlueprintGraph.K2Node_SetFieldsInStruct",t.BREAK_STRUCT="/Script/BlueprintGraph.K2Node_BreakStruct",t.MAKE_STRUCT="/Script/BlueprintGraph.K2Node_MakeStruct",t.SELECT="/Script/BlueprintGraph.K2Node_Select",t.TIMELINE="/Script/BlueprintGraph.K2Node_Timeline",t.SPAWN_ACTOR_FROM_CLASS="/Script/BlueprintGraph.K2Node_SpawnActorFromClass",t.TUNNEL="/Script/BlueprintGraph.K2Node_Tunnel",t.CREATE_WIDGET="/Script/UMGEditor.K2Node_CreateWidget",t.CREATE_OBJECT="/Script/BlueprintGraph.K2Node_GenericCreateObject"}(g||(g={}));class S{}S.NODE_FONT="12px sans-serif",S.NODE_HEADER_FONT="bold 12px sans-serif",S.NODE_BACKGROUND_COLOR="rgba(15,15,15,0.6)",S.NODE_TEXT_COLOR="rgb(240,240,240)",S.NODE_SUBTITLE_COLOR="rgb(170,170,170)",S.NODE_MATHFUNC_TITLE_FONT="bold 24px sans-serif",S.NODE_MATHFUNC_SUBTITLE_FONT="bold 12px sans-serif",S.NODE_MATHFUNC_TITLE_COLOR="rgb(142,142,142)",S.DEFAULT_VALUE_BOX_TEXT_PADDING=4,S.DEFAULT_VALUE_BOX_MARGIN_LEFT=8,S.DEFAULT_FUNC_BACKGROUND_COLOR="78, 117, 142",S.DEFAULT_FUNC_PURE_BACKGROUND_COLOR="92, 154, 87",S.DEFAULT_FUNC_ENTRY_BACKGROUND_COLOR="109, 19, 132",S.DEFAULT_BOX_HEIGHT=16,S.DEFAULT_BOX_RADIUS=2;class w{constructor(t,...e){"string"==typeof t?this.initializeFromString(t):"number"==typeof t&&e.length>=2&&(e.unshift(t),this.initializeFromComponentValues(e))}initializeFromString(t){if(t.startsWith("#"))this.R=Number.parseInt(t.substr(1,2),16),this.G=Number.parseInt(t.substr(3,2),16),this.B=Number.parseInt(t.substr(5,2),16),this.A=1,t.length>=9&&(this.A=Number.parseInt(t.substr(7,2),16));else if(t.startsWith("rgb")){let e=t.startsWith("rgba"),i=(t=t.replace(/[rgba()]/g,"")).split(",");this.R=Number.parseInt(i[0]),this.G=Number.parseInt(i[1]),this.B=Number.parseInt(i[2]),this.A=1,e&&(this.A=Number.parseFloat(i[3]))}}initializeFromComponentValues(t){this.R=t[0],this.G=t[1],this.B=t[2],this.A=1,t.length>3&&(this.A=t[3])}applyGamma(){this.R=Math.floor(255*Math.min(1,Math.max(0,Math.pow(this.R/255,1/2.2)))),this.G=Math.floor(255*Math.min(1,Math.max(0,Math.pow(this.G/255,1/2.2)))),this.B=Math.floor(255*Math.min(1,Math.max(0,Math.pow(this.B/255,1/2.2))))}darken(t){t=1-t,this.R=this.R*t,this.G=this.G*t,this.B=this.B*t}toRGBString(){return"rgb("+[this.R,this.G,this.B].join(",")+")"}toRGBAString(){return"rgba("+[this.R,this.G,this.B,this.A].join(",")+")"}toHexString(){let t="#";return t=("0"+this.R.toString(16)).slice(-2)+("0"+this.G.toString(16)).slice(-2)+("0"+this.B.toString(16)).slice(-2),t}toHexWithAlphaString(){let t="#";return t=("0"+this.R.toString(16)).slice(-2)+("0"+this.G.toString(16)).slice(-2)+("0"+this.B.toString(16)).slice(-2)+("0"+this.A.toString(16)).slice(-2),t}}!function(t){t.None="None",t.Array="Array",t.Set="Set",t.Map="Map"}(E||(E={}));class I{constructor(t,e,i){this.position=new r(t||0,e||0),this.zIndex=i||0}get position(){return this._position}set position(t){this._position=t}initControl(t){this.app=t,this.initialize()}initialize(){}get size(){return new r(this.width,this.height)}get ZIndex(){return this.zIndex}set ZIndex(t){this.zIndex=t}}class D extends I{constructor(t,e,i){super(t,e,i),this.padding={top:0,right:0,bottom:0,left:0},this.controlSize=new r(0,0),this.visible=!0}get parent(){return this.controlParent}set parent(t){this.controlParent=t}draw(t){this.visible&&(t.save(),t.translate(Math.round(this.position.x),Math.round(this.position.y)),this.onDraw(t),t.restore())}refreshLayout(){this.controlSize=this.getCalculatedSize(),this.setDirty(!0),this.controlParent&&this.controlParent.refreshLayout()}getCalculatedSize(){let t=this.size;return t.x+=this.padding.left+this.padding.right,t.y+=this.padding.top+this.padding.bottom,t}get size(){let t=this.controlSize.copy();return t.x=Math.max(t.x,this.desiredWidth||0),t.y=Math.max(t.y,this.desiredHeight||0),t.x=Math.max(t.x,this.minWidth||0),t.y=Math.max(t.y,this.minHeight||0),t.x=this.width?this.width:t.x,t.y=this.height?this.height:t.y,t}setDirty(t){this.dirty=t}isDirty(){return this.dirty}getAbsolutPosition(){let t=new r(0,0);return void 0!==this.controlParent&&(t=this.controlParent.getAbsolutPosition(),t.y+=this.controlParent.padding.top,t.x+=this.controlParent.padding.left),t.x+=this.position.x,t.y+=this.position.y,t}findParent(t){if(void 0!==this.controlParent)return this.controlParent instanceof t?this.controlParent:this.controlParent.findParent(t)}}!function(t){t.VECTOR="/Script/CoreUObject.Vector",t.ROTATOR="/Script/CoreUObject.Rotator",t.LatentActionInfo="/Script/Engine.LatentActionInfo",t.LINEAR_COLOR="/Script/CoreUObject.LinearColor",t.VECTOR2D="/Script/CoreUObject.Vector2D",t.TRANSFORM="/Script/CoreUObject.Transform"}(N||(N={}));class b{static getPinColor(t){return this.getPinColorByCategory(t.category,t.subCategoryObject.class)}static getPinColorByCategory(t,e){switch(t){case a.delegate:return"rgb(255, 56, 56)";case a.bool:return"rgb(146, 1, 1)";case a.float:return"rgb(158, 250, 68)";case a.int:return"rgb(30, 226, 174)";case a.int64:return"rgb(171, 226, 174)";case a.byte:return"rgb(0, 101, 92)";case a.struct:return{[N.VECTOR]:"rgb(253, 200, 35)",[N.ROTATOR]:"rgb(159, 178, 253)",[N.TRANSFORM]:"rgb(230, 105, 2)"}[e]||"rgb(0, 88, 200)";case a.name:return"rgb(150, 97, 185)";case a.string:return"rgb(254, 0, 212)";case a.object:return"rgb(0, 133, 191)";case a.class:return"rgb(88, 0, 187)";case a.wildcard:return"rgb(128, 121, 121)";case a.text:return"rgb(230, 123, 169)";case a.byte:return"rgb(0, 110, 100)";default:return"rgb(230, 230, 230)"}}}class R{}R.PIN_ARRAY_CONNECTED="M9.482,10.473l-2.964,-0l0,3.024l2.964,0l-0,-3.024Zm-3.969,-0l-2.963,-0l-0,3.024l2.963,0l0,-3.024Zm7.937,-0l-2.963,-0l-0,3.024l2.963,0l0,-3.024Zm-3.968,-4.027l-2.964,0l0,3.025l2.964,-0l-0,-3.025Zm-3.969,0l-2.963,0l-0,3.025l2.963,-0l0,-3.025Zm7.937,0l-2.963,0l-0,3.025l2.963,-0l0,-3.025Zm-7.937,-4.026l-2.963,-0l-0,3.024l2.963,0l0,-3.024Zm3.969,-0l-2.964,-0l0,3.024l2.964,0l-0,-3.024Zm3.968,-0l-2.963,-0l-0,3.024l2.963,0l0,-3.024Z",R.PIN_ARRAY_DISCONNECTED="M9.482,10.473l-2.964,-0l0,3.024l2.964,0l-0,-3.024Zm-3.969,-0l-2.963,-0l-0,3.024l2.963,0l0,-3.024Zm7.937,-0l-2.963,-0l-0,3.024l2.963,0l0,-3.024Zm-7.937,-4.027l-2.963,0l-0,3.025l2.963,-0l0,-3.025Zm7.937,0l-2.963,0l-0,3.025l2.963,-0l0,-3.025Zm-7.937,-4.026l-2.963,-0l-0,3.024l2.963,0l0,-3.024Zm3.969,-0l-2.964,-0l0,3.024l2.964,0l-0,-3.024Zm3.968,-0l-2.963,-0l-0,3.024l2.963,0l0,-3.024Z",R.PIN_SET="M6.966,1.985l-0,2.034l-1.053,-0c-0.494,-0 -0.894,0.4 -0.894,0.894l-0,0.07l-0.013,-0c-0,1.187 -0.516,2.255 -1.336,2.992c0.82,0.736 1.336,1.804 1.336,2.992l-0.002,0.05l0.015,0l-0,0.07c-0,0.494 0.4,0.894 0.894,0.894l1.053,0l-0,1.999l-1.469,-0c-1.382,-0 -2.504,-1.122 -2.504,-2.503l0,-0.46c0,-1.11 -0.901,-2.011 -2.011,-2.011l0,-2.012c1.11,-0 2.011,-0.901 2.011,-2.011l0,-0.495c0,-1.381 1.122,-2.503 2.504,-2.503l1.469,0Zm2.002,0l1.535,0c1.382,0 2.504,1.122 2.504,2.503l-0,0.495c-0,1.11 0.901,2.011 2.011,2.011l-0,2.012c-1.11,0 -2.011,0.901 -2.011,2.011l-0,0.46c-0,1.381 -1.122,2.503 -2.504,2.503l-1.535,-0l0,-1.999l1.119,0c0.494,0 0.894,-0.4 0.894,-0.894l0,-0.07l0.013,0c0,-1.194 0.522,-2.268 1.351,-3.005c-0.829,-0.737 -1.351,-1.811 -1.351,-3.006l0.001,-0.023l-0.014,-0l0,-0.07c0,-0.494 -0.4,-0.894 -0.894,-0.894l-1.119,-0l0,-2.034Z",R.PIN_MAP_KEY="M5.513,10.473l-2.963,-0l-0,3.024l2.963,0l0,-3.024Zm0,-4.027l-2.963,0l-0,3.025l2.963,-0l0,-3.025Zm0,-4.026l-2.963,-0l-0,3.024l2.963,0l0,-3.024Z",R.PIN_MAP_VALUE="M13.45,10.473l-6.932,-0l0,3.024l6.932,0l0,-3.024Zm0,-4.027l-6.932,0l0,3.025l6.932,-0l0,-3.025Zm0,-4.026l-6.932,-0l0,3.024l6.932,0l0,-3.024Z",R.PIN_REFERENCE_CONNECTED="M13.45,8.001l-5.45,-5.451l-5.45,5.451l5.45,5.45l5.45,-5.45Z",R.PIN_REFERENCE_DISCONNECTED="M13.45,8.001l-5.45,-5.451l-5.45,5.451l5.45,5.45l5.45,-5.45Zm-2.596,-0l-2.854,-2.855l-2.854,2.855l2.854,2.854l2.854,-2.854Z",R.DEFAULT_VALUE_BOOL_TRUE="M6.42,8.655l-1.177,-1.177c-0.382,-0.382 -1.002,-0.382 -1.383,-0c-0.382,0.381 -0.382,1.001 -0,1.383l1.853,1.853c0.195,0.194 0.451,0.29 0.707,0.285c0.256,0.005 0.513,-0.091 0.707,-0.285l5.013,-5.013c0.382,-0.382 0.382,-1.002 0,-1.383c-0.381,-0.382 -1.001,-0.382 -1.383,-0l-4.337,4.337Z",R.FUNCTION="M12.962,3.932c0.88,-1.811 -0.139,-2.954 -1.879,-2.949c-3.498,0.01 -3.564,2.488 -4.093,5.112l-1.868,-0.077l-0.287,1.435l1.907,0.114l-0.837,5.243c0,-0 -0.292,1.924 -1.164,1.805c-0.978,-0.133 -0.602,-1.396 -0.602,-1.396l-1.174,-0.429c-0.553,1.226 -0.293,3.209 1.87,3.21c3.352,0.001 3.163,-1.918 4.352,-8.227l1.697,0.093l0.435,-1.485l-1.849,-0.089c0.501,-2.285 0.48,-4.128 1.849,-3.868c0.618,0.118 0.249,1.508 0.249,1.508l1.394,-0Z",R.MAKE_STRUCT="M1.121,16l-1.121,-1.121l2.332,-2.332l-1.778,-0l-0,-1.586l4.485,-0l0,4.485l-1.586,0l0,-1.778l-2.332,2.332Zm12.316,-9.213c0,-0.606 -0.492,-1.098 -1.097,-1.098l-7.824,0c-0.606,0 -1.098,0.492 -1.098,1.098l-0,2.196c-0,0.606 0.492,1.098 1.098,1.098l7.824,-0c0.605,-0 1.097,-0.492 1.097,-1.098l0,-2.196Zm-13.437,-5.666l1.121,-1.121l2.332,2.332l0,-1.778l1.586,-0l0,4.485l-4.485,0l-0,-1.586l1.778,0l-2.332,-2.332Z",R.BREAK_STRUCT="M11.011,12.082l1.122,-1.121l2.332,2.332l-0,-1.778l1.585,-0l0,4.485l-4.485,-0l0,-1.586l1.778,0l-2.332,-2.332Zm2.426,-5.237c0,-0.606 -0.492,-1.098 -1.097,-1.098l-7.824,-0c-0.606,-0 -1.098,0.492 -1.098,1.098l-0,2.195c-0,0.606 0.492,1.098 1.098,1.098l7.824,0c0.605,0 1.097,-0.492 1.097,-1.098l0,-2.195Zm-1.358,-1.803l-1.121,-1.121l2.332,-2.332l-1.779,0l0,-1.586l4.486,0l-0,4.486l-1.586,-0l-0,-1.779l-2.332,2.332Z",R.EVENT="M15.475,9.212c0.669,-0.669 0.669,-1.755 -0,-2.424l-6.263,-6.263c-0.669,-0.669 -1.755,-0.669 -2.424,0l-6.263,6.263c-0.669,0.669 -0.669,1.755 0,2.424l6.263,6.263c0.669,0.669 1.755,0.669 2.424,-0l6.263,-6.263Zm-11.195,1.194c-0.116,-0 -0.227,-0.046 -0.309,-0.128c-0.082,-0.082 -0.128,-0.193 -0.128,-0.309c0,-0.923 0,-3.057 0,-3.947c0,-0.106 0.042,-0.207 0.117,-0.282c0.075,-0.075 0.177,-0.118 0.283,-0.118c0.95,0 3.261,0 3.261,0l0,-3.552c0,-0.151 0.09,-0.287 0.228,-0.348c0.138,-0.06 0.298,-0.033 0.409,0.069c1.527,1.411 5.35,4.945 6.44,5.951c0.076,0.071 0.119,0.169 0.119,0.272c-0,0.103 -0.043,0.202 -0.119,0.272c-1.081,0.999 -4.856,4.487 -6.405,5.919c-0.117,0.108 -0.286,0.136 -0.432,0.073c-0.146,-0.064 -0.24,-0.208 -0.24,-0.367c0,-1.294 0,-3.505 0,-3.505l-3.224,-0Z",R.CUSTOM_EVENT="M15.475,9.212c0.669,-0.669 0.669,-1.755 -0,-2.424l-6.263,-6.263c-0.669,-0.669 -1.755,-0.669 -2.424,0l-6.263,6.263c-0.669,0.669 -0.669,1.755 0,2.424l6.263,6.263c0.669,0.669 1.755,0.669 2.424,-0l6.263,-6.263Zm-11.195,1.194c-0.116,-0 -0.227,-0.046 -0.309,-0.128c-0.082,-0.082 -0.128,-0.193 -0.128,-0.309c0,-0.923 0,-3.057 0,-3.947c0,-0.106 0.042,-0.207 0.117,-0.282c0.075,-0.075 0.177,-0.118 0.283,-0.118c0.95,0 3.261,0 3.261,0l0,-3.552c0,-0.151 0.09,-0.287 0.228,-0.348c0.138,-0.06 0.298,-0.033 0.409,0.069c1.527,1.411 5.35,4.945 6.44,5.951c0.076,0.071 0.119,0.169 0.119,0.272c-0,0.103 -0.043,0.202 -0.119,0.272c-1.081,0.999 -4.856,4.487 -6.405,5.919c-0.117,0.108 -0.286,0.136 -0.432,0.073c-0.146,-0.064 -0.24,-0.208 -0.24,-0.367c0,-1.294 0,-3.505 0,-3.505l-3.224,-0Zm6.96,-4.087c-0.446,-0.446 -1.051,-0.697 -1.682,-0.697c-1.313,0 -2.378,1.066 -2.378,2.379c-0,1.313 1.065,2.378 2.378,2.378c0.631,0 1.236,-0.25 1.682,-0.696l-0.841,-0.841c-0.223,0.223 -0.526,0.348 -0.841,0.348c-0.656,0 -1.189,-0.533 -1.189,-1.189c-0,-0.656 0.533,-1.189 1.189,-1.189c0.315,-0 0.618,0.125 0.841,0.348l0.841,-0.841Z",R.BRANCH="M10.996,1.917l0,-1.917l3.956,2.482l-3.956,2.482l0,-1.818l-1.257,0l-0.125,0.002c-2.623,0.066 -4.729,2.213 -4.729,4.852c0,2.681 2.173,4.854 4.854,4.854l1.257,-0l0,-1.818l3.956,2.482l-3.956,2.482l0,-1.917l-1.257,0c-3.022,0 -5.529,-2.202 -6.002,-5.089l-2.755,-0l0,-1.988l2.755,0c0.473,-2.887 2.98,-5.089 6.002,-5.089l1.257,-0Z",R.SEQUENCE="M4.975,11.974l-0,-3.015l3.025,-0l0,-1.988l-3.025,-0l-0,-3.015l3.025,-0l0,-1.989l-5.014,0l0,5.039l-3.025,-0l0,1.988l3.025,0l0,4.968l5.014,0l-0,-1.988l-3.025,-0Zm4.36,-0l-0,1.988l2.018,0l-0,-1.988l-2.018,-0Zm-0,-5.003l-0,1.988l4.036,-0l-0,-1.988l-4.036,-0Zm-0,-5.004l-0,1.989l5.617,-0l-0,-1.989l-5.617,0Z",R.LOOP="M5.952,2.997l0,-2.041l4.857,3.472l-4.857,3.473l0,-2.428c-1.902,0.046 -3.433,1.606 -3.433,3.52c0,1.944 1.579,3.522 3.522,3.522l3.918,-0c1.943,-0 3.522,-1.578 3.522,-3.522c-0,-1.651 -1.138,-3.037 -2.672,-3.418l0,-2.524c2.929,0.393 5.191,2.905 5.191,5.942c0,3.31 -2.687,5.997 -5.997,5.997l-4.006,0c-3.31,0 -5.997,-2.687 -5.997,-5.997c0,-3.295 2.663,-5.973 5.952,-5.996Z",R.GATE="M0.982,2.984l0,10.004l13.97,-0l-0,-10.004l-13.97,0Zm11.496,8.493l-4.538,-2.756l-5.424,-0l-0,2.756l9.962,-0Zm-2.065,-2.756l3.005,1.824l0,-1.824l-3.005,-0Zm-7.897,-1.502l2.951,-0l-2.951,-1.792l-0,1.792Zm0.939,-2.724l4.485,2.724l5.478,-0l0,-2.724l-9.963,0Z",R.FLIPFLOP="M10.251,14.01l4.701,-10.034l-0,-2.993l-4.701,10.034l-3.977,-10.034l-5.292,10.034l0,2.993l5.292,-10.034l3.977,10.034Z",R.DO_N="M0.982,10.143l0,-2.242l10.492,0l-0.903,-0.902l1.179,-1.179l3.202,3.202l-3.202,3.202l-1.179,-1.178l0.903,-0.903l-10.492,-0Zm6.017,-7.805l1.981,2.627l1.023,-0l-0,-3.982l-1.023,-0l0,2.627l-1.981,-2.627l-1.022,-0l-0,3.982l1.022,-0l-0,-2.627Z",R.DO_ONCE="M0.982,10.143l0,-2.242l10.492,0l-0.903,-0.902l1.179,-1.179l3.202,3.202l-3.202,3.202l-1.179,-1.178l0.903,-0.903l-10.492,-0Zm6.045,-9.16l0.973,-0l0,4.005l0.988,0l0,1.002l-2.983,-0l0,-1.002l1.002,0l-0,-2.002l-1.002,-0l0,-0.981c0.564,-0 1.022,-0.458 1.022,-1.022Z",R.SWITCH="M4.975,11.974l-0,-3.015l3.025,-0l0,-1.988l-3.025,-0l-0,-3.015l3.025,-0l0,-1.989l-5.014,0l0,5.039l-3.025,-0l0,1.988l3.025,0l0,4.968l5.014,0l-0,-1.988l-3.025,-0Zm4.983,-7.935l0,-2.094l2.817,-0l-0.875,-0.875l1.069,-1.07l2.992,2.992l-2.992,2.991l-1.069,-1.069l0.875,-0.875l-2.817,-0Z",R.CAST="M5.22,9.035l-3.249,2.233l0,-5.509l3.261,2.241l4.768,0l-0,-3.001l4.952,3.515l-4.952,3.515l-0,-2.994l-4.78,0Z",R.SELECT="M8,6.971l0,-5.004l-6.005,0l0,1.989l4.017,-0l-0,3.015l-4.017,-0l0,1.988l4.017,-0l-0,3.015l-4.017,-0l0,1.988l4.017,0l-0,0.035l1.988,0l0,-5.038l1.017,-0l-0,-1.988l-1.017,-0Zm3.966,2.074l-1.956,-0l0,-2.09l1.956,0l0,-1.941l1.048,0l2.986,2.986l-2.986,2.986l-1.048,-0l0,-1.941Z",R.INPUT_KEY="M9.263,12.728c-0,-0.247 -0.201,-0.447 -0.447,-0.447l-2.566,-0c-0.247,-0 -0.447,0.2 -0.447,0.447l0,2.619c0,0.247 0.2,0.447 0.447,0.447l2.566,0c0.246,0 0.447,-0.2 0.447,-0.447l-0,-2.619Zm3.923,-0c-0,-0.247 -0.2,-0.447 -0.447,-0.447l-2.566,-0c-0.246,-0 -0.447,0.2 -0.447,0.447l0,2.619c0,0.247 0.201,0.447 0.447,0.447l2.566,0c0.247,0 0.447,-0.2 0.447,-0.447l-0,-2.619Zm-5.429,-4.005c-0,-0.247 -0.201,-0.447 -0.447,-0.447l-2.566,-0c-0.246,-0 -0.447,0.2 -0.447,0.447l0,2.619c0,0.247 0.201,0.447 0.447,0.447l2.566,-0c0.246,-0 0.447,-0.2 0.447,-0.447l-0,-2.619Zm7.892,-0c-0,-0.247 -0.201,-0.447 -0.448,-0.447l-2.565,-0c-0.247,-0 -0.447,0.2 -0.447,0.447l0,2.619c0,0.247 0.2,0.447 0.447,0.447l2.565,-0c0.247,-0 0.448,-0.2 0.448,-0.447l-0,-2.619Zm-11.838,-0c-0,-0.247 -0.2,-0.447 -0.447,-0.447l-2.565,-0c-0.247,-0 -0.448,0.2 -0.448,0.447l0,2.619c0,0.247 0.201,0.447 0.448,0.447l2.565,-0c0.247,-0 0.447,-0.2 0.447,-0.447l-0,-2.619Zm7.892,-0c-0,-0.247 -0.201,-0.447 -0.447,-0.447l-2.566,-0c-0.246,-0 -0.447,0.2 -0.447,0.447l0,2.619c0,0.247 0.201,0.447 0.447,0.447l2.566,-0c0.246,-0 0.447,-0.2 0.447,-0.447l-0,-2.619Zm-4.918,-4.005c0,-0.247 -0.2,-0.448 -0.447,-0.448l-2.565,0c-0.247,0 -0.447,0.201 -0.447,0.448l-0,2.619c-0,0.246 0.2,0.447 0.447,0.447l2.565,-0c0.247,-0 0.447,-0.201 0.447,-0.447l0,-2.619Zm3.938,-0c0,-0.247 -0.2,-0.448 -0.447,-0.448l-2.565,0c-0.247,0 -0.447,0.201 -0.447,0.448l-0,2.619c-0,0.246 0.2,0.447 0.447,0.447l2.565,-0c0.247,-0 0.447,-0.201 0.447,-0.447l0,-2.619Zm-2.966,-4.065c-0,-0.247 -0.201,-0.447 -0.447,-0.447l-2.566,-0c-0.246,-0 -0.447,0.2 -0.447,0.447l0,2.619c0,0.247 0.201,0.447 0.447,0.447l2.566,0c0.246,0 0.447,-0.2 0.447,-0.447l-0,-2.619Zm-3.946,0c-0,-0.247 -0.2,-0.447 -0.447,-0.447l-2.565,-0c-0.247,-0 -0.448,0.2 -0.448,0.447l0,2.619c0,0.247 0.201,0.447 0.448,0.447l2.565,0c0.247,0 0.447,-0.2 0.447,-0.447l-0,-2.619Zm7.892,0c-0,-0.247 -0.201,-0.447 -0.447,-0.447l-2.566,-0c-0.246,-0 -0.447,0.2 -0.447,0.447l0,2.619c0,0.247 0.201,0.447 0.447,0.447l2.566,0c0.246,0 0.447,-0.2 0.447,-0.447l-0,-2.619Z",R.INPUT_GAMEPAD="M10.506,5.016l0,-0.246c0,-0.135 0.111,-0.245 0.246,-0.245l1.507,-0c0.136,-0 0.246,0.11 0.246,0.245l-0,0.701c0.632,0.356 1.144,0.99 1.498,1.729c0.619,1.289 1.706,5.78 -0.433,5.81c-1.305,0.018 -1.934,-1.533 -3.13,-3.351l-4.88,-0c-1.196,1.818 -1.825,3.369 -3.13,3.351c-2.139,-0.03 -1.052,-4.521 -0.433,-5.81c0.354,-0.739 0.866,-1.373 1.498,-1.729l0,-0.701c0,-0.135 0.11,-0.245 0.246,-0.245l1.507,-0c0.135,-0 0.246,0.11 0.246,0.245l-0,0.246l5.012,-0Zm0.788,2.477c-0.251,0 -0.439,0.198 -0.42,0.442c0.019,0.244 0.238,0.442 0.489,0.442c0.251,0 0.439,-0.198 0.42,-0.442c-0.019,-0.244 -0.238,-0.442 -0.489,-0.442Zm-6.834,0c0.251,0 0.439,0.198 0.42,0.442c-0.019,0.244 -0.238,0.442 -0.489,0.442c-0.251,0 -0.439,-0.198 -0.42,-0.442c0.019,-0.244 0.238,-0.442 0.489,-0.442Zm7.555,-0.735c-0.251,0 -0.44,0.198 -0.421,0.442c0.019,0.244 0.238,0.442 0.489,0.442c0.251,0 0.44,-0.198 0.421,-0.442c-0.019,-0.244 -0.238,-0.442 -0.489,-0.442Zm-1.633,0c-0.251,0 -0.439,0.198 -0.42,0.442c0.019,0.244 0.238,0.442 0.489,0.442c0.251,0 0.439,-0.198 0.42,-0.442c-0.019,-0.244 -0.238,-0.442 -0.489,-0.442Zm-6.643,0c0.251,0 0.439,0.198 0.42,0.442c-0.019,0.244 -0.238,0.442 -0.489,0.442c-0.251,0 -0.439,-0.198 -0.42,-0.442c0.019,-0.244 0.238,-0.442 0.489,-0.442Zm1.633,0c0.25,0 0.439,0.198 0.42,0.442c-0.019,0.244 -0.238,0.442 -0.489,0.442c-0.251,0 -0.439,-0.198 -0.42,-0.442c0.019,-0.244 0.238,-0.442 0.489,-0.442Zm5.731,-0.71c-0.251,0 -0.439,0.198 -0.42,0.442c0.019,0.244 0.238,0.442 0.489,0.442c0.25,0 0.439,-0.198 0.42,-0.442c-0.019,-0.244 -0.238,-0.442 -0.489,-0.442Zm-6.452,0c0.251,0 0.439,0.198 0.42,0.442c-0.019,0.244 -0.238,0.442 -0.489,0.442c-0.251,0 -0.439,-0.198 -0.42,-0.442c0.019,-0.244 0.238,-0.442 0.489,-0.442Z",R.INPUT_TOUCH="M7.717,11.585c-0,-0.332 -0.27,-0.601 -0.601,-0.601l-5.533,-0c-0.332,-0 -0.601,0.269 -0.601,0.601l0,2.804c0,0.332 0.269,0.601 0.601,0.601l5.533,0c0.331,0 0.601,-0.269 0.601,-0.601l-0,-2.804Zm7.301,-0c-0,-0.332 -0.269,-0.601 -0.601,-0.601l-5.533,-0c-0.331,-0 -0.601,0.269 -0.601,0.601l0,2.804c0,0.332 0.27,0.601 0.601,0.601l5.533,0c0.332,0 0.601,-0.269 0.601,-0.601l-0,-2.804Zm-0,-10.128c-0,-0.262 -0.212,-0.474 -0.474,-0.474l-13.088,-0c-0.262,-0 -0.474,0.212 -0.474,0.474l0,8.531c0,0.262 0.212,0.474 0.474,0.474l13.088,0c0.262,0 0.474,-0.212 0.474,-0.474l-0,-8.531Zm-7.018,0.527c2.063,0 3.738,1.675 3.738,3.738c0,2.064 -1.675,3.739 -3.738,3.739c-2.063,-0 -3.738,-1.675 -3.738,-3.739c-0,-2.063 1.675,-3.738 3.738,-3.738Zm0,0.603c1.73,-0 3.135,1.405 3.135,3.135c0,1.731 -1.405,3.136 -3.135,3.136c-1.73,-0 -3.135,-1.405 -3.135,-3.136c-0,-1.73 1.405,-3.135 3.135,-3.135Z",R.MOUSE="M2.706,6.758c1.309,-0.436 3.204,-0.718 5.294,-0.718c1.872,-0 3.587,0.227 4.865,0.587c0.006,0.446 0.006,0.905 0.006,1.373c-0,4.415 -2.719,8 -4.881,8c-2.162,0 -5.299,-3.585 -5.299,-8c0,-0.423 0.004,-0.838 0.015,-1.242Zm5.02,-6.755l0,1.879c-0.49,0.309 -0.854,1.062 -0.854,1.93c-0,0.669 0.216,1.268 0.538,1.65c-1.863,0.052 -3.52,0.347 -4.685,0.791c0.16,-3.503 1.016,-6.148 5.001,-6.25Zm0.527,0.001c3.916,0.117 4.511,2.677 4.602,6.102c-1.133,-0.363 -2.629,-0.6 -4.285,-0.645c0.322,-0.381 0.537,-0.981 0.537,-1.649c0,-0.868 -0.364,-1.621 -0.854,-1.93l-0,-1.878Zm-0.511,2.184l0.495,0c0.195,0.43 0.33,1.005 0.33,1.624c0,0.628 -0.139,1.212 -0.339,1.643c-0.076,-0.001 -0.152,-0.001 -0.228,-0.001c-0.083,-0 -0.166,0 -0.249,0.001c-0.2,-0.431 -0.339,-1.015 -0.339,-1.643c-0,-0.619 0.135,-1.194 0.33,-1.624Z",R.PILL="M15.018,8.973c-0,-1.637 -1.329,-2.966 -2.966,-2.966l-8.104,-0c-1.637,-0 -2.966,1.329 -2.966,2.966c0,1.637 1.329,2.966 2.966,2.966l8.104,0c1.637,0 2.966,-1.329 2.966,-2.966Z",R.CONSTRUCT="M14.496,5.478c-0.086,0.02 -0.176,0.03 -0.268,0.03l-12.456,-0c-0.092,-0 -0.182,-0.01 -0.268,-0.03l-0,7.663c-0,0.463 0.376,0.839 0.839,0.839l11.314,-0c0.463,-0 0.839,-0.376 0.839,-0.839l0,-7.663Zm0.522,-3.484c-0,-0.558 -0.453,-1.011 -1.012,-1.011l-12.012,-0c-0.559,-0 -1.012,0.453 -1.012,1.011l0,2.024c0,0.558 0.453,1.011 1.012,1.011l12.012,0c0.559,0 1.012,-0.453 1.012,-1.011l-0,-2.024Z",R.TIMER="M8,0.983c3.873,-0 7.018,3.138 7.018,7.004c-0,3.865 -3.145,7.003 -7.018,7.003c-3.873,0 -7.018,-3.138 -7.018,-7.003c0,-3.866 3.145,-7.004 7.018,-7.004Zm0,1.532c3.026,0 5.483,2.452 5.483,5.472c-0,3.019 -2.457,5.471 -5.483,5.471c-3.026,0 -5.483,-2.452 -5.483,-5.471c0,-3.02 2.457,-5.472 5.483,-5.472Zm-0.768,5.099l-0.001,0.012l0,0.748c0,0.206 0.168,0.374 0.374,0.374l4.464,0c0.206,0 0.374,-0.168 0.374,-0.374l-0,-0.748c-0,-0.206 -0.168,-0.374 -0.374,-0.374l-3.3,-0l-0,-2.693c-0,-0.212 -0.173,-0.384 -0.385,-0.384l-0.768,-0c-0.212,-0 -0.385,0.172 -0.385,0.384l0,3.043l0.001,0.012Z",R.MAKE_ARRAY="M0.893,16l-0.893,-0.893l1.857,-1.856l-1.416,-0l-0,-1.263l3.571,0l-0,3.571l-1.263,0l0,-1.416l-1.856,1.857Zm11.086,-5.497l-3.003,0l-0,3.012l3.003,-0l-0,-3.012Zm-4.022,0l-3.003,0l0,3.012l3.003,-0l0,-3.012Zm8.043,0l-3.003,0l-0,3.012l3.003,-0l0,-3.012Zm-4.021,-4.009l-3.003,0l-0,3.012l3.003,-0l-0,-3.012Zm-4.022,0l-3.003,0l0,3.012l3.003,-0l0,-3.012Zm8.043,0l-3.003,0l-0,3.012l3.003,-0l-0,-3.012Zm-8.043,-4.009l-3.003,0l0,3.012l3.003,-0l0,-3.012Zm4.022,0l-3.003,0l-0,3.012l3.003,-0l-0,-3.012Zm4.021,0l-3.003,0l-0,3.012l3.003,-0l-0,-3.012Zm-16,-1.599l0.886,-0.886l1.843,1.843l0,-1.405l1.254,-0l-0,3.545l-3.545,-0l-0,-1.254l1.405,0l-1.843,-1.843Z",R.SPAWN_ACTOR="M7.612,0.994c-0.329,0.393 -0.306,0.98 0.064,1.35l1.26,1.259l-1.686,0c-0.561,0 -1.016,0.456 -1.016,1.017c-0,0.561 0.455,1.017 1.016,1.017l1.684,-0l-1.258,1.258c-0.395,0.395 -0.395,1.035 -0,1.43c0.394,0.394 1.035,0.394 1.429,-0l1.259,-1.259l-0,1.777c-0,0.561 0.455,1.016 1.017,1.016c0.561,0 1.016,-0.455 1.016,-1.016l0,-1.778l1.26,1.26c0.37,0.369 0.955,0.392 1.349,0.065c-0.209,3.678 -3.268,6.6 -7.006,6.6c-3.873,0 -7.018,-3.138 -7.018,-7.003c0,-3.736 2.937,-6.793 6.63,-6.993Zm3.292,7.771c0,0.263 0.214,0.476 0.477,0.476c0.262,0 0.476,-0.213 0.476,-0.476l-0,-2.034c-0,-0.262 -0.214,-0.476 -0.476,-0.476c-0.263,0 -0.477,0.214 -0.477,0.476l0,2.034Zm3.071,-0.877c0.185,0.185 0.487,0.185 0.673,-0c0.186,-0.186 0.186,-0.488 -0,-0.674l-1.438,-1.438c-0.186,-0.186 -0.488,-0.186 -0.673,0c-0.186,0.186 -0.186,0.488 -0,0.674l1.438,1.438Zm-3.751,-1.438c0.186,-0.186 0.186,-0.488 0,-0.674c-0.185,-0.186 -0.487,-0.186 -0.673,0l-1.438,1.438c-0.186,0.186 -0.186,0.488 0,0.674c0.186,0.185 0.488,0.185 0.674,-0l1.437,-1.438Zm4.387,-0.813c0.125,0.346 0.222,0.705 0.289,1.074l-1.075,-1.074l0.786,-0Zm-3.23,-2.034c0.561,0 1.016,0.456 1.016,1.017c0,0.561 -0.455,1.017 -1.016,1.017c-0.562,-0 -1.017,-0.456 -1.017,-1.017c-0,-0.561 0.455,-1.017 1.017,-1.017Zm4.144,1.493c0.263,0 0.476,-0.213 0.476,-0.476c0,-0.263 -0.213,-0.476 -0.476,-0.476l-2.033,0c-0.263,0 -0.476,0.213 -0.476,0.476c-0,0.263 0.213,0.476 0.476,0.476l2.033,0Zm-6.256,0c0.263,0 0.477,-0.213 0.477,-0.476c-0,-0.263 -0.214,-0.476 -0.477,-0.476l-2.033,0c-0.263,0 -0.476,0.213 -0.476,0.476c-0,0.263 0.213,0.476 0.476,0.476l2.033,0Zm0.282,-1.632c0.186,0.186 0.488,0.186 0.673,0c0.186,-0.186 0.186,-0.488 0,-0.673l-1.437,-1.438c-0.186,-0.186 -0.488,-0.186 -0.674,-0c-0.186,0.186 -0.186,0.487 0,0.673l1.438,1.438Zm5.097,-1.438c0.186,-0.186 0.186,-0.487 -0,-0.673c-0.186,-0.186 -0.488,-0.186 -0.673,-0l-1.438,1.438c-0.186,0.185 -0.186,0.487 -0,0.673c0.185,0.186 0.487,0.186 0.673,0l1.438,-1.438Zm-3.744,0.483c0,0.263 0.214,0.476 0.477,0.476c0.262,0 0.476,-0.213 0.476,-0.476l-0,-2.033c-0,-0.263 -0.214,-0.477 -0.476,-0.477c-0.263,0 -0.477,0.214 -0.477,0.477l0,2.033Zm-1.612,-1.406c0.368,0.069 0.726,0.166 1.072,0.289l-0,0.783l-1.072,-1.072Z",R.IS_VALID="M8.968,11.978l-1.982,0l-0,1.982l1.982,0l-0,-1.982Zm-0.968,-4.015l-1.014,0l-0,3.012l1.982,-0l-0,-1.136c1.739,-0.432 3.028,-2.004 3.028,-3.877c0,-2.206 -1.79,-3.996 -3.996,-3.996c-2.207,-0 -3.996,1.789 -3.996,3.996l1.998,-0c-0,-1.104 0.894,-1.998 1.998,-1.998c1.103,-0 1.998,0.895 1.998,1.998c0,1.103 -0.894,1.998 -1.998,1.998l0,0.003Z",R.MACRO="M4.632,6.37c-0.24,0.492 -0.374,1.046 -0.374,1.63c-0,2.065 1.677,3.742 3.742,3.742c2.065,0 3.742,-1.677 3.742,-3.742c0,-2.065 -1.677,-3.742 -3.742,-3.742c-0.418,-0 -0.82,0.069 -1.194,0.196l-0.764,-2.266l0.397,-2.034c1.031,-0.205 2.091,-0.205 3.122,-0l0.409,2.099c0.24,0.082 0.473,0.179 0.701,0.29l1.774,-1.195c0.873,0.584 1.623,1.334 2.207,2.207l-1.195,1.774c0.111,0.228 0.208,0.461 0.29,0.701l2.099,0.409c0.205,1.031 0.205,2.091 0,3.122l-2.099,0.409c-0.082,0.24 -0.179,0.473 -0.29,0.701l1.195,1.774c-0.584,0.873 -1.334,1.623 -2.207,2.207l-1.774,-1.195c-0.228,0.111 -0.461,0.208 -0.701,0.29l-0.409,2.099c-1.031,0.205 -2.091,0.205 -3.122,0l-0.409,-2.099c-0.24,-0.082 -0.473,-0.179 -0.701,-0.29l-1.774,1.195c-0.873,-0.584 -1.623,-1.334 -2.207,-2.207l1.195,-1.774c-0.111,-0.228 -0.208,-0.461 -0.29,-0.701l-2.099,-0.409c-0.205,-1.031 -0.205,-2.091 -0,-3.122l2.099,-0.409c0.077,-0.226 0.167,-0.446 0.272,-0.66l-0.001,-0.001l0.41,-0.846l-1.428,0.353l-0.433,-1.751l4.358,-1.076l1.853,4.087l-1.643,0.745l-0.607,-1.34l-0.402,0.829Z",R.LATENT="M10.667,1.31c5.164,0 9.357,4.185 9.357,9.339c-0,5.154 -4.193,9.338 -9.357,9.338c-5.165,0 -9.358,-4.184 -9.358,-9.338c0,-5.154 4.193,-9.339 9.358,-9.339Zm0.695,8.661l0,-7.105c0,-0.191 -0.156,-0.347 -0.348,-0.347l-0.695,-0c-0.192,-0 -0.348,0.156 -0.348,0.347l0,7.435l0.001,0.009l-0.001,0.009l0,0.695c0,0.192 0.156,0.348 0.348,0.348l5.924,0c0.191,0 0.347,-0.156 0.347,-0.348l0,-0.695c0,-0.192 -0.156,-0.348 -0.347,-0.348l-4.881,0Z";class L extends D{constructor(t,e){super(0,0),this.connections=[],this._pinProperty=e,this.hidden=!1,this._isInput=this._pinProperty.direction!==c.EGPD_Output,this._color=b.getPinColor(this._pinProperty),this._pinProperty.valueType&&(this._secondaryColor=b.getPinColorByCategory(this._pinProperty.valueType)),this.width=0,this.height=27,this.visible=!e.hidden,this.category=e.category,this.initPinIcons()}initialize(){this.visible&&(this.pinProperty.hidden||this.pinProperty.hideName?this.pinProperty.hidden||(this.width=L.PINS_PADDING_HORIZONTAL+L.PIN_ICON_WIDTH):this.width=this.formattedNameWidth(this.pinProperty)+L.PINS_PADDING_HORIZONTAL+L.PIN_ICON_WIDTH),this.postInit()}initPinIcons(){switch(this._pinProperty.containerType){case E.Array:this.icon=this._pinProperty.isLinked?new Path2D(R.PIN_ARRAY_CONNECTED):new Path2D(R.PIN_ARRAY_DISCONNECTED);break;case E.Set:this.icon=new Path2D(R.PIN_SET);break;case E.Map:this.icon=new Path2D(R.PIN_MAP_KEY),this.secondaryIcon=new Path2D(R.PIN_MAP_VALUE);break;case E.None:default:this.icon=void 0}void 0===this.icon&&this._pinProperty.isReference&&(this._pinProperty.isLinked?this.icon=new Path2D(R.PIN_REFERENCE_CONNECTED):this.icon=new Path2D(R.PIN_REFERENCE_DISCONNECTED))}get pinProperty(){return this._pinProperty}set parent(t){this.controlParent=t;let e=this.findParent(H);e&&(1!=this.pinProperty.advancedView||e.showAdvanced||this.pinProperty.isLinked||(this.visible=!1))}addConnection(t){this.connections.push(t)}postInit(){this.pinProperty.shouldDrawDefaultValueBox&&this._pinProperty.defaultValueControlClass&&(this.defaultValueBox=new this._pinProperty.defaultValueControlClass(this._pinProperty.defaultValue),this.defaultValueBox.initControl(this.app),this.defaultValueBox.position.x=this.formattedNameWidth(this._pinProperty)+L.PINS_PADDING_HORIZONTAL+L.PINS_PADDING_LEFT_DEFAULT_BOX,this.defaultValueBox.padding.right=L.PINS_PADDING_LEFT_DEFAULT_BOX,this.defaultValueBox.padding.left=L.PINS_PADDING_LEFT_DEFAULT_BOX,this.width+=this.defaultValueBox.width+this.defaultValueBox.padding.left+this.defaultValueBox.padding.right,this.height+=this.defaultValueBox.padding.top+this.defaultValueBox.padding.bottom)}setHidden(t){this.hidden=t}onDraw(t){if(this.hidden)return;t.save();let e=this.pinProperty.category;t.fillStyle(this._color).strokeStyle(this._color);let i=this.pinProperty.direction===c.EGPD_Output?-this.padding.right:this.padding.left;switch(t.translate(i,Math.floor(.5*this.height)),e){case a.exec:this.drawExecutionPin(t);break;case a.delegate:this.drawDelegatePin(t);break;default:this.drawPin(t)}t.restore()}drawPinIcon(t,e){const i=Math.floor(this.getPinX());t.fillStyle(this._color).translate(i-7.5,-7.5).fill(this.icon,"evenodd"),void 0!==this.secondaryIcon&&t.fillStyle(this._secondaryColor).fill(this.secondaryIcon,"evenodd")}drawPin(t){let e=this.setupTextDrawing(t);const i=this.getPinX();t.fillText(this._pinProperty.formattedName,e,4),void 0===this.icon?(t.fillStyle(this._color).fillCircle(i+6,0,2.3),this._pinProperty.isLinked?t.fillCircle(i,0,6):(t.strokeStyle(this._color).lineWidth(2).strokeCircle(i,0,4.8),this.drawDefaultValueBox(t)),t.strokeStyle("#000").lineWidth(.5).strokeCircle(i,0,6)):this.icon&&this.drawPinIcon(t,this.icon)}drawExecutionPin(t){t.save();let e=this.setupTextDrawing(t);if(t.fillText(this._pinProperty.formattedName,e,4),this._pinProperty.formattedName){const e=this.setupTextDrawing(t);t.fillText(this._pinProperty.formattedName,e,4)}t.translate(this.getPinX(),-7),t.strokeStyle("#fff").fillStyle("#fff").lineWidth(1.1).beginPath().moveTo(-3,0).lineTo(1,0).lineTo(8,6).lineTo(8,8).lineTo(1,14).lineTo(-3,14).lineTo(-4,13).lineTo(-4,1).lineTo(-3,0).closePath(),this.pinProperty.isLinked?t.fill():t.stroke(),t.restore()}drawDelegatePin(t){t.save();let e=this.setupTextDrawing(t),i=this.getPinX();this.pinProperty.showInHead||(i-=4),t.fillText(this._pinProperty.formattedName,e,4),t.fillStyle(this._color).strokeStyle(this._color).lineWidth(2),this.pinProperty.isLinked?t.roundedRectangle(i,-5,11,11,3).fill():t.roundedRectangle(i,-5,10,10,3).stroke(),t.restore()}drawDefaultValueBox(t){this.defaultValueBox&&this.defaultValueBox.draw(t)}getPinX(){return this._isInput?L.PINS_PADDING_HORIZONTAL:this.size.x-L.PINS_PADDING_HORIZONTAL}setupTextDrawing(t){let e=this.size.x-(L.PIN_NAME_PADDING_LEFT+L.PINS_PADDING_HORIZONTAL);return this._isInput?(t.textAlign("left"),e=L.PIN_NAME_PADDING_LEFT+L.PINS_PADDING_HORIZONTAL):t.textAlign("right"),t.font("12px sans-serif").fillStyle("#eee"),e}formattedNameWidth(t){return this.app.canvas.font(S.NODE_FONT).getContext().measureText(t.formattedName).width+L.PIN_NAME_PADDING_LEFT}getPinAbsolutePosition(){let t=this.getAbsolutPosition();return t.y+=.5*this.height,this.pinProperty.direction===c.EGPD_Output?(t.x+=(this.width||this.size.x)-L.PINS_PADDING_HORIZONTAL,this.pinProperty.category===a.delegate&&(t.x+=8)):t.x+=L.PINS_PADDING_HORIZONTAL,t}}L.PIN_NAME_PADDING_LEFT=14,L.PIN_ICON_WIDTH=10,L.PINS_PADDING_HORIZONTAL=16,L.PINS_PADDING_LEFT_DEFAULT_BOX=8;class M extends D{constructor(t,e,i){super(t,e,i),this.drawChildren=!0,this.children=[]}refreshLayout(){super.refreshLayout(),this.applyFills()}draw(t){if(this.visible){if(t.save(),t.translate(Math.round(this.position.x),Math.round(this.position.y)),this.onDraw(t),this.drawChildren){t.save(),t.translate(Math.round(this.padding.left),Math.round(this.padding.top));for(let e of this.children)e.draw(t);t.restore()}t.restore()}}add(t){return this.children.push(t),t.parent=this,t}insert(t,e){return this.children.splice(e,0,t),t.parent=this,t}getChildren(){return this.children}getCalculatedSize(){let t=new r(0,0);for(let e of this.children){if(e.ignoreLayout)continue;let i=e.getCalculatedSize();t.x=Math.max(t.x,i.x),t.y=Math.max(t.y,i.y)}t.x+=this.padding.left+this.padding.right,t.y+=this.padding.top+this.padding.bottom,t.x=Math.max(t.x,this.minWidth||0),t.y=Math.max(t.y,this.minHeight||0),this.controlSize=t.copy();for(let t of this.children)t.fillParentHorizontal&&(t.desiredWidth=this.size.x-this.padding.left-this.padding.right),t.fillParentVertical&&(t.desiredHeight=this.size.y-this.padding.top-this.padding.top);return t}isDirty(){let t=this.dirty;for(let e of this.children)t=t||e.isDirty();return t}applyFills(t){for(let t of this.children)t instanceof M&&t.applyFills()}}!function(t){t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT"}(C||(C={}));class U extends M{constructor(t,e,i){super(t,e,i),this.childAlignment=C.LEFT}onDraw(t){}getCalculatedSize(){let t=new r(0,0),e=0;this.verticalFillCount=0;for(let i of this.children){if(i.ignoreLayout||!i.visible)continue;let s=i.getCalculatedSize();i.position.y=t.y,t.x=Math.max(t.x,s.x),t.y+=s.y,i.fillParentVertical?this.verticalFillCount++:e+=s.y}return t.x=Math.max(t.x,this.minWidth||0),t.y=Math.max(t.y,this.minHeight||0),this.controlSize=t.copy(),this.childrenHeight=e,t.x+=this.padding.left+this.padding.right,t.y+=this.padding.top+this.padding.bottom,t}positionChildren(){if(this.childAlignment==C.RIGHT)for(let t of this.children){let e=this.size.x-this.padding.left-t.size.x;t.position.x=e}}applyFills(t){let e=(t?.y||this.size.y)-this.childrenHeight-(this.padding.top+this.padding.bottom),i=this.size.x,s=e/this.verticalFillCount,n=new r(this.padding.left,this.padding.top);for(let t of this.children)!t.ignoreLayout&&t.visible&&(t.position.x=n.x,t.position.y=n.y,t.fillParentHorizontal&&(t.desiredWidth=i),t.fillParentVertical&&(t.desiredHeight=s),n.y+=t.size.y+(t.padding.top||0)+(t.padding.bottom||0),t instanceof M&&t.applyFills(new r(i,s)));this.positionChildren()}}class F extends M{constructor(t,e,i){super(t,e,i)}onDraw(t){}getCalculatedSize(){let t=new r(0,0),e=0;this.horizontalFillCount=0;for(let i of this.children){if(i.ignoreLayout||!i.visible)continue;let s=i.getCalculatedSize();i.position.x=t.x,t.x+=s.x,t.y=Math.max(t.y,s.y),i.fillParentHorizontal?this.horizontalFillCount++:e+=s.x}return t.x=Math.max(t.x,this.minWidth||0),t.y=Math.max(t.y,this.minHeight||0),t.x=this.width||t.x,t.y=this.height||t.y,this.controlSize=t.copy(),this.childrenWidth=e,t.x+=this.padding.left+this.padding.right,t.y+=this.padding.top+this.padding.bottom,t}applyFills(t){let e=((t?.x||this.size.x)-this.childrenWidth-(this.padding.left+this.padding.right))/this.horizontalFillCount,i=this.size.y,s=new r(0,0);for(let t of this.children)!t.ignoreLayout&&t.visible&&(t.position.x=s.x,t.position.y=s.y,t.fillParentHorizontal&&(t.desiredWidth=e),t.fillParentVertical&&(t.desiredHeight=i),s.x+=t.size.x+(t.padding.left||0)+(t.padding.right||0),t instanceof M&&t.applyFills(new r(e,i)))}}class v extends D{constructor(t,e,i){super(),this.text=t,this.font=e||S.NODE_FONT,this.color=i||S.NODE_TEXT_COLOR,this.padding={top:0,right:0,bottom:0,left:0}}initialize(){let t=this.measureText();this.minWidth=t.width,this.minHeight=t.fontBoundingBoxAscent+t.fontBoundingBoxDescent,isNaN(this.minHeight)&&(t=this.measureText("|_"),this.minHeight=t.actualBoundingBoxAscent+t.actualBoundingBoxDescent+5),this.baseLine=Math.floor(this.minHeight/3)}onDraw(t){let e=this.getPosition();t.font(this.font).textAlign(this.textAlign).fillStyle(this.color).fillText(this.text,e.x,e.y)}measureText(t){return this.app.canvas.font(this.font).getContext().measureText(t||this.text)}getPosition(){let t=new r(0,0);switch(this.textAlign){case"center":t.x=.5*this.size.x,t.y=this.size.y+this.padding.top-this.baseLine;break;case"right":t.x=this.size.x-this.minWidth-this.padding.right,t.y=this.size.y+this.padding.top-this.baseLine;break;case"left":default:t.x=this.padding.left,t.y=this.size.y+this.padding.top-this.baseLine}return t}}class B extends U{constructor(t,e){super(),this.color="rgb(160, 0, 0)",this.fillParentHorizontal=!0,this.minHeight=15,this.label=new v(t),this.label.fillParentHorizontal=!0,this.label.textAlign="center",this.label.padding={top:2,right:0,bottom:0,left:0},this.add(this.label),this.toolTip=e}onDraw(t){t.fillStyle(this.color).roundedRectangle(0,0,this.size.x,this.size.y,3).fill()}}class G extends D{constructor(t){super(),this.icon=new Path2D(t),this.width=22,this.height=20,this.padding={top:3,right:0,bottom:0,left:0}}onDraw(t){t.fillStyle(S.NODE_TEXT_COLOR).translate(this.padding.left,this.padding.top).fill(this.icon,"evenodd")}}class k extends G{constructor(t){super(t),this.ignoreLayout=!0,this.width=k.ICON_SIZE,this.height=k.ICON_SIZE}onDraw(t){t.fillStyle(S.NODE_TEXT_COLOR).translate(this.parent.size.x+this.padding.left-k.HALF_ICON_SIZE,-k.HALF_ICON_SIZE+this.padding.top).fill(this.icon,"evenodd")}}k.ICON_SIZE=22,k.HALF_ICON_SIZE=11;class H extends M{constructor(t){super(t.pos.x,t.pos.y),this.pins=[],this._node=t,this.width=0,this.height=0,this._selected=!1,this._stroke={lineWidth:1,style:"rgb(0,0,0)"},this.showAdvanced=t.advancedPinDisplay,this.mainPanel=new U,this.mainPanel.fillParentHorizontal=!0,this.add(this.mainPanel),this.pinPanel=new F,this.pinPanel.fillParentHorizontal=!0,this.mainPanel.add(this.pinPanel),this.inputPinPanel=new U,this.outputPinPanel=new U,this.outputPinPanel.childAlignment=C.RIGHT,this.outputPinPanel.fillParentHorizontal=!0,this.pinPanel.add(this.inputPinPanel),this.pinPanel.add(this.outputPinPanel),this.initErrorBar(),this.addInfoIcons()}initErrorBar(){if(void 0!==this.node.errorType&&void 0!==this.node.errorMsg)switch(this.node.errorType){case 1:let t=new B("ERROR!",this.node.errorMsg);this.mainPanel.add(t)}}addInfoIcons(){this.node.latent&&this.mainPanel.add(new k(R.LATENT))}set selected(t){this._selected=t}get selected(){return this._selected}get sourceText(){return this._node.sourceText}get node(){return this._node}createPins(t){for(let t of this.node.customProperties)t instanceof d&&this.createPin(t)}createPin(t){let e=new L(this.position,t);this.pins.push(e),this.onPinCreated(e)}onPinCreated(t){t.pinProperty.direction===c.EGPD_Output?this.outputPinPanel.add(t):this.inputPinPanel.add(t)}onDraw(t){}drawStroke(t){this._selected?t.lineWidth(H._SELECTION_LINE_WIDTH).strokeStyle(H._SELECTION_COLOR):t.lineWidth(this._stroke.lineWidth).strokeStyle(this._stroke.style),t.stroke()}}H._SELECTION_COLOR="rgb(231,158,0)",H._SELECTION_LINE_WIDTH=2.5;class Z extends H{constructor(t){super(t),this.zIndex=-100,this.width=t.width,this.height=t.height,this.applyCommentColor(t.backgroundColor)}onDraw(t){t.fillStyle(this.bodyBackgroundColor).font(S.NODE_FONT).roundedRectangle(0,0,this.width,this.height,5).fill(),this.drawTitle(t),t.roundedRectangle(0,0,this.width,this.height,5),this.drawStroke(t)}applyCommentColor(t){null!=t&&""!=t||(t=Z._DEFAULT_COMMENT_COLOR);let e=new w(t);e.applyGamma(),e.A=.3*e.A,this.bodyBackgroundColor=e.toRGBAString(),e.darken(.3),this.headerBackgroundColor=e.toRGBString()}drawTitle(t){const e=new r(9,23);t.fillStyle(this.headerBackgroundColor).roundedRectangle(0,0,this.width,32,{radiusTopLeft:5,radiusTopRight:5,radiusBottomLeft:0,radiusBottomRight:0}).fill().font("600 18px sans-serif").textAlign("left").strokeStyle("#333").lineWidth(1.5).strokeText(this.node.title,e.x+1,e.y+1).fillStyle(Z._HEADER_TEXT_COLOR).fillText(this.node.title,e.x,e.y)}}Z._HEADER_TEXT_COLOR="rgb(238,238,238)",Z._DEFAULT_COMMENT_COLOR="rgba(255,255,255,1)";class V{constructor(t){this._propertyParsers={},this._propertyParsers=t}parse(t){throw new Error("Not implemented! A derived class does not override the 'parse' function of the abstract class 'NodeParser'.")}parseProperties(t){for(let e=t.unparsedLines.length-1;e>=0;e--){const i=t.unparsedLines[e];this.parseProperty(t.node,i)&&t.unparsedLines.splice(e,1)}}parseProperty(t,e){const i=e.split("=");let s=i.shift();const n=i.join("=");s=s.replace(/\((.+)\)/g,"");const r=this._propertyParsers[s];return!!r&&(r(t,n),!0)}}class K extends V{constructor(){super({CommentColor:(t,e)=>{t.backgroundColor=x.parseColor(e)},NodeWidth:(t,e)=>{t.width=Number.parseInt(e)},NodeHeight:(t,e)=>{t.height=Number.parseInt(e)},NodeComment:(t,e)=>{t.title=e.replace(/"/g,"")}})}parse(t){return this.parseProperties(t),new Z(t.node)}}class z extends F{constructor(t,e){super(),this.headerHeight=z.HEADER_TITLE_HEIGHT,this.icon=void 0,this.node=t,this.padding={top:2,right:0,bottom:0,left:7},e&&(this.icon=new G(e),this.add(this.icon)),this.titlePanel=new U,this.titlePanel.padding={top:0,right:0,bottom:0,left:0};let i=new v(t.title,S.NODE_HEADER_FONT);i.color=S.NODE_TEXT_COLOR,i.padding={top:6,right:0,bottom:3,left:0},this.titlePanel.add(i);let s=this.node.subTitles.sort(((t,e)=>(e.orderIndex||0)-(t.orderIndex||0)));for(const t of s){let e=new v(t.text,S.NODE_FONT,S.NODE_SUBTITLE_COLOR);this.titlePanel.add(e)}this.add(this.titlePanel),this.delegatePanel=new U,this.delegatePanel.fillParentHorizontal=!0,this.delegatePanel.minWidth=28,this.add(this.delegatePanel)}initialize(){this.fillStyleHeader=this.getHeaderFillStyle()}onDraw(t){t.fillStyle(this.fillStyleHeader).roundedRectangle(1,1,this.size.x-2,this.size.y,{radiusTopLeft:5,radiusTopRight:5,radiusBottomLeft:0,radiusBottomRight:0}).fill()}getHeaderFillStyle(){const t=this.node.backgroundColor||z.NODE_DEFAULT_BACKGROUND_COLOR,e=this.app.canvas.getContext().createLinearGradient(0,0,150,0);return e.addColorStop(0,`rgb(${t})`),e.addColorStop(1,`rgba(${t},0.15)`),e}addDelegate(t){this.delegatePanel.add(t)}}z.HEADER_TITLE_HEIGHT=23,z.NODE_DEFAULT_BACKGROUND_COLOR="78, 117, 142";class W extends U{constructor(t){super(),this.color="#FFE32F",this.svg=new Image,this.svg.src="data:image/svg+xml,"+escape('<svg width="32px" height="32px" viewBox="0 12 32 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><path d="M16,6.988l-16,0l-16,18.024l16,-0l16,-18.024Z" style="fill:'+this.color+';fill-opacity:0.4;"/><path d="M48,6.988l-16,0l-16,18.024l16,-0l16,-18.024Z" style="fill:'+this.color+';fill-opacity:0.4;"/></svg>'),this.svg.width="25px",this.svg.height="22px",this.svg.onload=()=>{this.imageLoaded()},this.fillParentHorizontal=!0,this.minHeight=22,this.label=new v(t),this.label.fillParentHorizontal=!0,this.label.textAlign="center",this.label.padding={top:3,right:0,bottom:2,left:0},this.add(this.label)}onDraw(t){t.fillStyle(this.pattern),t.fillRect(0,0,this.size.x,this.size.y)}imageLoaded(){this.pattern=this.app.canvas.getContext().createPattern(this.svg,"repeat"),this.app.scene.refresh()}}class X extends H{constructor(t,e){super(t),this.headerHeight=X.NODE_HEADER_TITLE_HEIGHT,this.minHeight=X.NODE_HEADER_TITLE_HEIGHT,this.header=new z(t,e),this.header.fillParentHorizontal=!0,this.pinPanel.padding={top:3,right:0,bottom:3,left:0},this.createPins(new r(0,this.headerHeight)),this.mainPanel.insert(this.header,0),this.initializeEnabledState()}initializeEnabledState(){void 0!==this.node.enabledState&&this.mainPanel.add(new W(m(this.node.enabledState)))}createPin(t){let e=new L(this.position,t);if(this.pins.push(e),t.direction==c.EGPD_Output){if(t.showInHead)return e.fillParentVertical=!0,void this.header.addDelegate(e);this.outputPinPanel.add(e)}else this.inputPinPanel.add(e)}onDraw(t){super.onDraw(t),t.fillStyle(S.NODE_BACKGROUND_COLOR).font(S.NODE_FONT).roundedRectangle(0,0,this.size.x,this.size.y,5).fill(),t.roundedRectangle(0,0,this.size.x,this.size.y,5),this.drawStroke(t)}}X.NODE_HEADER_TITLE_HEIGHT=23,X.NODE_HEADER_SUBTITLE_HEIGHT=14,X.NODE_HEADER_SPACE_BETWEEN_TITLE_AND_SUBTITLE=4,X.NODE_HEADER_ICONS_WIDTH=50;class j extends D{constructor(t){super(),this.fillParentVertical=!0,this.minWidth=t,this.padding={top:0,right:0,bottom:0,left:0}}onDraw(t){}}class Y extends H{constructor(t){super(t),this.minHeight=32,this.padding={top:2,right:0,bottom:0,left:0},this.createPins(new r(0,0))}initialize(){if(this.node.title){const t=this.measureText(S.NODE_MATHFUNC_TITLE_FONT,this.node.title).width+32,e=new j(t);e.fillParentVertical=!0,this.pinPanel.insert(e,1)}}onDraw(t){t.fillStyle(Y._NODE_BACKGROUND_COLOR).roundedRectangle(0,0,this.size.x,this.size.y,16).fill(),this.drawTitle(t),this.drawFirstSubTitle(t),this.drawStroke(t)}drawTitle(t){this.node.title&&t.font(S.NODE_MATHFUNC_TITLE_FONT).textAlign("center").fillStyle(S.NODE_MATHFUNC_TITLE_COLOR).fillText(this.node.title,.5*this.size.x,.5*this.size.y+8)}drawFirstSubTitle(t){this.node.subTitles&&0!==this.node.subTitles.length&&t.font(S.NODE_MATHFUNC_SUBTITLE_FONT).textAlign("center").fillStyle(S.NODE_MATHFUNC_TITLE_COLOR).fillText(this.node.subTitles[0].text,.5*this.size.x,.5*this.size.y+22)}measureText(t,e){return this.app.canvas.font(t).getContext().measureText(e)}}Y._NODE_BACKGROUND_COLOR="rgba(15,15,15,0.6)";class q extends V{parse(t){const e=t.node,i=q.MATH_FUNCTIONS.find((t=>e.functionReference.memberName.startsWith(t.name)));return e.subTitles=[],e.isPrimitiveNode=!!i,e.isPrimitiveNode?(e.title=i.displayName,x.hidePinNames(e.customProperties),new Y(e)):new X(e,this.getIconForHeadedNode(e))}getIconForHeadedNode(t){return t.functionReference.memberName.startsWith("Make")?R.MAKE_STRUCT:t.functionReference.memberName.startsWith("Break")?R.BREAK_STRUCT:R.FUNCTION}}q.MATH_FUNCTIONS=[{name:"Multiply",displayName:""},{name:"Divide",displayName:""},{name:"Add",displayName:"+"},{name:"Subtract",displayName:"-"},{name:"Percent",displayName:"%"},{name:"FMax",displayName:"MAX"},{name:"Max",displayName:"MAX"},{name:"FMin",displayName:"MIN"},{name:"Min",displayName:"MIN"},{name:"Dot",displayName:""},{name:"LessEqual",displayName:"<="},{name:"Less",displayName:"<"},{name:"GreaterEqual",displayName:">="},{name:"Greater",displayName:">"},{name:"Abs",displayName:"ABS"},{name:"Exp",displayName:"e"},{name:"Sqrt",displayName:"SQRT"},{name:"Square",displayName:"^2"},{name:"NotEqual",displayName:"!="},{name:"Not",displayName:"NOT"},{name:"EqualEqual",displayName:"=="},{name:"BooleanOR",displayName:"OR"},{name:"BooleanXOR",displayName:"XOR"},{name:"BooleanNOR",displayName:"NOR"},{name:"BooleanAND",displayName:"AND"},{name:"BooleanNAND",displayName:"NAND"}];class ${constructor(){this.FUNCTION_NAMES={K2_GetComponentRotation:"GetWorldRotation",GreaterGreater_VectorRotator:"RotateVector"}}parse(t){let e={};const i=(t=(t=t.trim()).substr(1,t.length-2)).split(",");for(let t=0;t<i.length;++t){let s=i[t].split("="),n=s[0],r=s[1];switch(n){case"MemberName":e.memberName=this.translateFunctionName(x.parseString(r));break;case"MemberParent":e.memberParent=$.parseClassReference(r);break;case"MemberGuid":e.memberGUID=r;break;case"bSelfContext":e.selfContext="True"==r}}return e}translateFunctionName(t){for(let e in this.FUNCTION_NAMES){let i=this.FUNCTION_NAMES[e];t=t.replace(e,i)}return t}static parseClassReference(t){const e=t.substring(0,t.indexOf("'")),i=t.substring(t.indexOf("'")).replace(/['"]/g,"");return{type:e,classPath:i,className:x.getClassFriendlyName(i)}}}class J extends D{onDraw(t){}onMouseDown(t){return!1}onMouseUp(t){return!1}onMouseEnter(t){return!1}onMouseLeave(t){return!1}onMouseMove(t){return!1}}class Q extends J{constructor(t){super(),this.foldout=!1,this.hovered=!1,this.height=Q.BUTTON_HEIGHT,this.fillParentHorizontal=!0,this.padding={top:0,right:0,bottom:3,left:0},this.foldout=t,this.zIndex=1}get foldoutState(){return this.foldout}set foldoutState(t){this.foldout=t,this.app.scene.refresh()}onMouseEnter(t){return this.hovered=!0,this.app.scene.refresh(),!0}onMouseLeave(t){return this.hovered=!1,this.app.scene.refresh(),!0}onMouseDown(t){return!0}onMouseUp(t){return this.foldoutState=!this.foldoutState,this.onClick&&this.onClick(this.foldoutState),!0}onDraw(t){this.hovered&&t.fillStyle("rgba(255,255,255,0.1)").fillRect(0,0,this.size.x,this.size.y),this.drawChevron(t)}drawChevron(t){t.save(),t.translate(.5*this.size.x,.5*this.size.y),t.fillStyle("#eee").beginPath(),this.foldoutState?t.moveTo(5,5).lineTo(0,-2).lineTo(-5,5).lineTo(5,5):t.moveTo(5,-2).lineTo(0,5).lineTo(-5,-2).lineTo(5,-2),t.fill(),t.restore()}}Q.BUTTON_HEIGHT=20,Q.BUTTON_MARGIN=3;class tt extends X{constructor(t,e){super(t,e),this.foldState=!1,this.foldState=void 0===t.advancedPinDisplay||t.advancedPinDisplay,this.nodeButton=new Q(this.foldState),this.mainPanel.add(this.nodeButton),this.nodeButton.onClick=t=>this.toggleFold(t)}toggleFold(t){this.foldState=t,this.applyAdvancedView(this.foldState),this.app.scene.refresh()}applyAdvancedView(t){for(let e of this.pins)!0!==e.pinProperty.advancedView||e.pinProperty.isLinked||(e.visible=t);this.nodeButton.refreshLayout(),this.refreshLayout();for(let t of this.pins)t.refreshLayout()}}class et extends V{parse(t){const e=t.node,i=et.STR_FUNCTIONS.find((t=>e.functionReference.memberName.startsWith(t.name)));return i&&(e.title=i.displayName),e.subTitles=[],!0===i?.isPrimitive?(x.hidePinNames(e.customProperties),new Y(e)):new X(e,R.FUNCTION)}}et.STR_FUNCTIONS=[{name:"Concat_StrStr",displayName:"Append"},{name:"Conv_",displayName:"",isPrimitive:!0}];class it extends V{parse(t){const e=t.node;let i=!1;const s=it.FUNCTIONS.find((t=>e.functionReference.memberName===t.name));return s?(e.title=s.displayName,i=s.isPrimitive):e.functionReference.memberName.startsWith("Array_")&&(e.title=e.functionReference.memberName.substr(6),e.title=u(e.title).toUpperCase(),i=!0),e.subTitles=[],!0===i?(x.hidePinNames(e.customProperties),new Y(e)):new X(e,R.FUNCTION)}}it.FUNCTIONS=[{name:"Array_Identical",displayName:"==",isPrimitive:!0},{name:"Array_Remove",displayName:"REMOVE INDEX",isPrimitive:!0},{name:"Array_RemoveItem",displayName:"REMOVE",isPrimitive:!0},{name:"Array_RandomFromStream",displayName:"Random Array Item from Stream",isPrimitive:!1},{name:"Array_Set",displayName:"Set Array Elem",isPrimitive:!1}];class st extends V{constructor(){super({bIsPureFunc:(t,e)=>{t.isPureFunc="True"===e},bIsConstFunc:(t,e)=>{t.isConstFunc="True"===e},FunctionReference:(t,e)=>{const i=new $;if(t.functionReference=i.parse(e),t.title=u(_(t.functionReference.memberName)),!0===t.functionReference.selfContext)t.subTitles.push({text:"Target is self context"});else if(t.functionReference?.memberParent?.className){const e=t.customProperties.find((t=>"self"===t?.name?.toLowerCase()));if(e&&!e.hidden){const e=m(t.functionReference?.memberParent?.className);t.subTitles.push({text:`Target is ${e}`})}}}})}parse(t){const e=t.node;this.parseProperties(t),e.backgroundColor=!0===e.isPureFunc?S.DEFAULT_FUNC_PURE_BACKGROUND_COLOR:S.DEFAULT_FUNC_BACKGROUND_COLOR;let i=R.FUNCTION;e.class===g.FUNCTION_ENTRY&&(i=this.handleFunctionNode(e));const s=st._FUNCTION_MAP[e.functionReference?.memberParent?.classPath];return s?s(t):void 0!==e.advancedPinDisplay?new tt(e,i):new X(e,i)}handleFunctionNode(t){return t.backgroundColor=S.DEFAULT_FUNC_ENTRY_BACKGROUND_COLOR,t.title=u(t.functionReference.memberName.replace("UserConstructionScript","ConstructionScript")),R.BREAK_STRUCT}}st._FUNCTION_MAP={"/Script/Engine.KismetMathLibrary":t=>(new q).parse(t),"/Script/Engine.KismetStringLibrary":t=>(new et).parse(t),"/Script/Engine.KismetArrayLibrary":t=>(new it).parse(t)};class nt extends V{constructor(){super({InputAxisName:(t,e)=>{t.inputAxisName=e.replace(/"/g,""),t.title="InputAxis "+t.inputAxisName},CustomFunctionName:(t,e)=>{t.customFunctionName=e}})}parse(t){return this.parseProperties(t),t.node.backgroundColor=nt._DEFAULT_BACKGROUND_COLOR,x.configureFirstDelegatePinInHead(t.node.customProperties),new X(t.node,R.EVENT)}}nt._DEFAULT_BACKGROUND_COLOR="156, 36, 35",function(t){t[t.Getter=0]="Getter",t[t.Setter=1]="Setter"}(y||(y={}));class rt extends Y{constructor(t){super(t),this.minWidth=124}drawTitle(t){t.font("bold 18px sans-serif").textAlign("center").fillStyle(S.NODE_MATHFUNC_TITLE_COLOR).fillText("SET",this.size.x/2,22)}}class ot extends V{constructor(){super({VariableReference:(t,e)=>{const i=new $;t.variableReference=i.parse(e)}})}parse(t){this.parseProperties(t);const e=t.node,i=t.node.class===g.VARIABLE_SET;return e.variableType=y.Getter,i?(e.variableType=y.Setter,t.node.title="",this.hideOutputPinNames(e),new rt(t.node)):(t.node.title=void 0,new Y(t.node))}hideOutputPinNames(t){for(let e=t.customProperties.length-1;e>=0;e--){if(t.customProperties[e]instanceof d==!1)continue;const i=t.customProperties[e];i.direction===c.EGPD_Output&&(i.hideName=!0)}}}class lt extends D{constructor(t){super(),this.color=t,this.height=S.DEFAULT_BOX_HEIGHT,this.width=this.height,this.padding.top=1,this.padding.bottom=1}onDraw(t){t.roundedRectangle(0,0-S.DEFAULT_BOX_HEIGHT/2,this.width,this.height,S.DEFAULT_BOX_RADIUS).fillStyle(this.color.toRGBAString()).fill()}}class at{}class ct extends D{constructor(t){super(),this.height=S.DEFAULT_BOX_HEIGHT,this.entries=t,this.padding.top=1,this.padding.bottom=1}initialize(){let t=0;this.entries.forEach((e=>{const i=this.app.canvas.getContext().measureText(`${e.key}`).width+3,s=i+this.app.canvas.getContext().measureText(`${e.value}`).width+2*S.DEFAULT_VALUE_BOX_TEXT_PADDING;this.entries.push({key:e.key,value:e.value,x:t,keyWidth:i,boxWidth:s}),t+=s+5})),this.width=t}onDraw(t){this.entries.forEach((e=>{t.roundedRectangle(e.x,0-S.DEFAULT_BOX_HEIGHT/2,e.boxWidth,S.DEFAULT_BOX_HEIGHT,S.DEFAULT_BOX_RADIUS).fillStyle("rgba(70,70,70,0.5)").fill(),t.textAlign("left").font("10px sans-serif").fillStyle("#999").fillText(`${e.key}`,e.x+S.DEFAULT_VALUE_BOX_TEXT_PADDING,S.DEFAULT_VALUE_BOX_TEXT_PADDING),t.textAlign("left").font(S.NODE_FONT).fillStyle("#ccc").fillText(`${e.value}`,e.x+e.keyWidth+S.DEFAULT_VALUE_BOX_TEXT_PADDING,S.DEFAULT_VALUE_BOX_TEXT_PADDING)}))}}class ht extends D{constructor(t){super(),this.text=t,this.height=S.DEFAULT_BOX_HEIGHT,this.padding.top=1,this.padding.bottom=1}initialize(){this.width=this.app.canvas.getContext().measureText(this.text).width+2*S.DEFAULT_VALUE_BOX_TEXT_PADDING}onDraw(t){t.roundedRectangle(0,0-S.DEFAULT_BOX_HEIGHT/2,this.width,S.DEFAULT_BOX_HEIGHT,S.DEFAULT_BOX_RADIUS).fillStyle("rgba(70,70,70,0.5)").fill().font(S.NODE_FONT).fillStyle("#ccc").textAlign("left").fillText(this.text,S.DEFAULT_VALUE_BOX_TEXT_PADDING,S.DEFAULT_VALUE_BOX_TEXT_PADDING)}}class dt extends D{constructor(t){super(),this.isTrue=t,this.width=S.DEFAULT_BOX_HEIGHT,this.height=S.DEFAULT_BOX_HEIGHT,this.padding.top=1,this.padding.bottom=1}onDraw(t){const e=new Path2D(R.DEFAULT_VALUE_BOOL_TRUE);t.roundedRectangle(0,0-S.DEFAULT_BOX_HEIGHT/2,S.DEFAULT_BOX_HEIGHT-1,S.DEFAULT_BOX_HEIGHT-1,S.DEFAULT_BOX_RADIUS).fillStyle("rgba(50,50,50,0.5)").fill(),t.strokeStyle("rgba(70,70,70,0.7)").lineWidth(2).stroke(),this.isTrue&&t.fillStyle(S.NODE_TEXT_COLOR).translate(-.5,-S.DEFAULT_BOX_HEIGHT/2).fill(e,"evenodd")}}class pt{parse(t,e){this._property=new d(e);const i=t.matchAll(/([a-zA-Z0-9_.]+)\s*=\s*(("[^"]*")|(\([^)]*\))|(\w*\(\w*(?:[^(]*\([^)]*(?:"[^"]*")\))*\))|(\w*\([^)]*\([^)]*\)[^)]*\))|(\w*\([^)]*\))|([^,]*))/g);for(const[t,e,s]of i){if(!t||!e){console.warn(`Skipped property attribute because invalid key: '${t}'`);continue}const i=pt._ATTRIBUTE_PARSERS[e];i?i(this._property,s):console.info(`Didn't parse property attribute '${e}'. There isn't a matching parser.`)}return pt.setDefaultValueIfUndefined(this._property),this._property}static parseLinkedTo(t){let e=[],i=(t=t.substr(1,t.length-1)).split(",");for(let t=0;t<i.length;++t){let s=i[t].split(" ");if(2==s.length){let t=new at;t.nodeName=s[0],t.pinID=s[1],e.push(t)}}return e}static parseSubCategoryObject(t){let e=t,i=t.substring(0,t.indexOf("'")),s=t.matchAll(/'"(.*)"'/g);if(s){let t=s.next();t&&t.value&&(e=t.value[1])}return{type:i,class:e}}static parsePinFriendlyName(t){let e="";if(t.startsWith("NSLOCTEXT")){let i="NSLOCTEXT(".length-1,s=(t=t.substr(i,t.length-i-1)).split(",");return e=s[s.length-1].replace(/"/g,""),e}if(t.startsWith("LOCGEN_FORMAT_NAMED")){let e,i="LOCGEN_FORMAT_NAMED(".length,s="",n={},r=(t=t.substr(i,t.length-i-1)).matchAll(/(\w*\((?:"[^"]*"[, ]*)+\))|("[^"]*")/g);for(const[t,i,o]of r){let i=t;if(i=i.trim(),i.startsWith("NSLOCTEXT")){i=i.substring("NSLOCTEXT(".length,i.length-1);let t=i.split(","),r=t[0].trim().replace(/"/g,""),o=(t[1].trim().replace(/"/g,""),t[2].trim().replace(/"/g,""));"KismetSchema"===r&&(s=o),""===r&&(r=e,n[r]=o)}e=i.replace(/"/g,"")}let o=s;for(let t in n){let e=n[t];o=o.replace("{"+t+"}",e)}return o}return e=t.replace(/"/g,""),e}static parsePinCategory(t){return(t=x.parseString(t)).toLowerCase()}static parseDirection(t){switch(t=t.replace(/"/g,"")){case"EGPD_Output":return c.EGPD_Output;case"EGPD_Input":default:return c.EGPD_Input}}static parseDefaultValue(t,e){if(e)switch(t.category){case a.float:return{control:ht,data:f(x.parseString(e))};case a.bool:return{control:dt,data:"true"===x.parseString(e).toLowerCase()};case a.struct:return this.parseDefaultValueStruct(t.subCategoryObject.class,e);case a.byte:return"Enum"===t.subCategoryObject.type?{control:ht,data:x.parseEnumValue(t.subCategoryObject.class,e)}:{control:ht,data:x.parseString(e)};default:return{control:ht,data:x.parseString(e)}}}static parseEnumValue(){}static parseDefaultValueStruct(t,e){switch(t){case N.VECTOR:case N.ROTATOR:return{control:ct,data:this.parseDefaultValueVector(e)};case N.LINEAR_COLOR:const t=this.parseDefaultValueStructCommon(e).map((t=>Number(t.value))),i=new w(255*(t[0]||0),255*(t[1]||0),255*(t[2]||0),t[3]);return i.applyGamma(),{control:lt,data:i};default:return{control:ct,data:this.parseDefaultValueStructCommon(e)}}}static parseDefaultValueVector(t){const e=["X","Y","Z"];let i=[];t.split(",").forEach((t=>{i.push(f(x.parseString(t)))}));for(let t=0;t<i.length;t++)i[t]={key:e[t],value:i[t]};return i}static parseDefaultValueStructCommon(t){let e=[];return(t=(t=x.parseString(t)).trim().replace(/[()]/g,"")).split(",").forEach((t=>{const[i,s]=t.split("=");e.push({key:i,value:f(s)})})),e}static parseDefaultValueText(t){const e=/(?<=")([^"]+)(?="\))/g.exec(t.trim());return e?e[0]:t}static setDefaultValueIfUndefined(t){if(null==t.defaultValue)switch(t.category){case a.bool:t.defaultValue=!1,t.defaultValueControlClass=dt;case a.string:t.defaultValue="  ",t.defaultValueControlClass=ht;case a.struct:switch(t.subCategoryObject.class){case N.VECTOR2D:t.defaultValue=[{key:"X",value:"0.0"},{key:"Y",value:"0.0"}],t.defaultValueControlClass=ct}}}}P=pt,pt._ATTRIBUTE_PARSERS={PinId:(t,e)=>{t.id=e},PinName:(t,e)=>{t.name=m(x.parseString(e))},PinFriendlyName:(t,e)=>{t.friendlyName=m(pt.parsePinFriendlyName(e))},"PinType.PinCategory":(t,e)=>{t.category=pt.parsePinCategory(e)},Direction:(t,e)=>{t.direction=pt.parseDirection(e)},PinToolTip:(t,e)=>{t.toolTip=x.parseString(e)},"PinType.PinSubCategory":(t,e)=>{t.subCategory=x.parseString(e)},"PinType.PinSubCategoryObject":(t,e)=>{t.subCategoryObject=pt.parseSubCategoryObject(e)},"PinType.bIsReference":(t,e)=>{t.isReference="true"===e.toLowerCase()},"PinType.bIsConst":(t,e)=>{t.isConst="true"===e.toLowerCase()},"PinType.bIsWeakPointer":(t,e)=>{t.isWeakPointer="true"===e.toLowerCase()},"PinType.bIsUObjectWrapper":(t,e)=>{t.isUObjectWrapper="true"===e.toLowerCase()},DefaultValue:(t,e)=>{const i=P.parseDefaultValue(t,e);t.defaultValue=i.data,t.defaultValueControlClass=i.control},DefaultObject:(t,e)=>{const i=x.parseString(e),s=x.getClassFriendlyName(i);s&&(t.defaultValue=s,t.defaultValueControlClass=ht)},DefaultTextValue:(t,e)=>{t.defaultValue=P.parseDefaultValueText(e),t.defaultValueControlClass=ht},AutogeneratedDefaultValue:(t,e)=>{t.autogeneratedDefaultValue=x.parseString(e)},LinkedTo:(t,e)=>{t.linkedTo=pt.parseLinkedTo(e)},bHidden:(t,e)=>{t.hidden="true"===e.toLowerCase()},bDefaultValueIsIgnored:(t,e)=>{t.defaultValueIsIgnored="true"===e.toLowerCase()},bDefaultValueIsReadOnly:(t,e)=>{t.defaultValueIsReadOnly="true"===e.toLowerCase()},bAdvancedView:(t,e)=>{t.advancedView="true"===e.toLowerCase()},bOrphanedPin:(t,e)=>{t.orphanedPin="true"===e.toLowerCase()},bNotConnectable:(t,e)=>{t.notConnectable="true"===e.toLowerCase()},PersistentGuid:(t,e)=>{t.persistentGUID=x.parseString(e)},"PinType.ContainerType":(t,e)=>{t.containerType=e},"PinType.PinValueType":(t,e)=>{void 0!==(e=(e=e.replace(/[\(\)]/g,"")).split("=")[1])&&(t.valueType=e.replace(/"/g,""))},"PinType.PinSubCategoryMemberReference":(t,e)=>{}};class ut extends V{parse(t){const e=ut._NODE_TITLES[t.node.class];return t.node.title=e.title,t.node.backgroundColor=ut._DEFAULT_BACKGROUND_COLOR,new X(t.node,e.icon)}}ut._DEFAULT_BACKGROUND_COLOR="150, 150, 150",ut._NODE_TITLES={[g.IF_THEN_ELSE]:{title:"Branch",icon:R.BRANCH},[g.EXECUTION_SEQUENCE]:{title:"Sequence",icon:R.SEQUENCE},[g.MULTI_GATE]:{title:"Multi Gate",icon:R.SEQUENCE}};class _t extends H{constructor(t){super(t),this.width=16,this.height=16,this._stroke.lineWidth=.5,this.drawChildren=!1,this.color=b.getPinColor(t.customProperties[0]),this.mainPanel.width=0,this.createPins()}onPinCreated(t){t.ignoreLayout=!0,this.mainPanel.add(t),t.position.y=8,t.width=20,t.height=0,t.visible=!1}onDraw(t){t.translate(8,8).fillStyle(this.color).fillCircle(6,0,2.3).fillCircle(0,0,6),this.drawStroke(t)}}class mt extends V{parse(t){return t.node.backgroundColor=mt._DEFAULT_BACKGROUND_COLOR,new _t(t.node)}}mt._DEFAULT_BACKGROUND_COLOR="255, 255, 255",function(t){t[t.NotReplicated=0]="NotReplicated",t[t.Multicast=1]="Multicast",t[t.RunOnServer=2]="RunOnServer",t[t.RunOnOwningClient=3]="RunOnOwningClient"}(O||(O={}));class ft extends V{constructor(){super({CustomFunctionName:(t,e)=>{t.customFunctionName=e.replace(/"/g,""),t.title=t.customFunctionName,t.subTitles.unshift({text:"Custom Event"})},FunctionFlags:(t,e)=>{if(t.functionFlags=Number.parseInt(e),t.reliable=0!=(t.functionFlags&ft.FUNCTION_FLAG_RELIABLE),t.replicationType=this.getReplicationType(t.functionFlags),t.replicationType!==O.NotReplicated){const e=O[t.replicationType],i=ft.REPLICATION_TYPE_TEXTS[e];t.subTitles.unshift({text:i,orderIndex:1})}},ErrorType:(t,e)=>{t.errorType=Number.parseInt(e)}})}parse(t){return this.parseProperties(t),x.configureFirstDelegatePinInHead(t.node.customProperties),t.node.backgroundColor=ft._DEFAULT_BACKGROUND_COLOR,new X(t.node,R.CUSTOM_EVENT)}getReplicationType(t){for(const e in ft.FUNCTION_FLAG_BIT_MASKS)if(Object.prototype.hasOwnProperty.call(ft.FUNCTION_FLAG_BIT_MASKS,e)){if(0!=(t&ft.FUNCTION_FLAG_BIT_MASKS[e]))return O[e]}return O.NotReplicated}}ft.FUNCTION_FLAG_RELIABLE=64,ft.FUNCTION_FLAG_BIT_MASKS={[O.Multicast]:16384,[O.RunOnServer]:2097152,[O.RunOnOwningClient]:16777216},ft.REPLICATION_TYPE_TEXTS={[O.Multicast]:"Executes On All",[O.RunOnServer]:"Executes On Server",[O.RunOnOwningClient]:"Executes On Owning Client"},ft._DEFAULT_BACKGROUND_COLOR="156, 36, 35";class Tt extends V{constructor(){super({EventReference:(t,e)=>{const i=new $;t.eventReference=i.parse(e),t.title="Event "+t.eventReference.memberName.replace("Receive","")},bOverrideFunction:(t,e)=>{t.overrideFunction="True"===e}})}parse(t){return this.parseProperties(t),t.node.backgroundColor=Tt._DEFAULT_BACKGROUND_COLOR,x.configureFirstDelegatePinInHead(t.node.customProperties),new X(t.node,R.EVENT)}}Tt._DEFAULT_BACKGROUND_COLOR="156, 36, 35";class gt extends V{constructor(){super({InputKey:(t,e)=>{t.inputKey=e},bControl:(t,e)=>{t.control="true"===e.toLowerCase()},bAlt:(t,e)=>{t.alt="true"===e.toLowerCase()},bShift:(t,e)=>{t.shift="true"===e.toLowerCase()},bCommand:(t,e)=>{t.command="true"===e.toLowerCase()}})}parse(t){this.parseProperties(t),t.node.backgroundColor=gt.DEFAULT_BACKGROUND_COLOR;let e=t.node,i=[],s="";e.control&&i.push("Ctrl"),e.command&&i.push("Cmd"),e.alt&&i.push("Alt"),e.shift&&i.push("Shift"),i.length>0&&(s=i.join("+")+" "),s+=m(e.inputKey),s=s.replace("Magic Leap","ML");let n=R.INPUT_KEY;return(e.inputKey.startsWith("Gamepad_")||e.inputKey.startsWith("MagicLeap_"))&&(n=R.INPUT_GAMEPAD),t.node.title=s,new X(t.node,n)}}gt.DEFAULT_BACKGROUND_COLOR="156, 36, 35";class Et extends V{constructor(){super({TargetType:(t,e)=>{t.targetType=$.parseClassReference(e)}})}parse(t){this.parseProperties(t);let e=t.node;return e.title="Cast to "+e.targetType.className,e.backgroundColor="32, 116, 120",new X(t.node,R.CAST)}}class Nt extends V{constructor(){super({Enum:(t,e)=>{t.enum=x.parseString(e)},EnumEntries:(t,e)=>{t.enumEntries||(t.enumEntries=[]),t.enumEntries.push(x.parseString(e))}})}parse(t){this.parseProperties(t);let e=t.node;return e.title="Switch on "+x.getClassFriendlyName(e.enum),e.backgroundColor="162, 161, 35",new tt(t.node,R.SWITCH)}}class Ct{parse(t){let e={};const i=(t=(t=t.trim()).substr(1,t.length-2)).split(",");for(let t=0;t<i.length;++t){let s=i[t].split("="),n=s[0],r=s[1];switch(n){case"MacroGraph":e.macroFuncName=Ct.extractNodeNameOfMacroGraphStr(r.substring(r.indexOf("'")))}}return e}static extractNodeNameOfMacroGraphStr(t){const e=x.parseString(t),i=/(?<=\:)\w*/g.exec(e);return i?i[0]:e}}class yt extends V{constructor(){super({MacroGraphReference:(t,e)=>{const i=new Ct;t.macroGraphReference=i.parse(e),t.title=u(t.macroGraphReference.macroFuncName)}})}parse(t){this.parseProperties(t);const e=t.node,i=yt.getIconForMacro(e.macroGraphReference.macroFuncName);t.node.backgroundColor=yt._DEFAULT_BACKGROUND_COLOR;const s=yt._HEADLESS_NODES.find((t=>t.name===e.macroGraphReference?.macroFuncName));return s?(e.title=s.displayName,x.hidePinNames(e.customProperties),new Y(t.node)):new X(t.node,i)}static getIconForMacro(t){switch(t){case"ForLoop":case"ForLoopWithBreak":case"WhileLoop":return R.LOOP;case"Gate":return R.GATE;case"FlipFlop":return R.FLIPFLOP;case"Do":return R.DO_N;case"DoOnce":return R.DO_ONCE;case"IsValid":return R.IS_VALID;default:return R.MACRO}}}yt._DEFAULT_BACKGROUND_COLOR="150, 150, 150",yt._HEADLESS_NODES=[{name:"IncrementInt",displayName:"++"},{name:"DecrementInt",displayName:"--"},{name:"IncrementFloat",displayName:"++"},{name:"DecrementFloat",displayName:"--"}];class Pt extends V{constructor(){super({FunctionReference:(t,e)=>{const i=new $;t.functionReference=i.parse(e),t.functionReference.memberName=t.functionReference.memberName.replace("UserConstructionScript","ConstructionScript"),t.backgroundColor=S.DEFAULT_FUNC_ENTRY_BACKGROUND_COLOR,t.class===g.FUNCTION_RESULT?t.title="Return Node":t.title=u(_(t.functionReference.memberName))}})}parse(t){return this.parseProperties(t),new X(t.node,R.CONSTRUCT)}}class Ot extends V{constructor(){super({bReturnByRefDesired:(t,e)=>{t.returnByRefDesired=!("False"===e)}})}parse(t){const e=t.node;return e.returnByRefDesired=!0,this.parseProperties(t),e.title="GET",e.subTitles.push({text:!0===e.returnByRefDesired?"a ref":"a copy"}),x.hidePinNames(e.customProperties),new Y(e)}}class At extends V{parse(t){return t.node.title="Make Array",t.node.backgroundColor=S.DEFAULT_FUNC_PURE_BACKGROUND_COLOR,new X(t.node,R.MAKE_ARRAY)}}class xt extends V{parse(t){return t.node.title="Input Touch",t.node.backgroundColor=xt._DEFAULT_BACKGROUND_COLOR,new X(t.node,R.INPUT_TOUCH)}}xt._DEFAULT_BACKGROUND_COLOR="156, 36, 35";class St extends V{constructor(){super({InputAxisKey:(t,e)=>{t.inputAxisKey=e}})}parse(t){this.parseProperties(t),t.node.backgroundColor=S.DEFAULT_FUNC_PURE_BACKGROUND_COLOR;let e=t.node;e.title="Get "+u(e.inputAxisKey);let i=R.FUNCTION;return e.inputAxisKey.startsWith("Mouse")&&(i=R.MOUSE),new X(t.node,i)}}class wt extends V{constructor(){super({StructType:(t,e)=>{t.structType=$.parseClassReference(e)}})}parse(t){this.parseProperties(t),t.node.backgroundColor=wt._DEFAULT_BACKGROUND_COLOR;const e=t.node;let i="",s=R.PILL;switch(t.node.class){case g.SET_FIELDS_IN_STRUCT:i="Set members in ";break;case g.BREAK_STRUCT:i="Break ",s=R.BREAK_STRUCT;break;case g.MAKE_STRUCT:i="Make ",s=R.MAKE_STRUCT}return e.title=i+e.structType.className,new X(t.node,s)}}wt._DEFAULT_BACKGROUND_COLOR="19, 42, 79";class It extends V{constructor(){super({IndexPinType:(t,e)=>{let i,s,n=(e=e.replace(/[()]/g,"")).split(",");for(let t of n){let e=t.split("=");"PinCategory"==e[0]&&(i=e[1].replace('"',"")),"PinSubCategory"==e[0]&&(s=e[1].replace('"',""))}t.indexPinType={category:i,subCategory:s}}})}parse(t){return this.parseProperties(t),t.node.title="Select",t.node.backgroundColor=S.DEFAULT_FUNC_PURE_BACKGROUND_COLOR,It.changePinsToReference(t),new X(t.node,R.SELECT)}static changePinsToReference(t){for(let e of t.node.customProperties)e instanceof d&&"index"!==e.name.toLowerCase()&&(e.isReference=!0)}}class Dt extends V{constructor(){super({TimelineName:(t,e)=>{t.title=x.parseString(e)}})}parse(t){return this.parseProperties(t),t.node.backgroundColor=Dt.DEFAULT_BACKGROUND_COLOR,new X(t.node,R.TIMER)}}Dt.DEFAULT_BACKGROUND_COLOR="138, 108, 19";class bt extends V{parse(t){const e=x.getFirstClassNameFromPinProperties(t.node.customProperties)||"";return t.node.title=`Spawn Actor ${m(e)}`,new tt(t.node,R.SPAWN_ACTOR)}}class Rt extends V{constructor(){super({bCanHaveInputs:(t,e)=>{"true"===e.toLowerCase()&&(t.title="Outputs")},bCanHaveOutputs:(t,e)=>{"true"===e.toLowerCase()&&(t.title="Inputs")}})}parse(t){return this.parseProperties(t),t.node.backgroundColor=S.DEFAULT_FUNC_BACKGROUND_COLOR,new X(t.node,R.CONSTRUCT)}}class Lt extends V{parse(t){const e=x.getFirstClassNameFromPinProperties(t.node.customProperties)||"User ";return t.node.title=`Create ${m(e)} Widget`,new X(t.node,R.CONSTRUCT)}}class Mt extends V{parse(t){const e=x.getFirstClassNameFromPinProperties(t.node.customProperties)||"";return t.node.title=`Create ${m(e)}`,new X(t.node,R.CONSTRUCT)}}class Ut extends V{constructor(){super({NodeGuid:(t,e)=>{t.guid=e},NodePosX:(t,e)=>{t.pos.x=Number.parseInt(e)},NodePosY:(t,e)=>{t.pos.y=Number.parseInt(e)},AdvancedPinDisplay:(t,e)=>{t.advancedPinDisplay="Shown"===e},EnabledState:(t,e)=>{t.enabledState=e},ErrorType:(t,e)=>{t.errorType=Number.parseInt(e)},ErrorMsg:(t,e)=>{t.errorMsg=e.replace(/["]/g,"").replace(/\\\'/g,"'")}}),this._OBJECT_STARTING_TAG="Begin Object",this._nodeParsers={[g.KNOT]:()=>new mt,[g.CALL_FUNCTION]:()=>new st,[g.IF_THEN_ELSE]:()=>new ut,[g.EXECUTION_SEQUENCE]:()=>new ut,[g.MULTI_GATE]:()=>new ut,[g.VARIABLE_GET]:()=>new ot,[g.VARIABLE_SET]:()=>new ot,[g.EVENT]:()=>new Tt,[g.CUSTOM_EVENT]:()=>new ft,[g.INPUT_AXIS_EVENT]:()=>new nt,[g.COMMENT]:()=>new K,[g.INPUT_KEY]:()=>new gt,[g.CommutativeAssociativeBinaryOperator]:()=>new st,[g.DYNAMIC_CAST]:()=>new Et,[g.SWITCH_ENUM]:()=>new Nt,[g.MACRO_INSTANCE]:()=>new yt,[g.FUNCTION_ENTRY]:()=>new Pt,[g.FUNCTION_RESULT]:()=>new Pt,[g.CALL_ARRAY_FUNCTION]:()=>new st,[g.SELF]:()=>new ot,[g.GET_ARRAY_ITEM]:()=>new Ot,[g.MAKE_ARRAY]:()=>new At,[g.INPUT_TOUCH]:()=>new xt,[g.GET_INPUT_AXIS_KEY_VALUE]:()=>new St,[g.SET_FIELDS_IN_STRUCT]:()=>new wt,[g.BREAK_STRUCT]:()=>new wt,[g.MAKE_STRUCT]:()=>new wt,[g.SELECT]:()=>new It,[g.TIMELINE]:()=>new Dt,[g.SPAWN_ACTOR_FROM_CLASS]:()=>new bt,[g.TUNNEL]:()=>new Rt,[g.CREATE_WIDGET]:()=>new Lt,[g.CREATE_OBJECT]:()=>new Mt},this._customPropertyParsers={Pin:()=>new pt}}parse(t){const e=t.lines[0],i=this.parseHeader(e);t.node={class:i.class,name:i.name,title:i.name,subTitles:[],guid:void 0,pos:new r(0,0),sourceText:t.lines.join("\n"),customProperties:[],latent:!1},this.parseProperties(t),this.parseCustomProperties(t);const s=this._nodeParsers[t.node.class];if(!s)return console.info(`There is no particular implementation for class ${t.node.class}. Falling back to the generic node class.`),new X(t.node);return s().parse(t)}parseHeader(t){let e={};const i=this._OBJECT_STARTING_TAG.length;return(t.substr(i,t.length-i-1).trim().split(" ")||[]).forEach((t=>(t=>{const i=t.split("=");e[i[0]]=i[1].replace(/"/g,"")})(t))),{class:e.Class,name:e.Name}}parseCustomProperties(t){for(const e of t.unparsedLines)if(e.startsWith("CustomProperties")){const i=this.parseCustomProperty(e,t.node.name);if(!i)continue;t.node.customProperties.push(i),i instanceof d&&i.subCategoryObject.class===N.LatentActionInfo&&(t.node.latent=!0)}this.hideExecPins(t.node)}parseCustomProperty(t,e){let i=(t=t.substr("CustomProperties".length).trim()).split(" "),s=i.shift(),n=i.join(" ");n=n.trim(),n=n.substr(1,n.length-2);const r=this._customPropertyParsers[s];if(!r)return void console.info(`There is no implementation for custom property type '${s}'. Skip this property`);return r().parse(n,e)}hideExecPins(t){let e={[c.EGPD_Input]:new Array,[c.EGPD_Output]:new Array};for(const i of t.customProperties)i instanceof d&&null!=i.direction&&i.category===a.exec&&e[i.direction].push(i);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const i=e[t];1==i.length&&(i[0].hideName=!0)}}}class Ft{constructor(t){this._lines=Array.from(t),this._unparsedLines=t.slice(1,t.length-1)}get node(){return this._node}set node(t){this._node=t}get lines(){return this._lines}get unparsedLines(){return this._unparsedLines}}class vt{constructor(){this._OBJECT_STARTING_TAG="Begin Object",this._OBJECT_ENDING_TAG="End Object"}parseBlueprint(t){let e=new Array;this._lines=t.replace(/\r/g,"").split("\n");for(let t=0;t<this._lines.length;++t){let i=x.stripLine(this._lines[t]);if(i.startsWith(this._OBJECT_STARTING_TAG)){const s=this.getLinesUntilEndTag(t);t+=s.length,s.unshift(i),e.push((new Ut).parse(new Ft(s)))}}return e}getLinesUntilEndTag(t){let e=Array(),i="";do{if(++t>=this._lines.length)throw new Error("Invalid blueprint text. An 'Object' node was never closed. Missing 'End Object'");if(i=x.stripLine(this._lines[t]),i.startsWith(this._OBJECT_STARTING_TAG))throw new Error("Invalid blueprint text. An 'Object' node was opened before the previous was closed. Missing 'End Object'");e.push(i)}while(!i.startsWith(this._OBJECT_ENDING_TAG));return e}}class Bt{constructor(t){this._canvas=t,this._position=new r(0,0)}get position(){return this._position}prepareViewport(){this._canvas.translate(Math.round(this._position.x),Math.round(this._position.y))}moveRelative(t){this._position=this._position.add(t)}centerAbsolutePosition(t){this._position=new r(Math.round(t.x+this._canvas.width/2),Math.round(t.y+this._canvas.height/2))}}class Gt extends I{constructor(t){super(0,0,-1e3),this.camera=t,this.ready=!1,this.image=new Image,this.image.onload=t=>this.onLoaded(t),this.image.src=Gt.BACKGROUND_SVG}initialize(){this.loaded&&this.initPattern()}draw(t){this.ready&&t.fillStyle(this.pattern).fillRect(-this.camera.position.x,-this.camera.position.y,t.width,t.height)}onLoaded(t){this.loaded=!0,this.app&&this.initPattern()}initPattern(){this.pattern=this.app.canvas.getContext().createPattern(this.image,"repeat"),this.ready=!0,this.app.scene.refresh()}}Gt.BACKGROUND_SVG="data:image/svg+xml,"+escape('<svg width="96px" height="96px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.5;"><rect x="0" y="0" width="96.375" height="96" style="fill:#262626;stroke:#262626;stroke-width:0.75px;"/><g>        <path d="M96.375,48.389l-96,-0" style="fill:none;stroke:#353535;stroke-width:0.75px;"/>        <path d="M96.375,60.389l-96,-0" style="fill:none;stroke:#353535;stroke-width:0.75px;"/>        <path d="M96.375,72.389l-96,-0" style="fill:none;stroke:#353535;stroke-width:0.75px;"/>        <path d="M96.375,84.389l-96,-0" style="fill:none;stroke:#353535;stroke-width:0.75px;"/>        <path d="M96.375,36.389l-96,-0" style="fill:none;stroke:#353535;stroke-width:0.75px;"/>        <path d="M96.375,24.389l-96,-0" style="fill:none;stroke:#353535;stroke-width:0.75px;"/>        <path d="M96.375,12.389l-96,-0" style="fill:none;stroke:#353535;stroke-width:0.75px;"/></g><path d="M48.375,96l-0,-96" style="fill:none;stroke:#353535;stroke-width:0.75px;"/><path d="M36.375,96l-0,-96" style="fill:none;stroke:#353535;stroke-width:0.75px;"/><path d="M24.375,96l-0,-96" style="fill:none;stroke:#353535;stroke-width:0.75px;"/><path d="M12.375,96l-0,-96" style="fill:none;stroke:#353535;stroke-width:0.75px;"/><path d="M60.375,96l-0,-96" style="fill:none;stroke:#353535;stroke-width:0.75px;"/><path d="M72.375,96l-0,-96" style="fill:none;stroke:#353535;stroke-width:0.75px;"/><path d="M84.375,96l-0,-96" style="fill:none;stroke:#353535;stroke-width:0.75px;"/><path d="M96,0l-96,0l0,96" style="fill:none;stroke:#161616;stroke-width:1.55px;"/></svg>');class kt extends D{constructor(t,e){super(0,0,-1),this.pinStart=t,this.pinEnd=e,this.pinStartPosition=this.pinStart.getPinAbsolutePosition(),this.pinEndPosition=this.pinEnd.getPinAbsolutePosition();let i=this.pinEndPosition.subtract(this.pinStartPosition),s=Math.sqrt(i.x*i.x+i.y*i.y)-12;this.curveValue=.4*s,this.color=b.getPinColor(this.pinStart.pinProperty),this.lineWidth=this.pinStart.pinProperty.category===a.exec?2.5:1.5}onDraw(t){this.pinStartPosition=this.pinStart.getPinAbsolutePosition(),this.pinEndPosition=this.pinEnd.getPinAbsolutePosition();let e=this.pinEndPosition.subtract(this.pinStartPosition),i=Math.sqrt(e.x*e.x+e.y*e.y)-12;this.curveValue=.4*i,t.lineWidth(this.lineWidth).beginPath().moveTo(this.pinStartPosition.x,this.pinStartPosition.y).strokeStyle(this.color).lineTo(this.pinStartPosition.x+6,this.pinStartPosition.y).bezierCurveTo(this.pinStartPosition.x+this.curveValue+6,this.pinStartPosition.y,this.pinEndPosition.x-this.curveValue-6,this.pinEndPosition.y,this.pinEndPosition.x-6,this.pinEndPosition.y).lineTo(this.pinEndPosition.x,this.pinEndPosition.y).stroke()}}class Ht extends I{constructor(t){super(t.getAbsolutPosition().x,t.getAbsolutPosition().y,-1),this._pin=t,this._color=b.getPinColor(this._pin.pinProperty),this._isDirectionOutput=this._pin.pinProperty.direction==c.EGPD_Output,this._lineWidth=this._pin.pinProperty.category===a.exec?2.5:1.5}draw(t){t.save(),t.translate(this._pin.getPinAbsolutePosition().x,this._pin.getPinAbsolutePosition().y),t.lineWidth(this._lineWidth).beginPath().setLineDash([30,4,2.5,4,2.5,4,2.5]),this._isDirectionOutput?t.moveTo(6,0).lineTo(Ht.LINE_LENGTH,0):t.moveTo(-6,0).lineTo(-Ht.LINE_LENGTH,0),t.strokeStyle(this._color).stroke(),t.restore()}}Ht.LINE_LENGTH=80;class Zt{constructor(t,e){this.app=e,this._canvas=t,this._camera=new Bt(this._canvas),this._nodes=new Array,this._controls=new Array,this._pins=new Array}get camera(){return this._camera}get canvas(){return this._canvas}get nodes(){return this._nodes||[]}get interactables(){return this._interactables||[]}collectInteractables(){let t=[];this._controls.forEach((e=>{e instanceof J&&t.push(e),e instanceof M&&this.findInteractablesIn(t,e)})),this._interactables=t}findInteractablesIn(t,e){for(let i of e.getChildren())i instanceof J&&t.push(i),i instanceof M&&this.findInteractablesIn(t,i)}updateLayout(){this._controls.forEach((t=>{t instanceof D&&t.refreshLayout()}))}refresh(){this._canvas.clear(),this._controls.sort(((t,e)=>t.ZIndex-e.ZIndex)),this._camera.prepareViewport(),this._controls.forEach((t=>{void 0!==t.draw&&t.draw(this._canvas)}))}unload(){this._pins=new Array,this._nodes=new Array,this._controls=new Array}load(t){this.createBackground(),this.createControlNodes(t),this.createConnectionLines(),this.initializeControls()}createBackground(){let t=new Gt(this.camera);this._controls.push(t)}createControlNodes(t){for(const e of t)this._nodes.push(e),this._controls.push(e),this.collectPins(e)}collectPins(t){if(t instanceof M)for(let e of t.getChildren())e instanceof L&&this._pins.push(e),e instanceof M&&this.collectPins(e)}createConnectionLines(){const t=[],e=this._pins;for(let i=e.length-1;i>=0;--i){let s=e[i];if(!s.pinProperty.isLinked){e.splice(i,1);continue}if(s.pinProperty.direction!=c.EGPD_Output)continue;let n=!1;for(let i=0;i<s.pinProperty.linkedTo.length;++i){let r=s.pinProperty.linkedTo[i],o=e.find((t=>t.pinProperty.nodeName===r.nodeName&&t.pinProperty.id===r.pinID));o&&(this._controls.push(new kt(s,o)),t.push(s.pinProperty.getUniqueName()),t.push(o.pinProperty.getUniqueName()),n=!0)}n&&e.splice(i,1)}for(let i=e.length-1;i>=0;--i){let s=e[i];if(!(t.indexOf(s.pinProperty.getUniqueName())>=0)&&s.pinProperty.isLinked){let t=new Ht(s);this._controls.push(t)}}}initializeControls(){for(let t of this._controls)this.initializeControl(t)}initializeControl(t){if(t.initControl(this.app),t instanceof M)for(let e of t.getChildren())this.initializeControl(e)}calculateCentroid(){let t=new r(0,0);return 0==this.nodes.length?t:(this.nodes.forEach((e=>{t=new r(t.x-e.position.x-.5*e.size.x,t.y-e.position.y-.5*e.size.y)})),new r(t.x/this.nodes.length,t.y/this.nodes.length))}calculateCenterPoint(){if(0==this.nodes.length)return new r(0,0);let t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;return this.nodes.forEach((n=>{t=Math.min(n.position.x,t),i=Math.min(n.position.y,i),e=Math.max(n.position.x+n.size.x,e),s=Math.max(n.position.y+n.size.y,s)})),new r(.5*-(e-t)-t,.5*-(s-i)-i)}}class Vt{constructor(t){this._element=t,navigator.userAgent.indexOf("Firefox")>0&&(Vt.firefox=!0),this._canvas=new s(t),this._scene=new Zt(this._canvas,this),this.initializeHtmlAttributes(),this._parser=new vt,this.loadBlueprintIntoScene(t.innerHTML),this._controller=new h(t,this),this._controller.registerAction({ctrl:!0,keycode:"KeyC",callback:this.copyBlueprintSelectionToClipboard.bind(this)}),this._controller.registerAction({ctrl:!1,keycode:"Home",callback:this.recenterCamera.bind(this)}),this._controller.registerAction({ctrl:!0,keycode:"KeyV",callback:this.pasteClipboardContentToCanvas.bind(this)}),this._element.onpaste=t=>this.onPaste(t),window.addEventListener("resize",this.refresh.bind(this),!1)}get scene(){return this._scene}get canvas(){return this._canvas}static get isFirefox(){return this.firefox}getBlueprint(){let t=[];return this._scene.nodes.forEach((e=>t=[].concat(t,e.sourceText))),t.join("\n")}initializeHtmlAttributes(){this._element.style.outline="none";let t=this._element.getAttributeNode("data-klee-paste");this.allowPaste="true"==t?.value||!1}refresh(){this._element.width=this._element.offsetWidth,this._element.height=this._element.offsetHeight,this._scene.collectInteractables(),this._scene.updateLayout(),this._scene.refresh()}copyBlueprintSelectionToClipboard(){console.log("Copy selection");let t=[];return this._scene.nodes.filter((t=>t.selected)).forEach((e=>t=[].concat(t,e.sourceText))),navigator.clipboard.writeText(t.join("\n")),!0}pasteClipboardContentToCanvas(t){if(this.allowPaste)return!Vt.isFirefox&&(console.log("Paste from clipboard"),navigator.clipboard.readText().then((t=>{t&&this.loadBlueprintIntoScene(t)})),!0)}onPaste(t){if(!this.allowPaste)return;console.log("Paste from clipboard");let e=t.clipboardData.getData("text/plain");this.loadBlueprintIntoScene(e)}loadBlueprintIntoScene(t){this._scene.unload();const e=this._parser.parseBlueprint(t);this._scene.load(e),this.refresh(),this.recenterCamera()}recenterCamera(){return this._scene.camera.centerAbsolutePosition(this._scene.calculateCenterPoint()),this.refresh(),!0}static registerInstance(t,e){t.setAttribute("data-klee-instance",Vt.instances.length.toString()),Vt.instances.push(e)}static getInstance(t){let e=t.getAttributeNode("data-klee-instance");if(e){let t=Number.parseInt(e.value);if(!isNaN(t)&&t<Vt.instances.length){return Vt.instances[t]}}}static createOrGet(t){let e=this.getInstance(t);if(void 0!==e)return e;let i=new Vt(t);return Vt.registerInstance(t,i),i}}Vt.instances=[];class Kt{constructor(t,e){this.app=void 0!==e?e:Vt.createOrGet(t)}display(t){this.app.loadBlueprintIntoScene(t)}static getInstance(t){let e=Vt.getInstance(t);if(void 0!==e)return new Kt(t,e)}get value(){return this.app.getBlueprint()}}function zt(t){return new Kt(t)}function Wt(t){return Kt.getInstance(t)}window.addEventListener("load",(function(){document.querySelectorAll("canvas.klee").forEach((t=>{new Kt(t)}))}))}},s={};function n(t){var e=s[t];if(void 0!==e)return e.exports;var r=s[t]={exports:{}};return i[t](r,r.exports,n),r.exports}return e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,n.t=function(i,s){if(1&s&&(i=this(i)),8&s)return i;if("object"==typeof i&&i){if(4&s&&i.__esModule)return i;if(16&s&&"function"==typeof i.then)return i}var r=Object.create(null);n.r(r);var o={};t=t||[null,e({}),e([]),e(e)];for(var l=2&s&&i;"object"==typeof l&&!~t.indexOf(l);l=e(l))Object.getOwnPropertyNames(l).forEach((t=>o[t]=()=>i[t]));return o.default=()=>i,n.d(r,o),r},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(724)})()}));